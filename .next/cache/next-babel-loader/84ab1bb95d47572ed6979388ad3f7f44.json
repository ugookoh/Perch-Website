{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BsDot } from 'react-icons/bs';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { dateformat, sendFeedback, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nconst [GREEN, WHITE, GREY, BLACK, RED, BLUE_TEXT, BLUE, PURPLE, YELLOW] = ['#4EB848', '#FFFFFF', '#959AAC', '#000000', '#FF0000', '#284ED6', '#1970A7', '#A031AF', '#F0E23D'];\nexport default class ContactUs extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"loadResult\", () => {\n      if (this.state.userDetails) {\n        const ref = this.props.type == 'Driver' ? `driverFeedback/${this.state.userDetails.driverID}` : `userFeedback/${this.state.userDetails.userID}`;\n        firebase.database().ref(ref).once('value', snapshot => {\n          this.setState({\n            result: snapshot.val() ? snapshot.val() : null\n          });\n        }).catch(error => {\n          console.log(error.message);\n        });\n      }\n    });\n\n    this.state = {\n      topic: 'unselected',\n      message: '',\n      loading: false,\n      showMessage: false,\n      userDetails: this.props.userDetails,\n      result: null,\n      messageObj: null,\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    this.loadResult();\n  }\n\n  render() {\n    if (!this.state.userDetails && this.props.userDetails) this.setState({\n      userDetails: this.props.userDetails\n    }, () => {\n      this.loadResult();\n    });\n    let results = [];\n\n    if (this.state.result) {\n      const keys = Object.keys(this.state.result).sort((a, b) => b - a);\n\n      for (let k = 0; k < keys.length; k++) results.push( /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.previousMessageSum,\n          onClick: () => {\n            this.setState({\n              messageObj: this.state.result[keys[k]],\n              showMessage: true\n            });\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            style: {\n              fontSize: '95%'\n            },\n            children: this.state.result[keys[k]].subject\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.previousMessageDate,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                fontFamily: 'Gilroy-Semibold',\n                fontSize: '75%',\n                marginRight: '-10px',\n                paddingLeft: '10px'\n              },\n              children: dateformat(this.state.result[keys[k]].date)\n            }), /*#__PURE__*/_jsx(BsDot, {\n              size: '55px',\n              color: this.state.result[keys[k]].status == 'PROCESSED' ? this.props.type == 'Driver' ? BLUE : GREEN : RED\n            })]\n          })]\n        }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine,\n          style: {\n            marginTop: '5px'\n          }\n        })]\n      }));\n    }\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.cont,\n      children: this.state.showMessage ? /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: BLACK,\n              marginBottom: '30px'\n            },\n            children: this.state.messageObj.subject\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.previousMessageC,\n            style: {\n              alignItems: 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.previousMessageCol,\n              style: {\n                backgroundColor: this.props.type == 'Driver' ? BLUE : GREEN\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontSize: '95%',\n                  color: WHITE,\n                  lineHeight: '150%',\n                  paddingRight: '10px',\n                  paddingLeft: '10px'\n                },\n                children: this.state.messageObj.body\n              })\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                fontFamily: 'Gilroy-Semibold',\n                fontSize: '75%'\n              },\n              children: dateformat(this.state.messageObj.date)\n            })]\n          }), this.state.messageObj.status == 'PROCESSED' ? /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.previousMessageC,\n            style: {\n              alignItems: 'flex-start'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.previousMessageCol,\n              style: {\n                backgroundColor: 'rgba(145, 134, 134, 0.5)'\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontSize: '95%',\n                  color: BLACK,\n                  lineHeight: '150%',\n                  paddingRight: '10px',\n                  paddingLeft: '10px'\n                },\n                children: this.state.messageObj.response\n              })\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                fontFamily: 'Gilroy-Semibold',\n                fontSize: '75%'\n              },\n              children: dateformat(this.state.messageObj.responseDate)\n            })]\n          }) : /*#__PURE__*/_jsx(_Fragment, {})]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.contactUsLC,\n          style: {\n            marginTop: '15px',\n            marginBottom: '100px'\n          },\n          children: [/*#__PURE__*/_jsx(\"a\", {\n            className: styles.button1,\n            id: styles.sendMessageContactUS,\n            style: this.props.type == 'Driver' ? {\n              backgroundColor: BLUE\n            } : {},\n            onClick: () => {\n              this.setState({\n                showMessage: false\n              });\n            },\n            children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n              type: \"TailSpin\",\n              color: WHITE,\n              height: '20px',\n              width: '20px'\n            }) : /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Back\"\n            })\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.contactUsLasttext,\n            children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? `Driver` : '', \" app\"]\n          })]\n        })]\n      }) : /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: BLACK\n            },\n            children: \"Contact us form\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: GREY\n            },\n            children: \"Feel free to contact us about issues with your ride or about feeback on how we can better our services.\"\n          }), /*#__PURE__*/_jsxs(\"select\", {\n            value: this.state.topic,\n            className: styles.selectTopic,\n            onChange: v => {\n              this.setState({\n                topic: v.target.value\n              });\n            },\n            style: this.state.topic === 'unselected' ? {\n              color: 'rgba(112, 112, 112, 0.7)'\n            } : {},\n            children: [/*#__PURE__*/_jsx(\"option\", {\n              value: \"unselected\",\n              children: \"(--Select a topic--)\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"Give feedback about our services\",\n              children: \"Give feedback about our services\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"Missing item\",\n              children: \"Missing item\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"Change your name\",\n              children: \"Change your name\"\n            }), this.props.type == 'Driver' ? /*#__PURE__*/_jsx(\"option\", {\n              value: \"Report a rider\",\n              children: \"Report a rider\"\n            }) : /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"Report a driver\",\n                children: \"Report a driver\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Work with us\",\n                children: \"Work with us\"\n              })]\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"Report a bug\",\n              children: \"Report a rider\"\n            }), /*#__PURE__*/_jsx(\"option\", {\n              value: \"Other\",\n              children: \"Other\"\n            })]\n          }), /*#__PURE__*/_jsx(\"textarea\", {\n            type: \"text\",\n            placeholder: \"Enter your message here\",\n            className: styles.contactUsContent,\n            value: this.state.message,\n            onChange: event => {\n              this.setState({\n                message: event.target.value\n              });\n            }\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.em,\n            style: {\n              textAlign: 'initial'\n            },\n            children: this.state.errorMessage\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.contactUsLC,\n          style: {\n            marginTop: '15px',\n            marginBottom: this.state.result ? '0px' : '150px'\n          },\n          children: [/*#__PURE__*/_jsx(\"a\", {\n            className: styles.button1,\n            id: styles.sendMessageContactUS,\n            style: this.props.type == 'Driver' ? {\n              backgroundColor: BLUE\n            } : {},\n            onClick: () => {\n              if (!this.state.loading) sendFeedback.call(this);\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Send Message\"\n            })\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.contactUsLasttext,\n            children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? `Driver` : '', \" app\"]\n          })]\n        }), this.state.result ? /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: WHITE,\n            marginTop: '20px',\n            marginBottom: '150px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: BLACK\n            },\n            children: \"Previous messages\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: GREY,\n              marginBottom: '10px'\n            },\n            children: \"Here are some of your previous messages. Messages would be answered within 2-4 business days\"\n          }), results]\n        }) : /*#__PURE__*/_jsx(_Fragment, {})]\n      })\n    });\n  }\n\n}\n;","map":{"version":3,"sources":["/Users/edokoh9/Documents/PerchWebsite/perch/functions/panels/userPanels/contactUs.js"],"names":["firebase","React","BsDot","Loader","dateformat","sendFeedback","colors","styles","GREEN","WHITE","GREY","BLACK","RED","BLUE_TEXT","BLUE","PURPLE","YELLOW","ContactUs","Component","constructor","props","state","userDetails","ref","type","driverID","userID","database","once","snapshot","setState","result","val","catch","error","console","log","message","topic","loading","showMessage","messageObj","errorMessage","componentDidMount","loadResult","render","results","keys","Object","sort","a","b","k","length","push","previousMessageSum","fontSize","subject","previousMessageDate","fontFamily","marginRight","paddingLeft","date","status","sharedLine","marginTop","cont","container","backgroundColor","title","color","marginBottom","previousMessageC","alignItems","previousMessageCol","lineHeight","paddingRight","body","response","responseDate","contactUsLC","button1","sendMessageContactUS","buttonText1","contactUsLasttext","text","selectTopic","v","target","value","contactUsContent","event","em","textAlign","call"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BsDot } from 'react-icons/bs';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport {\n    dateformat,\n    sendFeedback,\n    colors\n} from '../../functions';\nimport styles from '../panel_layout.module.css';\nconst [GREEN, WHITE, GREY, BLACK, RED, BLUE_TEXT, BLUE, PURPLE, YELLOW] = ['#4EB848', '#FFFFFF', '#959AAC', '#000000', '#FF0000', '#284ED6', '#1970A7', '#A031AF', '#F0E23D'];\n\nexport default class ContactUs extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            topic: 'unselected',\n            message: '',\n            loading: false,\n            showMessage: false,\n            userDetails: this.props.userDetails,\n            result: null,\n            messageObj: null,\n            errorMessage: '',\n        };\n    }\n    componentDidMount() {\n        this.loadResult();\n    }\n    loadResult = () => {\n        if (this.state.userDetails) {\n            const ref = this.props.type == 'Driver' ? `driverFeedback/${this.state.userDetails.driverID}` : `userFeedback/${this.state.userDetails.userID}`;\n            firebase.database().ref(ref).once('value', snapshot => {\n                this.setState({ result: snapshot.val() ? snapshot.val() : null });\n            }).catch(error => { console.log(error.message) });\n        }\n    };\n    render() {\n        if (!this.state.userDetails && this.props.userDetails)\n            this.setState({ userDetails: this.props.userDetails }, () => { this.loadResult(); });\n\n        let results = [];\n        if (this.state.result) {\n            const keys = Object.keys(this.state.result).sort((a, b) => b - a);\n            for (let k = 0; k < keys.length; k++)\n                results.push(\n                    <>\n                        <div className={styles.previousMessageSum} onClick={() => { this.setState({ messageObj: this.state.result[keys[k]], showMessage: true }) }}>\n                            <p style={{ fontSize: '95%' }}>{this.state.result[keys[k]].subject}</p>\n\n                            <div className={styles.previousMessageDate}>\n                                <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', marginRight: '-10px', paddingLeft: '10px' }}>{dateformat(this.state.result[keys[k]].date)}</p>\n                                <BsDot size={'55px'} color={this.state.result[keys[k]].status == 'PROCESSED' ? this.props.type == 'Driver' ? BLUE : GREEN : RED} />\n                            </div>\n                        </div>\n                        {\n                            k == keys.length - 1 ?\n                                <></> :\n                                <div className={styles.sharedLine} style={{ marginTop: '5px' }}></div>\n                        }\n                    </>\n                )\n        }\n\n\n        return (\n            <div className={styles.cont}>\n                {this.state.showMessage ?\n                    <>\n                        <div className={styles.container} style={{ backgroundColor: WHITE, marginTop: '20px' }}>\n                            <p className={styles.title} style={{ color: BLACK, marginBottom: '30px' }}>{this.state.messageObj.subject}</p>\n\n                            <div className={styles.previousMessageC} style={{ alignItems: 'flex-end' }}>\n                                <div className={styles.previousMessageCol} style={{ backgroundColor: this.props.type == 'Driver' ? BLUE : GREEN }}>\n                                    <p style={{ fontSize: '95%', color: WHITE, lineHeight: '150%', paddingRight: '10px', paddingLeft: '10px' }}>\n                                        {this.state.messageObj.body}\n                                    </p>\n                                </div>\n                                <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', }}>{dateformat(this.state.messageObj.date)}</p>\n                            </div>\n                            {this.state.messageObj.status == 'PROCESSED' ?\n                                <div className={styles.previousMessageC} style={{ alignItems: 'flex-start' }}>\n                                    <div className={styles.previousMessageCol} style={{ backgroundColor: 'rgba(145, 134, 134, 0.5)' }}>\n                                        <p style={{ fontSize: '95%', color: BLACK, lineHeight: '150%', paddingRight: '10px', paddingLeft: '10px' }}>\n                                            {this.state.messageObj.response}\n                                        </p>\n                                    </div>\n                                    <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', }}>{dateformat(this.state.messageObj.responseDate)}</p>\n                                </div> : <></>}\n                        </div>\n\n                        <div className={styles.contactUsLC} style={{ marginTop: '15px', marginBottom: '100px' }}>\n                            <a className={styles.button1} id={styles.sendMessageContactUS} style={this.props.type == 'Driver' ? { backgroundColor: BLUE } : {}}\n                                onClick={() => {\n                                    this.setState({ showMessage: false })\n                                }}>\n                                {this.state.loading ?\n                                    <Loader\n                                        type=\"TailSpin\"\n                                        color={WHITE}\n                                        height={'20px'}\n                                        width={'20px'} /> :\n                                    <p className={styles.buttonText1}>Back</p>}\n                            </a>\n                            <p className={styles.contactUsLasttext}>\n                                We respond to your queries via the Perch {this.props.type == 'Driver' ? `Driver` : ''} app\n                    </p>\n                        </div>\n\n                    </> :\n                    <>\n                        <div className={styles.container} style={{ backgroundColor: WHITE, marginTop: '20px' }}>\n                            <p className={styles.title} style={{ color: BLACK }}>Contact us form</p>\n                            <p className={styles.text} style={{ color: GREY }}>\n                                Feel free to contact us about issues with your ride or about feeback on how we can better our services.\n                    </p>\n                            <select\n                                value={this.state.topic}\n                                className={styles.selectTopic}\n                                onChange={(v) => { this.setState({ topic: v.target.value }) }}\n                                style={this.state.topic === 'unselected' ? { color: 'rgba(112, 112, 112, 0.7)' } : {}}\n                            >\n                                <option value=\"unselected\">(--Select a topic--)</option>\n                                <option value=\"Give feedback about our services\">Give feedback about our services</option>\n                                <option value=\"Missing item\">Missing item</option>\n                                <option value=\"Change your name\">Change your name</option>\n                                {\n                                    this.props.type == 'Driver' ?\n                                        <option value=\"Report a rider\">Report a rider</option>\n                                        : <>\n                                            <option value=\"Report a driver\">Report a driver</option>\n                                            <option value=\"Work with us\">Work with us</option>\n                                        </>\n                                }\n                                <option value=\"Report a bug\">Report a rider</option>\n                                <option value=\"Other\">Other</option>\n                            </select>\n\n                            <textarea\n                                type=\"text\"\n                                placeholder=\"Enter your message here\"\n                                className={styles.contactUsContent}\n                                value={this.state.message}\n                                onChange={(event) => { this.setState({ message: event.target.value }); }} />\n                            <p className={styles.em} style={{ textAlign: 'initial' }}>{this.state.errorMessage}</p>\n                        </div>\n\n                        <div className={styles.contactUsLC} style={{ marginTop: '15px', marginBottom: this.state.result ? '0px' : '150px' }}>\n                            <a className={styles.button1} id={styles.sendMessageContactUS} style={this.props.type == 'Driver' ? { backgroundColor: BLUE } : {}}\n                                onClick={() => {\n                                    if (!this.state.loading)\n                                        sendFeedback.call(this);\n                                }}>\n                                <p className={styles.buttonText1}>Send Message</p>\n                            </a>\n                            <p className={styles.contactUsLasttext}>\n                                We respond to your queries via the Perch {this.props.type == 'Driver' ? `Driver` : ''} app\n                    </p>\n                        </div>\n\n                        {this.state.result ?\n                            <div className={styles.container} style={{ backgroundColor: WHITE, marginTop: '20px', marginBottom: '150px' }}>\n                                <p className={styles.title} style={{ color: BLACK }}>Previous messages</p>\n                                <p className={styles.text} style={{ color: GREY, marginBottom: '10px' }}>\n                                    Here are some of your previous messages. Messages would be answered within 2-4 business days\n                                </p>\n\n                                {results}\n                            </div> : <></>}\n\n                    </>}\n            </div>\n        );\n    };\n};"]},"metadata":{},"sourceType":"module"}