{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BiStopCircle } from 'react-icons/bi';\nimport { HiOutlineLocationMarker } from 'react-icons/hi';\nimport { VscCalendar } from 'react-icons/vsc';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { polylineLenght, timeAndDate, M, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar DriverTripHistory = /*#__PURE__*/function (_React$Component) {\n  _inherits(DriverTripHistory, _React$Component);\n\n  var _super = _createSuper(DriverTripHistory);\n\n  function DriverTripHistory(props) {\n    var _this;\n\n    _classCallCheck(this, DriverTripHistory);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        _this.setState({\n          result: null\n        }, function () {\n          firebase.database().ref(\"driverHistory/\".concat(_this.state.userDetails.userID, \"/carpool/\").concat(new Date(_this.state.date).getFullYear(), \"/\").concat(M[new Date(_this.state.date).getMonth()])).once('value', function (snapshot) {\n            _this.setState({\n              result: snapshot.val() ? snapshot.val() : 'NORESULTS'\n            });\n\n            var passengerNo = 0,\n                distance = 0,\n                totalM = 0;\n\n            for (var k in snapshot.val()) {\n              var d = snapshot.val()[k].trips;\n\n              for (var key in d) {\n                passengerNo += d[key].details.tripDetails.seatNumber;\n                distance += polylineLenght(JSON.parse(d[key].details.tripDetails.leg)) * d[key].details.tripDetails.seatNumber;\n                totalM += d[key].details.tripDetails.toPay;\n              }\n\n              ;\n            }\n\n            ;\n            distance > 100 ? distance = (distance / 1000).toFixed(1) : distance = distance.toFixed(distance != 0 ? 1 : 0);\n\n            _this.setState({\n              summary: {\n                distance: distance.toLowerCase(),\n                passengerNo: passengerNo,\n                totalM: totalM.toFixed(2)\n              }\n            });\n          })[\"catch\"](function (error) {\n            console.log(error.message);\n          });\n        });\n      }\n    });\n\n    _this.state = {\n      result: null,\n      date: new Date().getTime(),\n      userDetails: _this.props.userDetails,\n      summary: {\n        distance: '...',\n        passengerNo: '...',\n        totalM: '...'\n      }\n    };\n    return _this;\n  }\n\n  _createClass(DriverTripHistory, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"sorter\",\n    value: function sorter(a, b) {\n      function numbergetter(time) {\n        var slash1 = 0,\n            slash2 = 0,\n            slash3 = 0;\n\n        for (var k = 0; k < time.length; k++) {\n          if (time.charAt(k) == '-') slash1 == 0 ? slash1 = k : slash2 == 0 ? slash2 = k : slash3 = k;\n        }\n\n        ;\n        var DAY = Number(time.substring(0, slash1)) * 86400;\n        var HOUR = Number(time.substring(slash1 + 1, slash2)) * 3600;\n        var MINS = Number(time.substring(slash2 + 1, slash3)) * 60;\n        var SECS = Number(time.substring(slash3 + 1, time.length));\n        return DAY + HOUR + MINS + SECS;\n      }\n\n      ;\n      var a_time = numbergetter(a);\n      var b_time = numbergetter(b);\n      if (a_time > b_time) return -1;else return 1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var trips = [];\n\n      if (this.state.result && this.state.result != 'NORESULTS') {\n        var keys = Object.keys(this.state.result).sort(this.sorter);\n\n        for (var i = 0; i < keys.length; i++) {\n          trips.push( /*#__PURE__*/_jsx(Trip, {\n            date: timeAndDate(keys[i], M[new Date(this.state.date).getMonth()], new Date(this.state.date).getFullYear()),\n            data: this.state.result[keys[i]],\n            lastItem: i == keys.length - 1\n          }, keys[i]));\n        }\n      }\n\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.cont,\n          style: {\n            height: '100%',\n            paddingTop: '10px',\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelDesc,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.tripPanelCalenderCont,\n              style: {\n                marginRight: '10px'\n              },\n              children: [/*#__PURE__*/_jsx(VscCalendar, {\n                color: colors.BLUE,\n                size: '24px',\n                style: {\n                  marginRight: '4px',\n                  marginBottom: '3px'\n                }\n              }), /*#__PURE__*/_jsx(DatePicker, {\n                className: styles.calendarDate,\n                id: styles.calendarDate,\n                placeholderText: \"\".concat(M[new Date(this.state.date).getMonth()].toUpperCase(), \" \").concat(new Date(this.state.date).getFullYear()),\n                onChange: function onChange(date) {\n                  _this2.setState({\n                    date: date\n                  }, function () {\n                    _this2.loadResult();\n                  });\n                },\n                dateFormat: \"MM/yyyy\",\n                showMonthYearPicker: true\n              })]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.contactUsLasttext,\n              id: styles.tripPanelAlignMiddle,\n              style: {\n                width: 'initial',\n                fontSize: '80%',\n                margin: '0px'\n              },\n              children: \"To see the details of a trip please use the mobile app\"\n            })]\n          }), this.state.result && this.state.result !== 'NORESULTS' ? /*#__PURE__*/_jsxs(\"div\", {\n            id: styles.tripPanelCont,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                width: '95%',\n                marginTop: '20px',\n                fontSize: '100%'\n              },\n              children: \"Total Summary\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                margin: '0px',\n                marginTop: '5px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px'\n                },\n                children: \"Number of passengers\"\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px'\n                },\n                children: [this.state.summary.passengerNo, \" \", /*#__PURE__*/_jsx(\"span\", {\n                  className: styles.driverTH_HIDESUMMARY,\n                  children: this.state.summary.passengerNo == 1 ? 'passenger' : 'passengers'\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                margin: '0px',\n                marginTop: '5px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px'\n                },\n                children: \"Total kilometers provided\"\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px'\n                },\n                children: [this.state.summary.distance, \" \", /*#__PURE__*/_jsx(\"span\", {\n                  className: styles.driverTH_HIDESUMMARY,\n                  children: this.state.summary.distance > 100 ? 'kilometers' : 'meters'\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                margin: '0px',\n                marginTop: '10px',\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px',\n                  fontSize: '100%',\n                  fontFamily: 'Gilroy-Bold'\n                },\n                children: \"TOTAL MADE\"\n              }), /*#__PURE__*/_jsxs(\"p\", {\n                className: styles.text,\n                style: {\n                  width: 'initial',\n                  marginTop: '0px',\n                  fontSize: '105%',\n                  color: colors.BLUE,\n                  fontFamily: 'Gilroy-Bold'\n                },\n                children: [\"$ \", this.state.summary.totalM]\n              })]\n            })]\n          }) : /*#__PURE__*/_jsx(_Fragment, {}), this.state.result ? this.state.result == 'NORESULTS' ? /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelLoading,\n            id: styles.tripPanelLoading_,\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/noResultsWomanBlue.svg\",\n              className: styles.noResultsWoman,\n              alt: \"No Results\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.contactUsLasttext,\n              style: {\n                width: 'initial',\n                fontSize: '90%',\n                margin: '0px'\n              },\n              id: styles.tripPanelLoadingText,\n              children: \"Surprisingly, You haven't booked any rides during this time.\"\n            })]\n          }) : trips : /*#__PURE__*/_jsx(\"div\", {\n            className: styles.tripPanelLoading,\n            children: /*#__PURE__*/_jsx(Loader, {\n              type: \"TailSpin\",\n              color: colors.BLUE,\n              height: '100px',\n              width: '100px'\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return DriverTripHistory;\n}(React.Component);\n\nexport { DriverTripHistory as default };\n;\n\nvar Trip = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Trip, _React$Component2);\n\n  var _super2 = _createSuper(Trip);\n\n  function Trip(props) {\n    var _this3;\n\n    _classCallCheck(this, Trip);\n\n    _this3 = _super2.call(this, props);\n    _this3.state = {};\n    return _this3;\n  }\n\n  _createClass(Trip, [{\n    key: \"render\",\n    value: function render() {\n      var data = this.props.data;\n      var passNo = 0,\n          distance = 0,\n          total = 0;\n\n      if (data.trips) {\n        for (var key in data.trips) {\n          passNo += data.trips[key].details.tripDetails.seatNumber;\n          distance += polylineLenght(JSON.parse(data.trips[key].details.tripDetails.leg)) * data.trips[key].details.tripDetails.seatNumber; //seat no * distance\n\n          total += data.trips[key].details.tripDetails.toPay;\n        }\n\n        ;\n      }\n\n      ; //distance = distance * passNo;\n\n      distance > 100 ? distance = \"\".concat((distance / 1000).toFixed(1), \" KM\") : distance = \"\".concat(distance.toFixed(distance != 0 ? 1 : 0), \" M\");\n      distance = distance.toLowerCase();\n      passNo = \"\".concat(passNo, \" \").concat(passNo == 1 ? 'person' : 'people');\n      total = total.toFixed(2);\n      return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          id: styles.tripPanelCont,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              width: '95%',\n              margin: '0px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.tripPanelTitle,\n              children: passNo\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.tripPanelTime,\n              children: this.props.date\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.tripPanelNoOfTrips,\n            style: {\n              backgroundColor: colors.BLUE,\n              height: '10px'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              width: '95%',\n              justifyContent: 'initial',\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(HiOutlineLocationMarker, {\n              color: colors.BLUE,\n              style: {\n                margin: '0px',\n                marginRight: '10px'\n              },\n              className: styles.driverHistory_ICON\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.tripPanelTime,\n              style: {\n                margin: '0px'\n              },\n              children: data.locationAddress\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              width: '95%',\n              justifyContent: 'initial',\n              marginTop: '10px'\n            },\n            children: [/*#__PURE__*/_jsx(BiStopCircle, {\n              color: colors.BLUE,\n              style: {\n                marginRight: '10px'\n              },\n              className: styles.driverHistory_ICON\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.tripPanelTime,\n              style: {\n                margin: '0px'\n              },\n              children: data.destinationAddress\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.tripPanelNoOfTrips,\n            style: {\n              backgroundColor: colors.GREY,\n              height: '1px',\n              marginTop: '17px'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              width: '95%',\n              marginTop: '10px',\n              marginBottom: '15px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.tripPanelTitle,\n              style: {\n                fontFamily: 'Gilroy-Medium',\n                margin: '0px'\n              },\n              children: distance\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.tripPanelCash,\n              style: {\n                color: colors.BLUE\n              },\n              children: [\"$ \", total]\n            })]\n          })]\n        }), this.props.lastItem ?\n        /*#__PURE__*/\n        //just for padding at the bottom\n        _jsx(\"div\", {\n          style: {\n            height: '150px',\n            width: '100%',\n            backgroundColor: 'transparent'\n          }\n        }) : /*#__PURE__*/_jsx(_Fragment, {})]\n      });\n    }\n  }]);\n\n  return Trip;\n}(React.Component);\n\n;","map":null,"metadata":{},"sourceType":"module"}