{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BsDot } from 'react-icons/bs';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { dateformat, sendFeedback, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar ContactUs = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContactUs, _React$Component);\n\n  var _super = _createSuper(ContactUs);\n\n  function ContactUs(props) {\n    var _this;\n\n    _classCallCheck(this, ContactUs);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        var ref = _this.props.type == 'Driver' ? \"driverFeedback/\".concat(_this.state.userDetails.driverID) : \"userFeedback/\".concat(_this.state.userDetails.userID);\n        firebase.database().ref(ref).once('value', function (snapshot) {\n          _this.setState({\n            result: snapshot.val() ? snapshot.val() : null\n          });\n        })[\"catch\"](function (error) {\n          console.log(error.message);\n        });\n      }\n    });\n\n    _this.state = {\n      topic: 'unselected',\n      message: '',\n      loading: false,\n      showMessage: false,\n      userDetails: _this.props.userDetails,\n      result: null,\n      messageObj: null,\n      errorMessage: ''\n    };\n    return _this;\n  }\n\n  _createClass(ContactUs, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var results = [];\n\n      if (this.state.result) {\n        (function () {\n          var keys = Object.keys(_this2.state.result).sort(function (a, b) {\n            return b - a;\n          });\n\n          var _loop = function _loop(k) {\n            results.push( /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: styles.previousMessageSum,\n                onClick: function onClick() {\n                  _this2.setState({\n                    messageObj: _this2.state.result[keys[k]],\n                    showMessage: true\n                  });\n                },\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%'\n                  },\n                  children: _this2.state.result[keys[k]].subject\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.previousMessageDate,\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    style: {\n                      fontFamily: 'Gilroy-Semibold',\n                      fontSize: '75%',\n                      marginRight: '-10px',\n                      paddingLeft: '10px'\n                    },\n                    children: dateformat(_this2.state.result[keys[k]].date)\n                  }), /*#__PURE__*/_jsx(BsDot, {\n                    size: '55px',\n                    color: _this2.state.result[keys[k]].status == 'PROCESSED' ? _this2.props.type == 'Driver' ? colors.BLUE : colors.GREEN : colors.RED\n                  })]\n                })]\n              }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n                className: styles.sharedLine,\n                style: {\n                  marginTop: '5px'\n                }\n              })]\n            }));\n          };\n\n          for (var k = 0; k < keys.length; k++) {\n            _loop(k);\n          }\n        })();\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles.cont,\n        children: this.state.showMessage ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK,\n                marginBottom: '30px'\n              },\n              children: this.state.messageObj.subject\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.previousMessageC,\n              style: {\n                alignItems: 'flex-end'\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.previousMessageCol,\n                style: {\n                  backgroundColor: this.props.type == 'Driver' ? colors.BLUE : colors.GREEN\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%',\n                    color: colors.WHITE,\n                    lineHeight: '150%',\n                    paddingRight: '10px',\n                    paddingLeft: '10px'\n                  },\n                  children: this.state.messageObj.body\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%'\n                },\n                children: dateformat(this.state.messageObj.date)\n              })]\n            }), this.state.messageObj.status == 'PROCESSED' ? /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.previousMessageC,\n              style: {\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.previousMessageCol,\n                style: {\n                  backgroundColor: 'rgba(145, 134, 134, 0.5)'\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%',\n                    color: colors.BLACK,\n                    lineHeight: '150%',\n                    paddingRight: '10px',\n                    paddingLeft: '10px'\n                  },\n                  children: this.state.messageObj.response\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%'\n                },\n                children: dateformat(this.state.messageObj.responseDate)\n              })]\n            }) : /*#__PURE__*/_jsx(_Fragment, {})]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.contactUsLC,\n            style: {\n              marginTop: '15px',\n              marginBottom: '100px'\n            },\n            children: [/*#__PURE__*/_jsx(\"a\", {\n              className: styles.button1,\n              id: styles.sendMessageContactUS,\n              style: this.props.type == 'Driver' ? {\n                backgroundColor: colors.BLUE\n              } : {},\n              onClick: function onClick() {\n                _this2.setState({\n                  showMessage: false\n                });\n              },\n              children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n                type: \"TailSpin\",\n                color: colors.WHITE,\n                height: '20px',\n                width: '20px'\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Back\"\n              })\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.contactUsLasttext,\n              children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? \"Driver\" : '', \" app\"]\n            })]\n          })]\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Contact us form\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.GREY\n              },\n              children: \"Feel free to contact us about issues with your ride or about feeback on how we can better our services.\"\n            }), /*#__PURE__*/_jsxs(\"select\", {\n              value: this.state.topic,\n              className: styles.selectTopic,\n              onChange: function onChange(v) {\n                _this2.setState({\n                  topic: v.target.value\n                });\n              },\n              style: this.state.topic === 'unselected' ? {\n                color: 'rgba(112, 112, 112, 0.7)'\n              } : {},\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"unselected\",\n                children: \"(--Select a topic--)\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Give feedback about our services\",\n                children: \"Give feedback about our services\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Missing item\",\n                children: \"Missing item\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Change your name\",\n                children: \"Change your name\"\n              }), this.props.type == 'Driver' ? /*#__PURE__*/_jsx(\"option\", {\n                value: \"Report a rider\",\n                children: \"Report a rider\"\n              }) : /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  value: \"Report a driver\",\n                  children: \"Report a driver\"\n                }), /*#__PURE__*/_jsx(\"option\", {\n                  value: \"Work with us\",\n                  children: \"Work with us\"\n                })]\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Report a bug\",\n                children: \"Report a rider\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Other\",\n                children: \"Other\"\n              })]\n            }), /*#__PURE__*/_jsx(\"textarea\", {\n              type: \"text\",\n              placeholder: \"Enter your message here\",\n              className: styles.contactUsContent,\n              value: this.state.message,\n              onChange: function onChange(event) {\n                _this2.setState({\n                  message: event.target.value\n                });\n              }\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.em,\n              style: {\n                textAlign: 'initial'\n              },\n              children: this.state.errorMessage\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.contactUsLC,\n            style: {\n              marginTop: '15px',\n              marginBottom: this.state.result ? '0px' : '150px'\n            },\n            children: [/*#__PURE__*/_jsx(\"a\", {\n              className: styles.button1,\n              id: styles.sendMessageContactUS,\n              style: this.props.type == 'Driver' ? {\n                backgroundColor: colors.BLUE\n              } : {},\n              onClick: function onClick() {\n                if (!_this2.state.loading) sendFeedback.call(_this2);\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Send Message\"\n              })\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.contactUsLasttext,\n              children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? \"Driver\" : '', \" app\"]\n            })]\n          }), this.state.result ? /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px',\n              marginBottom: '150px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Previous messages\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.GREY,\n                marginBottom: '10px'\n              },\n              children: \"Here are some of your previous messages. Messages would be answered within 2-4 business days\"\n            }), results]\n          }) : /*#__PURE__*/_jsx(_Fragment, {})]\n        })\n      });\n    }\n  }]);\n\n  return ContactUs;\n}(React.Component);\n\nexport { ContactUs as default };\n;","map":null,"metadata":{},"sourceType":"module"}