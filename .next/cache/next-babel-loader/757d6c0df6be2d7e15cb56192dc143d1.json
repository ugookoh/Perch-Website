{"ast":null,"code":"import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default class AdminDashBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedLinks: true,\n      userDetails: this.props.userDetails,\n      numberOfDriverApplications: 0,\n      unansweredMessages: 0,\n      unansweredDriverMessages: 0,\n      numberOVehicleAdditionRequest: 0,\n      numberOfCancelledTrips: 0,\n      allTimeAnalytics: {},\n      weeklyAnalytics: {}\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref(`analytics/numberOfUserFeedbackMessages`).on('value', snapshot => {\n      this.setState({\n        unansweredMessages: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfCancelledTrips`).on('value', snapshot => {\n      this.setState({\n        numberOfCancelledTrips: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfDriverFeedbackMessages`).on('value', snapshot => {\n      this.setState({\n        unansweredDriverMessages: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOVehicleAdditionRequest`).on('value', snapshot => {\n      this.setState({\n        unansweredDriverMessages: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfDriverApplications`).on('value', snapshot => {\n      this.setState({\n        numberOfDriverApplications: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/allTimeAnalytics/admin`).once('value', snapshot => {\n      this.setState({\n        allTimeAnalytics: snapshot.val()\n      });\n    });\n    firebase.database().ref(`currentWeek/value`).once('value', week => {\n      firebase.database().ref(`analytics/weeklyAnalytics/${week.val()}/admin`).once('value', snapshot => {\n        this.setState({\n          weeklyAnalytics: snapshot.val()\n        });\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [/*#__PURE__*/_jsx(AdminDashSummary, {\n        title: 'WH',\n        data: this.state.weeklyAnalytics\n      }), /*#__PURE__*/_jsx(AdminDashSummary, {\n        title: 'OH',\n        data: this.state.allTimeAnalytics\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"New driver applications\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOfDriverApplications, \" new driver applications left\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"New vehicle applications\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOVehicleAdditionRequest, \" new vehicle applications left\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Unanswered messages\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.unansweredMessages, \" unaswered messages\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Unanswered driver messages\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.unansweredDriverMessages, \" unaswered driver messages\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Cancelled trips\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOfCancelledTrips, \" unresolved cancelled trips\"]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px',\n          marginBottom: '150px'\n        }\n      })]\n    });\n  }\n\n}\n;\n\nconst AdminDashSummary = ({\n  title\n}) => {\n  var _data, _data2, _data3, _data3$cancelledTrips, _data4, _data4$cancelledTrips, _data5;\n\n  const rendervalid = x => {\n    if (x) return x;else return 0;\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    style: {\n      backgroundColor: colors.WHITE,\n      marginTop: '20px'\n    },\n    children: [title == 'OH' ? /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.enterKilometerDiv,\n      children: [/*#__PURE__*/_jsx(\"p\", {\n        className: styles.title,\n        style: {\n          color: colors.BLACK,\n          width: 'initial'\n        },\n        children: \"Overall history\"\n      }), /*#__PURE__*/_jsxs(\"p\", {\n        className: styles.driverDashboard_BOXTITLE,\n        style: {\n          margin: '0px',\n          textAlign: 'center',\n          marginLeft: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"span\", {\n          id: styles.driverDashboard_HALFDATE,\n          children: `Joined 09/2019`\n        }), /*#__PURE__*/_jsx(\"span\", {\n          id: styles.driverDashboard_FULLDATE,\n          children: `Joined September 2019`\n        })]\n      })]\n    }) : /*#__PURE__*/_jsx(\"p\", {\n      className: styles.title,\n      style: {\n        color: colors.BLACK\n      },\n      children: \"Weekly History\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.driverDashboardCont,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.driverDashboard_TE,\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            alignItems: 'flex-start',\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Total number of users\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.GREEN\n            },\n            children: rendervalid((_data = data) === null || _data === void 0 ? void 0 : _data.numberOfUsers)\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.sharedLine,\n        style: {\n          width: '95%',\n          backgroundColor: 'rgba(112, 112, 112, 0.19)'\n        }\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboard_TE,\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Completed trips\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid((_data2 = data) === null || _data2 === void 0 ? void 0 : _data2.completedTrips)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Unread feedback\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.RED\n            },\n            children: \"328\"\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Rider cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid((_data3 = data) === null || _data3 === void 0 ? void 0 : (_data3$cancelledTrips = _data3.cancelledTrips) === null || _data3$cancelledTrips === void 0 ? void 0 : _data3$cancelledTrips.rider)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Driver cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.RED\n            },\n            children: rendervalid((_data4 = data) === null || _data4 === void 0 ? void 0 : (_data4$cancelledTrips = _data4.cancelledTrips) === null || _data4$cancelledTrips === void 0 ? void 0 : _data4$cancelledTrips.driver)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginRight: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Number of deleted accounts\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid((_data5 = data) === null || _data5 === void 0 ? void 0 : _data5.numberOfDeletedUsers)\n          })]\n        })]\n      })]\n    })]\n  });\n};","map":{"version":3,"sources":["/Users/ugo/Documents/Perch_Projects/Perch-Website/functions/panels/adminPanels/adminDashBoard.js"],"names":["firebase","React","colors","styles","AdminDashBoard","Component","constructor","props","state","sharedLinks","userDetails","numberOfDriverApplications","unansweredMessages","unansweredDriverMessages","numberOVehicleAdditionRequest","numberOfCancelledTrips","allTimeAnalytics","weeklyAnalytics","componentDidMount","database","ref","on","snapshot","setState","val","once","week","render","cont","container","backgroundColor","GREEN","marginTop","title","color","WHITE","text","marginBottom","AdminDashSummary","rendervalid","x","enterKilometerDiv","BLACK","width","driverDashboard_BOXTITLE","margin","textAlign","marginLeft","driverDashboard_HALFDATE","driverDashboard_FULLDATE","driverDashboardCont","driverDashboard_TE","driverDashboard_BOX","alignItems","driverDashboard_BOXTEXT","data","numberOfUsers","sharedLine","completedTrips","RED","cancelledTrips","rider","driver","marginRight","numberOfDeletedUsers"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\n\nexport default class AdminDashBoard extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            sharedLinks: true,\n            userDetails: this.props.userDetails,\n            numberOfDriverApplications: 0,\n            unansweredMessages: 0,\n            unansweredDriverMessages: 0,\n            numberOVehicleAdditionRequest: 0,\n            numberOfCancelledTrips: 0,\n            allTimeAnalytics: {},\n            weeklyAnalytics: {},\n        };\n    };\n    componentDidMount() {\n        firebase.database().ref(`analytics/numberOfUserFeedbackMessages`).on('value', snapshot => {\n            this.setState({ unansweredMessages: snapshot.val() })\n        });\n        firebase.database().ref(`analytics/numberOfCancelledTrips`).on('value', snapshot => {\n            this.setState({ numberOfCancelledTrips: snapshot.val() })\n        });\n        firebase.database().ref(`analytics/numberOfDriverFeedbackMessages`).on('value', snapshot => {\n            this.setState({ unansweredDriverMessages: snapshot.val() })\n        });\n        firebase.database().ref(`analytics/numberOVehicleAdditionRequest`).on('value', snapshot => {\n            this.setState({ unansweredDriverMessages: snapshot.val() })\n        });\n        firebase.database().ref(`analytics/numberOfDriverApplications`).on('value', snapshot => {\n            this.setState({ numberOfDriverApplications: snapshot.val() })\n        });\n\n        firebase.database().ref(`analytics/allTimeAnalytics/admin`).once('value', snapshot => {\n            this.setState({ allTimeAnalytics: snapshot.val() });\n        });\n        firebase.database().ref(`currentWeek/value`).once('value', week => {\n            firebase.database().ref(`analytics/weeklyAnalytics/${week.val()}/admin`).once('value', snapshot => {\n                this.setState({ weeklyAnalytics: snapshot.val() })\n            });\n        });\n    };\n\n    render() {\n        return (\n            <div className={styles.cont}>\n                <AdminDashSummary\n                    title={'WH'}\n                    data={this.state.weeklyAnalytics}\n                />\n                <AdminDashSummary\n                    title={'OH'}\n                    data={this.state.allTimeAnalytics}\n                />\n                <div className={styles.container} style={{ backgroundColor: colors.GREEN, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.WHITE }}>New driver applications</p>\n                    <p className={styles.text} style={{ color: colors.WHITE }}>\n                        You have {this.state.numberOfDriverApplications} new driver applications left\n                    </p>\n                </div>\n\n                <div className={styles.container} style={{ backgroundColor: colors.GREEN, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.WHITE }}>New vehicle applications</p>\n                    <p className={styles.text} style={{ color: colors.WHITE }}>\n                        You have {this.state.numberOVehicleAdditionRequest} new vehicle applications left\n                    </p>\n                </div>\n\n                <div className={styles.container} style={{ backgroundColor: colors.GREEN, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.WHITE }}>Unanswered messages</p>\n                    <p className={styles.text} style={{ color: colors.WHITE }}>\n                        You have {this.state.unansweredMessages} unaswered messages\n                    </p>\n                </div>\n\n                <div className={styles.container} style={{ backgroundColor: colors.GREEN, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.WHITE }}>Unanswered driver messages</p>\n                    <p className={styles.text} style={{ color: colors.WHITE }}>\n                        You have {this.state.unansweredDriverMessages} unaswered driver messages\n                    </p>\n                </div>\n\n                <div className={styles.container} style={{ backgroundColor: colors.GREEN, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.WHITE }}>Cancelled trips</p>\n                    <p className={styles.text} style={{ color: colors.WHITE }}>\n                        You have {this.state.numberOfCancelledTrips} unresolved cancelled trips\n                    </p>\n                </div>\n                <div style={{ backgroundColor: colors.WHITE, marginTop: '20px', marginBottom: '150px' }}>\n                </div>\n            </div>\n        )\n\n    }\n};\n\nconst AdminDashSummary = ({ title }) => {\n    const rendervalid = (x) => {\n        if (x) return x;\n        else return 0;\n    }\n    return (\n        <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n            {title == 'OH' ?\n                <div className={styles.enterKilometerDiv}>\n                    <p className={styles.title} style={{ color: colors.BLACK, width: 'initial', }}>Overall history</p>\n                    <p className={styles.driverDashboard_BOXTITLE} style={{ margin: '0px', textAlign: 'center', marginLeft: '20px' }}><span id={styles.driverDashboard_HALFDATE}>{`Joined 09/2019`}</span><span id={styles.driverDashboard_FULLDATE}>{`Joined September 2019`}</span></p>\n                </div> :\n                <p className={styles.title} style={{ color: colors.BLACK }}>Weekly History</p>}\n\n            <div className={styles.driverDashboardCont}>\n                <div className={styles.driverDashboard_TE}>\n                    <div className={styles.driverDashboard_BOX} style={{ alignItems: 'flex-start', marginLeft: '0px' }}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Total number of users</p>\n                        <p className={styles.driverDashboard_BOXTEXT} style={{ color: colors.GREEN }}>{rendervalid(data?.numberOfUsers)}</p>\n                    </div>\n                </div>\n                <div className={styles.sharedLine} style={{ width: '95%', backgroundColor: 'rgba(112, 112, 112, 0.19)' }}></div>\n                <div className={styles.driverDashboard_TE} style={{ marginBottom: '15px' }}>\n\n                    <div className={styles.driverDashboard_BOX} style={{ marginLeft: '0px' }}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Completed trips</p>\n                        <p className={styles.driverDashboard_BOXTEXT} >{rendervalid(data?.completedTrips)}</p>\n                    </div>\n\n                    <div className={styles.driverDashboard_BOX}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Unread feedback</p>\n                        <p className={styles.driverDashboard_BOXTEXT} style={{ color: colors.RED }}>328</p>\n                    </div>\n\n                    <div className={styles.driverDashboard_BOX}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Rider cancellations</p>\n                        <p className={styles.driverDashboard_BOXTEXT} >{rendervalid(data?.cancelledTrips?.rider)}</p>\n                    </div>\n\n                    <div className={styles.driverDashboard_BOX}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Driver cancellations</p>\n                        <p className={styles.driverDashboard_BOXTEXT} style={{ color: colors.RED }}>{rendervalid(data?.cancelledTrips?.driver)}</p>\n                    </div>\n\n                    <div className={styles.driverDashboard_BOX} style={{ marginRight: '0px' }}>\n                        <p className={styles.driverDashboard_BOXTITLE}>Number of deleted accounts</p>\n                        <p className={styles.driverDashboard_BOXTEXT} style={{}}>{rendervalid(data?.numberOfDeletedUsers)}</p>\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n    );\n};"]},"metadata":{},"sourceType":"module"}