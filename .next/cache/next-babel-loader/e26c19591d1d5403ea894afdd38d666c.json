{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineCheck } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { validateVehicle, dateOfQuery, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar VehicleApplications = /*#__PURE__*/function (_React$Component) {\n  _inherits(VehicleApplications, _React$Component);\n\n  var _super = _createSuper(VehicleApplications);\n\n  function VehicleApplications(props) {\n    var _this;\n\n    _classCallCheck(this, VehicleApplications);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        firebase.database().ref(\"vehicleAdditionRequest\").once('value', function (snapshot) {\n          _this.setState({\n            result: snapshot.val() ? snapshot.val() : {}\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadDocument\", function (userID, documentStorageID) {\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleRegistration\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docRegistrationURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleInsurance\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docInsuranceURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleInspection\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docInspectionURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleImage\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docVehicleImage: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n    });\n\n    _this.state = {\n      showDocs: false,\n      result: {},\n      docList: [\"Vehicle insurance\", \"Vehicle registration\", \"Vehicle inspection\"],\n      selected: {},\n      docRegistrationURL: '',\n      docInsuranceURL: '',\n      docInspectionURL: '',\n      docVehicleImage: '',\n      inspectionVerified: false,\n      registrationVerified: false,\n      insuranceVerified: false,\n      urlToShow: null\n    };\n    return _this;\n  }\n\n  _createClass(VehicleApplications, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var requirements = [];\n\n      var _loop = function _loop(i) {\n        var urlToShow = '';\n        if (_this2.state.docList[i] == 'Vehicle insurance') urlToShow = _this2.state.docInsuranceURL;else if (_this2.state.docList[i] == 'Vehicle registration') urlToShow = _this2.state.docRegistrationURL;else if (_this2.state.docList[i] == 'Vehicle inspection') urlToShow = _this2.state.docInspectionURL;\n        var isVerified = false;\n        if (_this2.state.docList[i] == 'Vehicle insurance') isVerified = _this2.state.insuranceVerified;else if (_this2.state.docList[i] == 'Vehicle registration') isVerified = _this2.state.registrationVerified;else if (_this2.state.docList[i] == 'Vehicle inspection') isVerified = _this2.state.inspectionVerified;\n        requirements.push( /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverFAQ_PICDESC,\n          id: styles.driverROUNDSUPPORT,\n          children: [/*#__PURE__*/_jsx(\"a\", {\n            href: urlToShow,\n            target: '_blank',\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: '#000000',\n                width: 'initial',\n                margin: '0px',\n                marginLeft: '10px'\n              },\n              children: _this2.state.docList[i]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.driver_APP_RADIO,\n            style: {\n              backgroundColor: colors.GREEN,\n              opacity: isVerified ? 1 : 0.5\n            },\n            onClick: function onClick() {\n              if (_this2.state.docList[i] == 'Vehicle insurance') _this2.setState({\n                insuranceVerified: true\n              });else if (_this2.state.docList[i] == 'Vehicle registration') _this2.setState({\n                registrationVerified: true\n              });else if (_this2.state.docList[i] == 'Vehicle inspection') _this2.setState({\n                inspectionVerified: true\n              });\n            },\n            children: isVerified ? /*#__PURE__*/_jsx(AiOutlineCheck, {\n              color: colors.WHITE,\n              size: '15px'\n            }) : /*#__PURE__*/_jsx(_Fragment, {})\n          })]\n        }));\n      };\n\n      for (var i = 0; i < this.state.docList.length; i++) {\n        _loop(i);\n      }\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var results = [];\n      var keys = Object.keys(this.state.result).sort();\n\n      var _loop2 = function _loop2(k) {\n        var _this2$state$result$k = _this2.state.result[keys[k]],\n            year = _this2$state$result$k.year,\n            make = _this2$state$result$k.make,\n            model = _this2$state$result$k.model,\n            timestamp = _this2$state$result$k.timestamp,\n            userID = _this2$state$result$k.userID,\n            documentStorageID = _this2$state$result$k.documentStorageID;\n        var carName = \"\".concat(year, \" \").concat(make, \" \").concat(model);\n        results.push( /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.previousMessageSum,\n            onClick: function onClick() {\n              _this2.loadDocument(userID, documentStorageID);\n\n              _this2.setState({\n                showDocs: true,\n                selected: _objectSpread({\n                  carName: carName\n                }, _this2.state.result[keys[k]])\n              });\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                fontSize: '95%'\n              },\n              children: carName\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.previousMessageDate,\n              children: /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%',\n                  marginRight: '-10px',\n                  paddingLeft: '10px'\n                },\n                children: dateOfQuery(timestamp)\n              })\n            })]\n          }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n            className: styles.sharedLine,\n            style: {\n              marginTop: '5px'\n            }\n          })]\n        }));\n      };\n\n      for (var k = 0; k < keys.length; k++) {\n        _loop2(k);\n      }\n\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.cont,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK,\n              marginBottom: '20px'\n            },\n            children: this.state.showDocs ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [this.state.selected.carName, \" - \", /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: colors.GREEN\n                },\n                children: this.state.selected.plateNumber\n              })]\n            }) : 'Vehicle Applications'\n          }), this.state.showDocs ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [requirements, /*#__PURE__*/_jsx(\"img\", {\n              src: this.state.docVehicleImage,\n              className: styles.driverVehicleIMAGE\n            })]\n          }) : results]\n        }), this.state.showDocs ? /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            marginTop: '20px',\n            marginBottom: '150px',\n            marginLeft: '2.5%',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: RED\n            },\n            id: styles.buttonBottom,\n            onClick: function onClick() {\n              _this2.setState({\n                showDocs: false\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Cancel\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.GREEN\n            },\n            id: styles.buttonBottom,\n            onClick: function onClick() {\n              if (_this2.state.inspectionVerified && _this2.state.insuranceVerified && _this2.state.registrationVerified) {\n                var _this2$state$selected = _this2.state.selected,\n                    userID = _this2$state$selected.userID,\n                    timestamp = _this2$state$selected.timestamp,\n                    dateFormat = _this2$state$selected.dateFormat;\n                validateVehicle.call(_this2, userID, timestamp, dateFormat);\n\n                _this2.setState({\n                  showDocs: false\n                });\n              } else alert('Please verify all the documents by ticking the green button next to it');\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Approve Vehicle\"\n            })\n          })]\n        }) : /*#__PURE__*/_jsx(_Fragment, {})]\n      });\n    }\n  }]);\n\n  return VehicleApplications;\n}(React.Component);\n\nexport { VehicleApplications as default };\n;","map":{"version":3,"sources":["/Users/edokoh9/Documents/PerchWebsite/perch/functions/panels/adminPanels/vehicleApplications.js"],"names":["firebase","React","AiOutlineCheck","validateVehicle","dateOfQuery","colors","styles","VehicleApplications","props","state","userDetails","database","ref","once","snapshot","setState","result","val","userID","documentStorageID","storage","getDownloadURL","then","docRegistrationURL","error","console","log","message","docInsuranceURL","docInspectionURL","docVehicleImage","showDocs","docList","selected","inspectionVerified","registrationVerified","insuranceVerified","urlToShow","loadResult","requirements","i","isVerified","push","driverFAQ_PICDESC","driverROUNDSUPPORT","text","color","width","margin","marginLeft","driver_APP_RADIO","backgroundColor","GREEN","opacity","WHITE","length","results","keys","Object","sort","k","year","make","model","timestamp","carName","previousMessageSum","loadDocument","fontSize","previousMessageDate","fontFamily","marginRight","paddingLeft","sharedLine","marginTop","cont","container","title","BLACK","marginBottom","plateNumber","driverVehicleIMAGE","enterKilometerDiv","button2","RED","buttonBottom","buttonText1","dateFormat","call","alert","Component"],"mappings":";;;;;;;;;;;;;;;;AAAA,OAAOA,QAAP,MAAqB,UAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,4CAAP;AACA,SAASC,cAAT,QAA+B,gBAA/B;AACA,OAAO,+DAAP;AACA,SACIC,eADJ,EAEIC,WAFJ,EAGIC,MAHJ,QAIO,iBAJP;AAKA,OAAOC,MAAP,MAAmB,4BAAnB;;;;;IAIqBC,mB;;;;;AACjB,+BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,8BAAMA,KAAN;;AADe,iEA4BN,YAAM;AACf,UAAI,MAAKC,KAAL,CAAWC,WAAf,EAA4B;AACxBV,QAAAA,QAAQ,CAACW,QAAT,GAAoBC,GAApB,2BAAkDC,IAAlD,CAAuD,OAAvD,EAAgE,UAAAC,QAAQ,EAAI;AACxE,gBAAKC,QAAL,CAAc;AAAEC,YAAAA,MAAM,EAAEF,QAAQ,CAACG,GAAT,KAAiBH,QAAQ,CAACG,GAAT,EAAjB,GAAkC;AAA5C,WAAd;AACH,SAFD;AAGH;AACJ,KAlCkB;;AAAA,mEAmCJ,UAACC,MAAD,EAASC,iBAAT,EAA+B;AAE1CnB,MAAAA,QAAQ,CAACoB,OAAT,GAAmBR,GAAnB,6BAA4CM,MAA5C,cAAsDC,iBAAtD,2BAA+FE,cAA/F,GACKC,IADL,CACU,UAAAN,MAAM,EAAI;AACZ,cAAKD,QAAL,CAAc;AAAEQ,UAAAA,kBAAkB,EAAEP;AAAtB,SAAd;AACH,OAHL,WAIW,UAAAQ,KAAK,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AAA6B,OAJnD;AAKA3B,MAAAA,QAAQ,CAACoB,OAAT,GAAmBR,GAAnB,6BAA4CM,MAA5C,cAAsDC,iBAAtD,wBAA4FE,cAA5F,GACKC,IADL,CACU,UAAAN,MAAM,EAAI;AACZ,cAAKD,QAAL,CAAc;AAAEa,UAAAA,eAAe,EAAEZ;AAAnB,SAAd;AACH,OAHL,WAIW,UAAAQ,KAAK,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AAA4B,OAJlD;AAKA3B,MAAAA,QAAQ,CAACoB,OAAT,GAAmBR,GAAnB,6BAA4CM,MAA5C,cAAsDC,iBAAtD,yBAA6FE,cAA7F,GACKC,IADL,CACU,UAAAN,MAAM,EAAI;AACZ,cAAKD,QAAL,CAAc;AAAEc,UAAAA,gBAAgB,EAAEb;AAApB,SAAd;AACH,OAHL,WAGa,UAAAQ,KAAK,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AAA4B,OAHpD;AAIA3B,MAAAA,QAAQ,CAACoB,OAAT,GAAmBR,GAAnB,6BAA4CM,MAA5C,cAAsDC,iBAAtD,oBAAwFE,cAAxF,GACKC,IADL,CACU,UAAAN,MAAM,EAAI;AACZ,cAAKD,QAAL,CAAc;AAAEe,UAAAA,eAAe,EAAEd;AAAnB,SAAd;AACH,OAHL,WAGa,UAAAQ,KAAK,EAAI;AAAEC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AAA4B,OAHpD;AAIH,KAvDkB;;AAGf,UAAKlB,KAAL,GAAa;AACTsB,MAAAA,QAAQ,EAAE,KADD;AAETf,MAAAA,MAAM,EAAE,EAFC;AAGTgB,MAAAA,OAAO,EAAE,CACL,mBADK,EAEL,sBAFK,EAGL,oBAHK,CAHA;AAQTC,MAAAA,QAAQ,EAAE,EARD;AAUTV,MAAAA,kBAAkB,EAAE,EAVX;AAWTK,MAAAA,eAAe,EAAE,EAXR;AAYTC,MAAAA,gBAAgB,EAAE,EAZT;AAaTC,MAAAA,eAAe,EAAE,EAbR;AAeTI,MAAAA,kBAAkB,EAAE,KAfX;AAgBTC,MAAAA,oBAAoB,EAAE,KAhBb;AAiBTC,MAAAA,iBAAiB,EAAE,KAjBV;AAmBTC,MAAAA,SAAS,EAAE;AAnBF,KAAb;AAHe;AAwBlB;;;;WACD,6BAAoB;AAChB,WAAKC,UAAL;AACH;;;WA6BD,kBAAS;AAAA;;AACL,UAAIC,YAAY,GAAG,EAAnB;;AADK,iCAEIC,CAFJ;AAGD,YAAIH,SAAS,GAAG,EAAhB;AACA,YAAI,MAAI,CAAC5B,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,mBAA7B,EACIH,SAAS,GAAG,MAAI,CAAC5B,KAAL,CAAWmB,eAAvB,CADJ,KAEK,IAAI,MAAI,CAACnB,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,sBAA7B,EACDH,SAAS,GAAG,MAAI,CAAC5B,KAAL,CAAWc,kBAAvB,CADC,KAEA,IAAI,MAAI,CAACd,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,oBAA7B,EACDH,SAAS,GAAG,MAAI,CAAC5B,KAAL,CAAWoB,gBAAvB;AAEJ,YAAIY,UAAU,GAAG,KAAjB;AACA,YAAI,MAAI,CAAChC,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,mBAA7B,EACIC,UAAU,GAAG,MAAI,CAAChC,KAAL,CAAW2B,iBAAxB,CADJ,KAEK,IAAI,MAAI,CAAC3B,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,sBAA7B,EACDC,UAAU,GAAG,MAAI,CAAChC,KAAL,CAAW0B,oBAAxB,CADC,KAEA,IAAI,MAAI,CAAC1B,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,oBAA7B,EACDC,UAAU,GAAG,MAAI,CAAChC,KAAL,CAAWyB,kBAAxB;AAEJK,QAAAA,YAAY,CAACG,IAAb,eAEI;AAAK,UAAA,SAAS,EAAEpC,MAAM,CAACqC,iBAAvB;AACI,UAAA,EAAE,EAAErC,MAAM,CAACsC,kBADf;AAAA,kCAGI;AAAG,YAAA,IAAI,EAAEP,SAAT;AACI,YAAA,MAAM,EAAE,QADZ;AAAA,mCAEI;AAAG,cAAA,SAAS,EAAE/B,MAAM,CAACuC,IAArB;AAA2B,cAAA,KAAK,EAAE;AAAEC,gBAAAA,KAAK,EAAE,SAAT;AAAoBC,gBAAAA,KAAK,EAAE,SAA3B;AAAsCC,gBAAAA,MAAM,EAAE,KAA9C;AAAqDC,gBAAAA,UAAU,EAAE;AAAjE,eAAlC;AAAA,wBAA8G,MAAI,CAACxC,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB;AAA9G;AAFJ,YAHJ,eAOI;AAAK,YAAA,SAAS,EAAElC,MAAM,CAAC4C,gBAAvB;AAAyC,YAAA,KAAK,EAAE;AAAEC,cAAAA,eAAe,EAAE9C,MAAM,CAAC+C,KAA1B;AAAiCC,cAAAA,OAAO,EAAEZ,UAAU,GAAG,CAAH,GAAO;AAA3D,aAAhD;AACI,YAAA,OAAO,EAAE,mBAAM;AACX,kBAAI,MAAI,CAAChC,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,mBAA7B,EACI,MAAI,CAACzB,QAAL,CAAc;AAAEqB,gBAAAA,iBAAiB,EAAE;AAArB,eAAd,EADJ,KAEK,IAAI,MAAI,CAAC3B,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,sBAA7B,EACD,MAAI,CAACzB,QAAL,CAAc;AAAEoB,gBAAAA,oBAAoB,EAAE;AAAxB,eAAd,EADC,KAEA,IAAI,MAAI,CAAC1B,KAAL,CAAWuB,OAAX,CAAmBQ,CAAnB,KAAyB,oBAA7B,EACD,MAAI,CAACzB,QAAL,CAAc;AAAEmB,gBAAAA,kBAAkB,EAAE;AAAtB,eAAd;AACP,aARL;AAAA,sBAUKO,UAAU,gBACP,KAAC,cAAD;AAAgB,cAAA,KAAK,EAAEpC,MAAM,CAACiD,KAA9B;AAAqC,cAAA,IAAI,EAAE;AAA3C,cADO,gBAEP;AAZR,YAPJ;AAAA,UAFJ;AAnBC;;AAEL,WAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK/B,KAAL,CAAWuB,OAAX,CAAmBuB,MAAvC,EAA+Cf,CAAC,EAAhD,EAAoD;AAAA,cAA3CA,CAA2C;AA2CnD;;AAED,UAAI,CAAC,KAAK/B,KAAL,CAAWC,WAAZ,IAA2B,KAAKF,KAAL,CAAWE,WAA1C,EACI,KAAKK,QAAL,CAAc;AAAEL,QAAAA,WAAW,EAAE,KAAKF,KAAL,CAAWE;AAA1B,OAAd,EAAuD,YAAM;AAAE,QAAA,MAAI,CAAC4B,UAAL;AAAoB,OAAnF;AAEJ,UAAIkB,OAAO,GAAG,EAAd;AACA,UAAMC,IAAI,GAAGC,MAAM,CAACD,IAAP,CAAY,KAAKhD,KAAL,CAAWO,MAAvB,EAA+B2C,IAA/B,EAAb;;AAnDK,mCAoDIC,CApDJ;AAqDD,oCAAoE,MAAI,CAACnD,KAAL,CAAWO,MAAX,CAAkByC,IAAI,CAACG,CAAD,CAAtB,CAApE;AAAA,YAAQC,IAAR,yBAAQA,IAAR;AAAA,YAAcC,IAAd,yBAAcA,IAAd;AAAA,YAAoBC,KAApB,yBAAoBA,KAApB;AAAA,YAA2BC,SAA3B,yBAA2BA,SAA3B;AAAA,YAAsC9C,MAAtC,yBAAsCA,MAAtC;AAAA,YAA8CC,iBAA9C,yBAA8CA,iBAA9C;AACA,YAAM8C,OAAO,aAAMJ,IAAN,cAAcC,IAAd,cAAsBC,KAAtB,CAAb;AACAP,QAAAA,OAAO,CAACd,IAAR,eACI;AAAA,kCACI;AAAK,YAAA,SAAS,EAAEpC,MAAM,CAAC4D,kBAAvB;AACI,YAAA,OAAO,EAAE,mBAAM;AACX,cAAA,MAAI,CAACC,YAAL,CAAkBjD,MAAlB,EAA0BC,iBAA1B;;AACA,cAAA,MAAI,CAACJ,QAAL,CAAc;AACVgB,gBAAAA,QAAQ,EAAE,IADA;AAEVE,gBAAAA,QAAQ;AACJgC,kBAAAA,OAAO,EAAEA;AADL,mBAED,MAAI,CAACxD,KAAL,CAAWO,MAAX,CAAkByC,IAAI,CAACG,CAAD,CAAtB,CAFC;AAFE,eAAd;AAOH,aAVL;AAAA,oCAWI;AAAG,cAAA,KAAK,EAAE;AAAEQ,gBAAAA,QAAQ,EAAE;AAAZ,eAAV;AAAA,wBAAgCH;AAAhC,cAXJ,eAYI;AAAK,cAAA,SAAS,EAAE3D,MAAM,CAAC+D,mBAAvB;AAAA,qCACI;AAAG,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,UAAU,EAAE,iBAAd;AAAiCF,kBAAAA,QAAQ,EAAE,KAA3C;AAAkDG,kBAAAA,WAAW,EAAE,OAA/D;AAAwEC,kBAAAA,WAAW,EAAE;AAArF,iBAAV;AAAA,0BACKpE,WAAW,CAAC4D,SAAD;AADhB;AADJ,cAZJ;AAAA,YADJ,EAmBKJ,CAAC,IAAIH,IAAI,CAACF,MAAL,GAAc,CAAnB,gBAAuB,mBAAvB,gBAA+B;AAAK,YAAA,SAAS,EAAEjD,MAAM,CAACmE,UAAvB;AAAmC,YAAA,KAAK,EAAE;AAAEC,cAAAA,SAAS,EAAE;AAAb;AAA1C,YAnBpC;AAAA,UADJ;AAvDC;;AAoDL,WAAK,IAAId,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAAI,CAACF,MAAzB,EAAiCK,CAAC,EAAlC,EAAsC;AAAA,eAA7BA,CAA6B;AA0BrC;;AACD,0BACI;AAAK,QAAA,SAAS,EAAEtD,MAAM,CAACqE,IAAvB;AAAA,gCACI;AAAK,UAAA,SAAS,EAAErE,MAAM,CAACsE,SAAvB;AAAkC,UAAA,KAAK,EAAE;AAAEzB,YAAAA,eAAe,EAAE9C,MAAM,CAACiD,KAA1B;AAAiCoB,YAAAA,SAAS,EAAE;AAA5C,WAAzC;AAAA,kCACI;AAAG,YAAA,SAAS,EAAEpE,MAAM,CAACuE,KAArB;AAA4B,YAAA,KAAK,EAAE;AAAE/B,cAAAA,KAAK,EAAEzC,MAAM,CAACyE,KAAhB;AAAuBC,cAAAA,YAAY,EAAE;AAArC,aAAnC;AAAA,sBAAmF,KAAKtE,KAAL,CAAWsB,QAAX,gBAAsB;AAAA,yBAAG,KAAKtB,KAAL,CAAWwB,QAAX,CAAoBgC,OAAvB,sBAAkC;AAAM,gBAAA,KAAK,EAAE;AAAEnB,kBAAAA,KAAK,EAAEzC,MAAM,CAAC+C;AAAhB,iBAAb;AAAA,0BAAuC,KAAK3C,KAAL,CAAWwB,QAAX,CAAoB+C;AAA3D,gBAAlC;AAAA,cAAtB,GAA4I;AAA/N,YADJ,EAEK,KAAKvE,KAAL,CAAWsB,QAAX,gBACG;AAAA,uBACKQ,YADL,eAEI;AAAK,cAAA,GAAG,EAAE,KAAK9B,KAAL,CAAWqB,eAArB;AAAsC,cAAA,SAAS,EAAExB,MAAM,CAAC2E;AAAxD,cAFJ;AAAA,YADH,GAKGzB,OAPR;AAAA,UADJ,EAUK,KAAK/C,KAAL,CAAWsB,QAAX,gBACG;AAAK,UAAA,SAAS,EAAEzB,MAAM,CAAC4E,iBAAvB;AAA0C,UAAA,KAAK,EAAE;AAAER,YAAAA,SAAS,EAAE,MAAb;AAAqBK,YAAAA,YAAY,EAAE,OAAnC;AAA4C9B,YAAAA,UAAU,EAAE,MAAxD;AAAgEF,YAAAA,KAAK,EAAE;AAAvE,WAAjD;AAAA,kCACI;AAAK,YAAA,SAAS,EAAEzC,MAAM,CAAC6E,OAAvB;AAAgC,YAAA,KAAK,EAAE;AAAEhC,cAAAA,eAAe,EAAEiC;AAAnB,aAAvC;AAAiE,YAAA,EAAE,EAAE9E,MAAM,CAAC+E,YAA5E;AAA0F,YAAA,OAAO,EAAE,mBAAM;AAAE,cAAA,MAAI,CAACtE,QAAL,CAAc;AAAEgB,gBAAAA,QAAQ,EAAE;AAAZ,eAAd;AAAoC,aAA/I;AAAA,mCACI;AAAG,cAAA,SAAS,EAAEzB,MAAM,CAACgF,WAArB;AAAA;AAAA;AADJ,YADJ,eAKI;AAAK,YAAA,SAAS,EAAEhF,MAAM,CAAC6E,OAAvB;AAAgC,YAAA,KAAK,EAAE;AAAEhC,cAAAA,eAAe,EAAE9C,MAAM,CAAC+C;AAA1B,aAAvC;AACI,YAAA,EAAE,EAAE9C,MAAM,CAAC+E,YADf;AAEI,YAAA,OAAO,EAAE,mBAAM;AACX,kBAAI,MAAI,CAAC5E,KAAL,CAAWyB,kBAAX,IAAiC,MAAI,CAACzB,KAAL,CAAW2B,iBAA5C,IAAiE,MAAI,CAAC3B,KAAL,CAAW0B,oBAAhF,EAAsG;AAClG,4CAA0C,MAAI,CAAC1B,KAAL,CAAWwB,QAArD;AAAA,oBAAQf,MAAR,yBAAQA,MAAR;AAAA,oBAAgB8C,SAAhB,yBAAgBA,SAAhB;AAAA,oBAA2BuB,UAA3B,yBAA2BA,UAA3B;AACApF,gBAAAA,eAAe,CAACqF,IAAhB,CAAqB,MAArB,EAA2BtE,MAA3B,EAAmC8C,SAAnC,EAA8CuB,UAA9C;;AACA,gBAAA,MAAI,CAACxE,QAAL,CAAc;AAAEgB,kBAAAA,QAAQ,EAAE;AAAZ,iBAAd;AACH,eAJD,MAKI0D,KAAK,CAAC,wEAAD,CAAL;AACP,aATL;AAAA,mCAUI;AAAG,cAAA,SAAS,EAAEnF,MAAM,CAACgF,WAArB;AAAA;AAAA;AAVJ,YALJ;AAAA,UADH,gBAmBY,mBA7BjB;AAAA,QADJ;AAkCH;;;;EA1K4CrF,KAAK,CAACyF,S;;SAAlCnF,mB;AA2KpB","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineCheck } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport {\n    validateVehicle,\n    dateOfQuery,\n    colors,\n} from '../../functions';\nimport styles from '../panel_layout.module.css';\n\n\n\nexport default class VehicleApplications extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showDocs: false,\n            result: {},\n            docList: [\n                \"Vehicle insurance\",\n                \"Vehicle registration\",\n                \"Vehicle inspection\",\n            ],\n            selected: {},\n\n            docRegistrationURL: '',\n            docInsuranceURL: '',\n            docInspectionURL: '',\n            docVehicleImage: '',\n\n            inspectionVerified: false,\n            registrationVerified: false,\n            insuranceVerified: false,\n\n            urlToShow: null,\n        };\n    }\n    componentDidMount() {\n        this.loadResult();\n    }\n    loadResult = () => {\n        if (this.state.userDetails) {\n            firebase.database().ref(`vehicleAdditionRequest`).once('value', snapshot => {\n                this.setState({ result: snapshot.val() ? snapshot.val() : {} })\n            });\n        }\n    };\n    loadDocument = (userID, documentStorageID) => {\n\n        firebase.storage().ref(`driverVehicleDocs/${userID}/${documentStorageID}/vehicleRegistration`).getDownloadURL()\n            .then(result => {\n                this.setState({ docRegistrationURL: result });\n            })\n            .catch(error => { console.log(error.message); });\n        firebase.storage().ref(`driverVehicleDocs/${userID}/${documentStorageID}/vehicleInsurance`).getDownloadURL()\n            .then(result => {\n                this.setState({ docInsuranceURL: result });\n            })\n            .catch(error => { console.log(error.message) });\n        firebase.storage().ref(`driverVehicleDocs/${userID}/${documentStorageID}/vehicleInspection`).getDownloadURL()\n            .then(result => {\n                this.setState({ docInspectionURL: result });\n            }).catch(error => { console.log(error.message) });\n        firebase.storage().ref(`driverVehicleDocs/${userID}/${documentStorageID}/vehicleImage`).getDownloadURL()\n            .then(result => {\n                this.setState({ docVehicleImage: result });\n            }).catch(error => { console.log(error.message) });\n    };\n    render() {\n        let requirements = [];\n        for (let i = 0; i < this.state.docList.length; i++) {\n            let urlToShow = '';\n            if (this.state.docList[i] == 'Vehicle insurance')\n                urlToShow = this.state.docInsuranceURL;\n            else if (this.state.docList[i] == 'Vehicle registration')\n                urlToShow = this.state.docRegistrationURL;\n            else if (this.state.docList[i] == 'Vehicle inspection')\n                urlToShow = this.state.docInspectionURL;\n\n            let isVerified = false;\n            if (this.state.docList[i] == 'Vehicle insurance')\n                isVerified = this.state.insuranceVerified;\n            else if (this.state.docList[i] == 'Vehicle registration')\n                isVerified = this.state.registrationVerified;\n            else if (this.state.docList[i] == 'Vehicle inspection')\n                isVerified = this.state.inspectionVerified;\n\n            requirements.push(\n\n                <div className={styles.driverFAQ_PICDESC}\n                    id={styles.driverROUNDSUPPORT}\n                >\n                    <a href={urlToShow}\n                        target={'_blank'}>\n                        <p className={styles.text} style={{ color: '#000000', width: 'initial', margin: '0px', marginLeft: '10px' }}>{this.state.docList[i]}</p>\n                    </a>\n                    <div className={styles.driver_APP_RADIO} style={{ backgroundColor: colors.GREEN, opacity: isVerified ? 1 : 0.5 }}\n                        onClick={() => {\n                            if (this.state.docList[i] == 'Vehicle insurance')\n                                this.setState({ insuranceVerified: true });\n                            else if (this.state.docList[i] == 'Vehicle registration')\n                                this.setState({ registrationVerified: true });\n                            else if (this.state.docList[i] == 'Vehicle inspection')\n                                this.setState({ inspectionVerified: true });\n                        }}\n                    >\n                        {isVerified ?\n                            <AiOutlineCheck color={colors.WHITE} size={'15px'} /> :\n                            <></>\n                        }\n                    </div>\n                </div>\n            );\n        }\n\n        if (!this.state.userDetails && this.props.userDetails)\n            this.setState({ userDetails: this.props.userDetails }, () => { this.loadResult(); });\n\n        let results = [];\n        const keys = Object.keys(this.state.result).sort();\n        for (let k = 0; k < keys.length; k++) {\n            const { year, make, model, timestamp, userID, documentStorageID } = this.state.result[keys[k]];\n            const carName = `${year} ${make} ${model}`;\n            results.push(\n                <>\n                    <div className={styles.previousMessageSum}\n                        onClick={() => {\n                            this.loadDocument(userID, documentStorageID)\n                            this.setState({\n                                showDocs: true,\n                                selected: {\n                                    carName: carName,\n                                    ...this.state.result[keys[k]],\n                                },\n                            })\n                        }}>\n                        <p style={{ fontSize: '95%' }}>{carName}</p>\n                        <div className={styles.previousMessageDate}>\n                            <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', marginRight: '-10px', paddingLeft: '10px' }}>\n                                {dateOfQuery(timestamp)}\n                            </p>\n                        </div>\n                    </div>\n                    {k == keys.length - 1 ? <></> : <div className={styles.sharedLine} style={{ marginTop: '5px' }}></div>}\n                </>\n            )\n        }\n        return (\n            <div className={styles.cont}>\n                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                    <p className={styles.title} style={{ color: colors.BLACK, marginBottom: '20px' }}>{this.state.showDocs ? <>{this.state.selected.carName} - <span style={{ color: colors.GREEN }}>{this.state.selected.plateNumber}</span></> : 'Vehicle Applications'}</p>\n                    {this.state.showDocs ?\n                        <>\n                            {requirements}\n                            <img src={this.state.docVehicleImage} className={styles.driverVehicleIMAGE} />\n                        </> :\n                        results}\n                </div>\n                {this.state.showDocs ?\n                    <div className={styles.enterKilometerDiv} style={{ marginTop: '20px', marginBottom: '150px', marginLeft: '2.5%', width: '95%' }}>\n                        <div className={styles.button2} style={{ backgroundColor: RED }} id={styles.buttonBottom} onClick={() => { this.setState({ showDocs: false }) }}>\n                            <p className={styles.buttonText1}>Cancel</p>\n                        </div>\n\n                        <div className={styles.button2} style={{ backgroundColor: colors.GREEN }}\n                            id={styles.buttonBottom}\n                            onClick={() => {\n                                if (this.state.inspectionVerified && this.state.insuranceVerified && this.state.registrationVerified) {\n                                    const { userID, timestamp, dateFormat } = this.state.selected;\n                                    validateVehicle.call(this, userID, timestamp, dateFormat);\n                                    this.setState({ showDocs: false })\n                                } else\n                                    alert('Please verify all the documents by ticking the green button next to it');\n                            }}>\n                            <p className={styles.buttonText1}>Approve Vehicle</p>\n                        </div>\n\n                    </div> : <></>}\n\n            </div>\n        );\n    };\n};"]},"metadata":{},"sourceType":"module"}