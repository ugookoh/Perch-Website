{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BiStopCircle } from 'react-icons/bi';\nimport { HiOutlineLocationMarker } from 'react-icons/hi';\nimport { VscCalendar } from 'react-icons/vsc';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { M, polylineLenght, timeAndDate, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default class TripHistory extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"loadResult\", () => {\n      if (this.state.userDetails) {\n        this.setState({\n          result: null\n        }, () => {\n          firebase.database().ref(`userHistory/${this.state.userDetails.userID}/carpool/${new Date(this.state.date).getFullYear()}/${M[new Date(this.state.date).getMonth()]}`).once('value', snapshot => {\n            this.setState({\n              result: snapshot.val() ? snapshot.val() : 'NORESULTS'\n            });\n          }).catch(error => {\n            console.log(error.message);\n          });\n        });\n      }\n    });\n\n    this.state = {\n      result: false,\n      date: new Date().getTime(),\n      userDetails: this.props.userDetails\n    };\n  }\n\n  componentDidMount() {\n    this.loadResult();\n  }\n\n  sorter(a, b) {\n    function numbergetter(time) {\n      let slash1 = 0,\n          slash2 = 0,\n          slash3 = 0;\n\n      for (let k = 0; k < time.length; k++) {\n        if (time.charAt(k) == '-') slash1 == 0 ? slash1 = k : slash2 == 0 ? slash2 = k : slash3 = k;\n      }\n\n      ;\n      const DAY = Number(time.substring(0, slash1)) * 86400;\n      const HOUR = Number(time.substring(slash1 + 1, slash2)) * 3600;\n      const MINS = Number(time.substring(slash2 + 1, slash3)) * 60;\n      const SECS = Number(time.substring(slash3 + 1, time.length));\n      return DAY + HOUR + MINS + SECS;\n    }\n\n    ;\n    let a_time = numbergetter(a);\n    let b_time = numbergetter(b);\n    if (a_time > b_time) return -1;else return 1;\n  }\n\n  render() {\n    if (!this.state.userDetails && this.props.userDetails) this.setState({\n      userDetails: this.props.userDetails\n    }, () => {\n      this.loadResult();\n    });\n    let trips = [];\n\n    if (this.state.result && this.state.result != 'NORESULTS') {\n      const keys = Object.keys(this.state.result).sort(this.sorter);\n\n      for (let i = 0; i < keys.length; i++) {\n        trips.push( /*#__PURE__*/_jsx(Trip, {\n          date: timeAndDate(keys[i], M[new Date(this.state.date).getMonth()], new Date(this.state.date).getFullYear()),\n          data: this.state.result[keys[i]],\n          lastItem: i == keys.length - 1\n        }, keys[i]));\n      }\n    }\n\n    return /*#__PURE__*/_jsx(_Fragment, {\n      children: /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.cont,\n        style: {\n          height: '100%',\n          paddingTop: '10px',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.tripPanelDesc,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelCalenderCont,\n            style: {\n              marginRight: '10px'\n            },\n            children: [/*#__PURE__*/_jsx(VscCalendar, {\n              color: colors.GREEN,\n              size: '24px',\n              style: {\n                marginRight: '4px',\n                marginBottom: '3px'\n              }\n            }), /*#__PURE__*/_jsx(DatePicker, {\n              className: styles.calendarDate,\n              placeholderText: `${M[new Date(this.state.date).getMonth()].toUpperCase()} ${new Date(this.state.date).getFullYear()}`,\n              onChange: date => {\n                this.setState({\n                  date: date\n                }, () => {\n                  this.loadResult();\n                });\n              },\n              dateFormat: \"MM/yyyy\",\n              showMonthYearPicker: true\n            })]\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.contactUsLasttext,\n            id: styles.tripPanelAlignMiddle,\n            style: {\n              width: 'initial',\n              fontSize: '80%',\n              margin: '0px'\n            },\n            children: \"To see the details of a trip please use the mobile app\"\n          })]\n        }), this.state.result ? this.state.result == 'NORESULTS' ? /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.tripPanelLoading,\n          id: styles.tripPanelLoading_,\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: \"/noResultsWoman.svg\",\n            className: styles.noResultsWoman,\n            alt: \"No Results\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.contactUsLasttext,\n            style: {\n              width: 'initial',\n              fontSize: '90%',\n              margin: '0px'\n            },\n            id: styles.tripPanelLoadingText,\n            children: \"Surprisingly, you haven't booked any rides during this time.\"\n          })]\n        }) : trips : /*#__PURE__*/_jsx(\"div\", {\n          className: styles.tripPanelLoading,\n          children: /*#__PURE__*/_jsx(Loader, {\n            type: \"TailSpin\",\n            color: colors.GREEN,\n            height: '100px',\n            width: '100px'\n          })\n        })]\n      })\n    });\n  }\n\n}\n;\n\nclass Trip extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    let bar = /*#__PURE__*/_jsx(_Fragment, {});\n\n    const data = JSON.parse(this.props.data.data);\n    const cost = this.props.data.cost.total;\n    let totalDistance = 0;\n\n    switch (this.props.data.driverDetails.steps) {\n      case 1:\n        {\n          totalDistance = data.firstDistance;\n          bar = /*#__PURE__*/_jsx(\"div\", {\n            className: styles.tripPanelNoOfTrips,\n            style: {\n              backgroundColor: colors.GREEN\n            }\n          });\n        }\n        break;\n\n      case 2:\n        {\n          totalDistance = data.firstDistance + data.secondDistance;\n          bar = /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelNoOfTrips,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                width: data.firstDistance / totalDistance * 100 + '%',\n                backgroundColor: colors.GREEN,\n                borderTopRightRadius: '0px',\n                borderBottomRightRadius: '0px'\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                width: data.secondDistance / totalDistance * 100 + '%',\n                backgroundColor: colors.BLUE,\n                borderTopLeftRadius: '0px',\n                borderBottomLeftRadius: '0px'\n              }\n            })]\n          });\n        }\n        break;\n\n      case 3:\n        {\n          totalDistance = data.firstDistance + data.secondDistance + data.thirdDistance;\n          bar = /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelNoOfTrips,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                width: data.firstDistance / totalDistance * 100 + '%',\n                backgroundColor: colors.GREEN,\n                borderTopRightRadius: '0px',\n                borderBottomRightRadius: '0px'\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                width: data.secondDistance / totalDistance * 100 + '%',\n                backgroundColor: colors.BLUE,\n                borderRadius: '0px'\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                width: data.thirdDistance / totalDistance * 100 + '%',\n                backgroundColor: colors.PURPLE,\n                borderTopLeftRadius: '0px',\n                borderBottomLeftRadius: '0px'\n              }\n            })]\n          });\n        }\n        break;\n    }\n\n    ;\n    totalDistance > 100 ? totalDistance = `${(totalDistance / 1000).toFixed(1)} kilometers` : totalDistance = `${totalDistance.toFixed(totalDistance != 0 ? 1 : 0)} meters`;\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        id: styles.tripPanelCont,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            width: '95%',\n            margin: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelTitle,\n            children: `${this.props.data.driverDetails.steps}-leg trip`\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelTime,\n            children: this.props.date\n          })]\n        }), bar, /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            width: '95%',\n            justifyContent: 'initial',\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(HiOutlineLocationMarker, {\n            color: colors.GREEN,\n            style: {\n              margin: '0px',\n              marginRight: '10px'\n            },\n            className: styles.driverHistory_ICON\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelTime,\n            style: {\n              margin: '0px'\n            },\n            children: this.props.data.location.description\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            width: '95%',\n            justifyContent: 'initial',\n            marginTop: '10px'\n          },\n          children: [/*#__PURE__*/_jsx(BiStopCircle, {\n            color: colors.GREEN,\n            style: {\n              marginRight: '10px'\n            },\n            className: styles.driverHistory_ICON\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelTime,\n            style: {\n              margin: '0px'\n            },\n            children: this.props.data.destination.description\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.tripPanelNoOfTrips,\n          style: {\n            backgroundColor: colors.GREY,\n            height: '1px',\n            marginTop: '17px'\n          }\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            width: '95%',\n            marginTop: '10px',\n            marginBottom: '15px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelTitle,\n            style: {\n              fontFamily: 'Gilroy-Medium',\n              margin: '0px'\n            },\n            children: totalDistance\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.tripPanelCash,\n            children: `$ ${cost}`\n          })]\n        })]\n      }), this.props.lastItem ?\n      /*#__PURE__*/\n      //just for padding at the bottom\n      _jsx(\"div\", {\n        style: {\n          height: '150px',\n          width: '100%',\n          backgroundColor: 'transparent'\n        }\n      }) : /*#__PURE__*/_jsx(_Fragment, {})]\n    });\n  }\n\n}\n\n;","map":{"version":3,"sources":["/Users/ugo/Documents/Perch_Projects/Perch-Website/functions/panels/userPanels/tripHistory.js"],"names":["firebase","React","DatePicker","BiStopCircle","HiOutlineLocationMarker","VscCalendar","Loader","M","polylineLenght","timeAndDate","colors","styles","TripHistory","Component","constructor","props","state","userDetails","setState","result","database","ref","userID","Date","date","getFullYear","getMonth","once","snapshot","val","catch","error","console","log","message","getTime","componentDidMount","loadResult","sorter","a","b","numbergetter","time","slash1","slash2","slash3","k","length","charAt","DAY","Number","substring","HOUR","MINS","SECS","a_time","b_time","render","trips","keys","Object","sort","i","push","cont","height","paddingTop","position","tripPanelDesc","tripPanelCalenderCont","marginRight","GREEN","marginBottom","calendarDate","toUpperCase","contactUsLasttext","tripPanelAlignMiddle","width","fontSize","margin","tripPanelLoading","tripPanelLoading_","noResultsWoman","tripPanelLoadingText","Trip","bar","data","JSON","parse","cost","total","totalDistance","driverDetails","steps","firstDistance","tripPanelNoOfTrips","backgroundColor","secondDistance","borderTopRightRadius","borderBottomRightRadius","BLUE","borderTopLeftRadius","borderBottomLeftRadius","thirdDistance","borderRadius","PURPLE","toFixed","tripPanelCont","enterKilometerDiv","tripPanelTitle","tripPanelTime","justifyContent","marginTop","driverHistory_ICON","location","description","destination","GREY","fontFamily","tripPanelCash","lastItem"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BiStopCircle } from 'react-icons/bi';\nimport { HiOutlineLocationMarker } from 'react-icons/hi';\nimport { VscCalendar } from 'react-icons/vsc';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport {\n    M, polylineLenght,\n    timeAndDate, colors\n} from '../../functions';\nimport styles from '../panel_layout.module.css';\n\n\nexport default class TripHistory extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            result: false,\n            date: new Date().getTime(),\n            userDetails: this.props.userDetails,\n        };\n    };\n\n    componentDidMount() {\n        this.loadResult();\n    }\n\n    loadResult = () => {\n        if (this.state.userDetails) {\n            this.setState({ result: null }, () => {\n                firebase.database().ref(`userHistory/${this.state.userDetails.userID}/carpool/${new Date(this.state.date).getFullYear()}/${M[new Date(this.state.date).getMonth()]}`).once('value', snapshot => {\n                    this.setState({ result: snapshot.val() ? snapshot.val() : 'NORESULTS' });\n                }).catch(error => { console.log(error.message) });\n            });\n        }\n    };\n    sorter(a, b) {\n        function numbergetter(time) {\n            let slash1 = 0, slash2 = 0, slash3 = 0;\n            for (let k = 0; k < time.length; k++) {\n                if (time.charAt(k) == '-')\n                    slash1 == 0 ? slash1 = k : slash2 == 0 ? slash2 = k : slash3 = k;\n            };\n\n            const DAY = Number(time.substring(0, slash1)) * 86400;\n            const HOUR = Number(time.substring(slash1 + 1, slash2)) * 3600;\n            const MINS = Number(time.substring(slash2 + 1, slash3)) * 60;\n            const SECS = Number(time.substring(slash3 + 1, time.length));\n\n            return (DAY + HOUR + MINS + SECS)\n        };\n\n        let a_time = numbergetter(a)\n        let b_time = numbergetter(b)\n\n        if (a_time > b_time)\n            return -1;\n        else\n            return 1\n    };\n    render() {\n        if (!this.state.userDetails && this.props.userDetails)\n            this.setState({ userDetails: this.props.userDetails }, () => { this.loadResult(); });\n\n        let trips = [];\n\n        if (this.state.result && this.state.result != 'NORESULTS') {\n            const keys = Object.keys(this.state.result).sort(this.sorter);\n            for (let i = 0; i < keys.length; i++) {\n                trips.push(\n                    <Trip\n                        key={keys[i]}\n                        date={timeAndDate(keys[i], M[new Date(this.state.date).getMonth()], new Date(this.state.date).getFullYear())}\n                        data={this.state.result[keys[i]]}\n                        lastItem={i == keys.length - 1}\n                    />\n                );\n            }\n        }\n        return (\n            <>\n                <div className={styles.cont} style={{ height: '100%', paddingTop: '10px', position: 'relative' }}>\n\n                    <div className={styles.tripPanelDesc} >\n                        <div className={styles.tripPanelCalenderCont} style={{ marginRight: '10px' }}>\n                            <VscCalendar color={colors.GREEN} size={'24px'} style={{ marginRight: '4px', marginBottom: '3px' }} />\n                            <DatePicker\n                                className={styles.calendarDate}\n                                placeholderText={`${M[new Date(this.state.date).getMonth()].toUpperCase()} ${new Date(this.state.date).getFullYear()}`}\n                                onChange={date => { this.setState({ date: date }, () => { this.loadResult() }); }}\n                                dateFormat=\"MM/yyyy\"\n                                showMonthYearPicker\n                            />\n                        </div>\n                        <p className={styles.contactUsLasttext} id={styles.tripPanelAlignMiddle} style={{ width: 'initial', fontSize: '80%', margin: '0px' }}>\n                            To see the details of a trip please use the mobile app\n                        </p>\n                    </div>\n                    {this.state.result ?\n                        this.state.result == 'NORESULTS' ?\n                            <div className={styles.tripPanelLoading} id={styles.tripPanelLoading_}>\n                                <img src=\"/noResultsWoman.svg\" className={styles.noResultsWoman} alt=\"No Results\" />\n                                <p className={styles.contactUsLasttext} style={{ width: 'initial', fontSize: '90%', margin: '0px' }} id={styles.tripPanelLoadingText}>\n                                    Surprisingly, you haven't booked any rides during this time.\n                                </p>\n                            </div> :\n                            trips :\n                        <div className={styles.tripPanelLoading}>\n                            <Loader\n                                type=\"TailSpin\"\n                                color={colors.GREEN}\n                                height={'100px'}\n                                width={'100px'}\n                            />\n                        </div>}\n                </div>\n            </>\n        );\n    }\n};\n\nclass Trip extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n        };\n\n    }\n    render() {\n            let bar = <></>;\n            const data = JSON.parse(this.props.data.data);\n            const cost = (this.props.data.cost.total);\n            let totalDistance = 0;\n            switch (this.props.data.driverDetails.steps) {\n                case 1: {\n                    totalDistance = data.firstDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: colors.GREEN }} >\n                    </div>;\n                } break;\n                case 2: {\n                    totalDistance = data.firstDistance + data.secondDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips}>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.firstDistance / totalDistance) * 100) + '%', backgroundColor: colors.GREEN, borderTopRightRadius: '0px', borderBottomRightRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.secondDistance / totalDistance) * 100) + '%', backgroundColor: colors.BLUE, borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }} >\n                        </div>\n                    </div>\n                } break;\n                case 3: {\n                    totalDistance = data.firstDistance + data.secondDistance + data.thirdDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips}>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.firstDistance / totalDistance) * 100) + '%', backgroundColor: colors.GREEN, borderTopRightRadius: '0px', borderBottomRightRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.secondDistance / totalDistance) * 100) + '%', backgroundColor: colors.BLUE, borderRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.thirdDistance / totalDistance) * 100) + '%', backgroundColor: colors.PURPLE, borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }} >\n                        </div>\n\n                    </div>\n                } break;\n            };\n            totalDistance > 100 ?\n                totalDistance = `${(totalDistance / 1000).toFixed(1)} kilometers` :\n                totalDistance = `${(totalDistance).toFixed(totalDistance != 0 ? 1 : 0)} meters`;\n            return (\n                <>\n                    <div id={styles.tripPanelCont} >\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', margin: '0px' }}>\n                            <p className={styles.tripPanelTitle}>{`${this.props.data.driverDetails.steps}-leg trip`}</p>\n                            <p className={styles.tripPanelTime}>{this.props.date}</p>\n                        </div>\n\n                        {bar}\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '20px' }}>\n                            <HiOutlineLocationMarker color={colors.GREEN} style={{ margin: '0px', marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{this.props.data.location.description}</p>\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '10px' }}>\n                            <BiStopCircle color={colors.GREEN} style={{ marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{this.props.data.destination.description}</p>\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: colors.GREY, height: '1px', marginTop: '17px' }} >\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', marginTop: '10px', marginBottom: '15px' }}>\n                            <p className={styles.tripPanelTitle} style={{ fontFamily: 'Gilroy-Medium', margin: '0px' }}>{totalDistance}</p>\n                            <p className={styles.tripPanelCash} >{`$ ${cost}`}</p>\n                        </div>\n                    </div>\n                    {\n                        this.props.lastItem ?//just for padding at the bottom\n                            <div style={{ height: '150px', width: '100%', backgroundColor: 'transparent' }}></div>\n                            : <></>\n                    }\n                </>\n            );\n    }\n};"]},"metadata":{},"sourceType":"module"}