{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors, formatDateAllValues, pendingProcessesFunction, pendingProcessesFunctionDelete } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default class PendingProcesses extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"renderList\", () => {\n      let r = [];\n      r.push( /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.widthSeperator,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.mainText,\n            children: `• User ID - ${this.state.userID}`\n          }), /*#__PURE__*/_jsx(\"div\", {\n            style: {\n              width: '90px',\n              height: '30px',\n              backgroundColor: this.state.type == 'rider' ? colors.GREEN : colors.BLUE,\n              borderRadius: '5px',\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center'\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.readOrUnreadText,\n              style: {\n                color: '#ffffff',\n                fontFamily: 'Gilroy-ExtraBold'\n              },\n              children: this.state.type == 'rider' ? 'Rider' : 'Driver'\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.widthSeperator,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.mainText,\n            children: `• Topic - ${this.state.mainTopic}`\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.mainText,\n            children: `Created at  ( ${formatDateAllValues(new Date(this.state.timeCreated))} )`\n          })]\n        })]\n      }));\n      const listOfProcesses = this.state.listOfProcesses;\n\n      for (let i = 0; i < listOfProcesses.length; i++) {\n        r.push( /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.containerForPendingList,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.listOfProcessesTitle,\n            children: listOfProcesses[i].title\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.listOfProcessesDetails,\n            children: listOfProcesses[i].details\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.listOfProcessesTime,\n            children: formatDateAllValues(new Date(listOfProcesses[i].timeCreated))\n          })]\n        }));\n      }\n\n      return r;\n    });\n\n    _defineProperty(this, \"loadOldList\", data => {\n      const {\n        pushId,\n        userID,\n        type,\n        mainTopic,\n        timeCreated\n      } = data;\n      this.setState({\n        loading: true\n      }, () => {\n        firebase.database().ref(`pendingProcessesListMessages/${pushId}`).once('value', snapshot => {\n          let oldV = [];\n          snapshot.forEach(v => {\n            oldV.push(v.val());\n          });\n          this.setState({\n            listOfProcesses: oldV,\n            viewList: true,\n            loading: false,\n            userID: userID,\n            type: type,\n            pushId: pushId,\n            mainTopic: mainTopic,\n            timeCreated: timeCreated\n          });\n        });\n      });\n    });\n\n    this.state = {\n      result: {},\n      listOfProcesses: [],\n      loading: false,\n      loading1: false,\n      pushId: '',\n      addProcess: false,\n      isNewProcess: false,\n      viewList: false,\n      userID: '',\n      type: '',\n      mainTopic: '',\n      timeCreated: null,\n      title: '',\n      details: '',\n      errorMessage: ''\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref(`pendingProcessesList`).once('value', snapshot => {\n      this.setState({\n        result: snapshot.val()\n      });\n    });\n  }\n\n  stringIsNotEmpty(s) {\n    return s.length >= 4;\n  }\n\n  render() {\n    let results = [];\n    const keys = Object.keys(this.state.result).sort((a, b) => b - a);\n\n    for (let k = 0; k < keys.length; k++) {\n      const data = this.state.result[keys[k]];\n      const displayDate = formatDateAllValues(new Date(data.timeCreated));\n      results.push( /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.previousMessageSum,\n          onClick: () => {\n            this.loadOldList(data);\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            style: {\n              fontSize: '105%',\n              fontFamily: 'Gilroy-Regular',\n              color: colors.BLACK\n            },\n            children: data.mainTopic\n          }), /*#__PURE__*/_jsx(\"p\", {\n            style: {\n              fontSize: '100%',\n              fontFamily: 'Gilroy-Light',\n              color: colors.GREEN\n            },\n            children: /*#__PURE__*/_jsx(\"span\", {\n              style: {\n                color: colors.GREY\n              },\n              children: displayDate\n            })\n          })]\n        }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine,\n          style: {\n            marginTop: '5px'\n          }\n        })]\n      }));\n    }\n\n    ;\n    const {\n      addProcess,\n      errorMessage,\n      isNewProcess,\n      viewList\n    } = this.state;\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [!addProcess && !isNewProcess && !viewList && /*#__PURE__*/_jsx(\"div\", {\n        className: styles.enterKilometerDiv,\n        style: {\n          marginTop: '20px',\n          marginBottom: '0px',\n          marginLeft: '2.5%',\n          width: '95%'\n        },\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: styles.button2,\n          style: {\n            backgroundColor: colors.GREEN,\n            width: '100%',\n            maxWidth: 'initial'\n          },\n          id: styles.buttonBottom,\n          onClick: () => {\n            this.setState({\n              addProcess: true,\n              isNewProcess: true,\n              userID: '',\n              type: '',\n              mainTopic: '',\n              title: '',\n              details: '',\n              errorMessage: ''\n            });\n          },\n          children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n            type: \"TailSpin\",\n            color: colors.WHITE,\n            height: '20px',\n            width: '20px'\n          }) : /*#__PURE__*/_jsx(\"p\", {\n            className: styles.buttonText1,\n            children: \"Add new process\"\n          })\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.BLACK\n          },\n          children: addProcess ? 'Add a new process' : viewList ? 'View process history' : 'List of pending processes'\n        }), addProcess ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [isNewProcess ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.widthSeperator,\n              children: [/*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"User ID\",\n                className: styles.searchInput,\n                style: {\n                  width: '67%'\n                },\n                value: this.state.userID,\n                onChange: event => {\n                  this.setState({\n                    userID: event.target.value\n                  });\n                }\n              }), /*#__PURE__*/_jsx(\"input\", {\n                type: \"text\",\n                placeholder: \"Type\",\n                className: styles.searchInput,\n                style: {\n                  width: '32%'\n                },\n                value: this.state.type,\n                onChange: event => {\n                  this.setState({\n                    type: event.target.value.toLowerCase()\n                  });\n                }\n              })]\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"Main topic\",\n              className: styles.searchInput,\n              style: {\n                width: '90%',\n                marginTop: '15px'\n              },\n              value: this.state.mainTopic,\n              onChange: event => {\n                this.setState({\n                  mainTopic: event.target.value\n                });\n              }\n            })]\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.widthSeperator,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.mainText,\n                children: `• User ID - ${this.state.userID}`\n              }), /*#__PURE__*/_jsx(\"div\", {\n                style: {\n                  width: '90px',\n                  height: '30px',\n                  backgroundColor: this.state.type == 'rider' ? colors.GREEN : colors.BLUE,\n                  borderRadius: '5px',\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center'\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: styles.readOrUnreadText,\n                  style: {\n                    color: '#ffffff',\n                    fontFamily: 'Gilroy-ExtraBold'\n                  },\n                  children: this.state.type == 'rider' ? 'Rider' : 'Driver'\n                })\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.widthSeperator,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.mainText,\n                children: `• Topic - ${this.state.mainTopic}`\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.mainText,\n                children: `Created at  ( ${formatDateAllValues(new Date(this.state.timeCreated))} )`\n              })]\n            })]\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Title\",\n            className: styles.searchInput,\n            style: {\n              width: '90%',\n              marginTop: '15px'\n            },\n            value: this.state.title,\n            onChange: event => {\n              this.setState({\n                title: event.target.value\n              });\n            }\n          }), /*#__PURE__*/_jsx(\"textarea\", {\n            type: \"text\",\n            placeholder: \"Details\",\n            className: styles.contactUsContent,\n            style: {\n              width: '90%',\n              marginTop: '15px',\n              fontSize: '100%'\n            },\n            value: this.state.details,\n            onChange: event => {\n              this.setState({\n                details: event.target.value\n              });\n            }\n          })]\n        }) : viewList ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            style: {\n              height: '20px',\n              width: '100%'\n            }\n          }), this.renderList()]\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            style: {\n              height: '20px',\n              width: '100%'\n            }\n          }), results]\n        }), errorMessage != '' && /*#__PURE__*/_jsx(\"p\", {\n          className: styles.em,\n          style: {\n            textAlign: 'initial'\n          },\n          children: errorMessage\n        })]\n      }), (addProcess || viewList) && /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            marginTop: '20px',\n            marginBottom: viewList ? '0px' : '150px',\n            marginLeft: '2.5%',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.RED\n            },\n            id: styles.buttonBottom,\n            onClick: () => {\n              if (addProcess || viewList) this.setState({\n                addProcess: false,\n                isNewProcess: false,\n                viewList: false,\n                userID: '',\n                type: '',\n                mainTopic: '',\n                timeCreated: null,\n                title: '',\n                details: '',\n                errorMessage: ''\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: addProcess ? 'Cancel' : 'Close'\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.GREEN\n            },\n            id: styles.buttonBottom,\n            onClick: () => {\n              if (addProcess) {\n                if (isNewProcess) {\n                  if (this.stringIsNotEmpty(this.state.userID) && (this.state.type == 'rider' || this.state.type == 'driver') && this.stringIsNotEmpty(this.state.mainTopic) && this.stringIsNotEmpty(this.state.title) && this.stringIsNotEmpty(this.state.details)) pendingProcessesFunction.call(this, {\n                    userID: this.state.userID,\n                    isNewProcess: true,\n                    type: this.state.type,\n                    mainTopic: this.state.mainTopic,\n                    title: this.state.title,\n                    details: this.state.details\n                  });else this.setState({\n                    errorMessage: 'Please verify all fields are entered correctly and type is either \"driver\" or \"rider\"'\n                  });\n                } else {\n                  if (this.stringIsNotEmpty(this.state.title) && this.stringIsNotEmpty(this.state.details)) pendingProcessesFunction.call(this, {\n                    isNewProcess: false,\n                    title: this.state.title,\n                    details: this.state.details,\n                    oldPushId: this.state.pushId\n                  });else this.setState({\n                    errorMessage: 'Please verify all fields are entered correctly'\n                  });\n                }\n              } else if (viewList) {\n                this.setState({\n                  addProcess: true,\n                  isNewProcess: false,\n                  viewList: false,\n                  title: '',\n                  details: ''\n                });\n              }\n            },\n            children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n              type: \"TailSpin\",\n              color: colors.WHITE,\n              height: '20px',\n              width: '20px'\n            }) : /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: 'Add new process'\n            })\n          })]\n        })\n      }), viewList && /*#__PURE__*/_jsx(\"div\", {\n        className: styles.button2,\n        style: {\n          backgroundColor: colors.GREY,\n          width: '95%',\n          marginLeft: '2.5%',\n          marginTop: '20px',\n          marginBottom: '150px',\n          maxWidth: 'initial'\n        },\n        id: styles.buttonBottom,\n        onClick: () => {\n          pendingProcessesFunctionDelete.call(this, this.state.pushId);\n        },\n        children: this.state.loading1 ? /*#__PURE__*/_jsx(Loader, {\n          type: \"TailSpin\",\n          color: colors.WHITE,\n          height: '20px',\n          width: '20px'\n        }) : /*#__PURE__*/_jsx(\"p\", {\n          className: styles.buttonText1,\n          children: \"Complete this task\"\n        })\n      })]\n    });\n  }\n\n}\n;","map":null,"metadata":{},"sourceType":"module"}