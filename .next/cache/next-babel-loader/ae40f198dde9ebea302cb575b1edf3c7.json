{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { MdContentCopy } from 'react-icons/md';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport styles from '../panel_layout.module.css';\nimport { colors } from '../../functions';\nimport firebase from 'firebase';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default class UserDashBoard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"copyToClipboard\", () => {\n      var _this$state$userDetai, _this$state$userDetai2;\n\n      navigator.clipboard.writeText(`Sign up with my Perch referral code \"${(_this$state$userDetai = this.state.userDetails) === null || _this$state$userDetai === void 0 ? void 0 : _this$state$userDetai.shareCode}\" at https://perchrides.com/s/auth/u_si_su?mode=signUp&referralCode=${(_this$state$userDetai2 = this.state.userDetails) === null || _this$state$userDetai2 === void 0 ? void 0 : _this$state$userDetai2.shareCode}`);\n    });\n\n    this.state = {\n      userDetails: this.props.userDetails,\n      sharedLinks: true,\n      peopleWhoUsedReferralCodes: null\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref(`peopleWhoUsedReferralCodes/${this.state.userDetails.userID}`).once('value', snapshot => {\n      if (snapshot.val()) {\n        let snap_ = _objectSpread({}, snapshot.val());\n\n        let p = [];\n\n        function downLoadUrl(key) {\n          return new Promise(resolve => {\n            firebase.storage().ref(snap_[key].avatar).getDownloadURL().then(result => {\n              snap_[key].avatar = result;\n              resolve(null);\n            }).catch(error => {\n              console.log(error.message);\n            });\n          });\n        }\n\n        ;\n\n        for (let key in snap_) {\n          p.push(downLoadUrl(key));\n        }\n\n        ;\n        Promise.all(p).then(() => {\n          this.setState({\n            peopleWhoUsedReferralCodes: snap_\n          });\n        }).catch(error => {\n          console.log(error.message);\n        });\n      } else this.setState({\n        peopleWhoUsedReferralCodes: null\n      });\n    });\n  }\n\n  render() {\n    var _this$state$userDetai3;\n\n    let sharedLinks = [];\n    const peopleWhoUsedReferralCodes = this.state.peopleWhoUsedReferralCodes || {};\n    const keys = Object.keys(peopleWhoUsedReferralCodes);\n\n    for (let i = 0; i < keys.length; i++) {\n      const obj = peopleWhoUsedReferralCodes[keys[i]];\n      sharedLinks.push( /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.sharedLinksCont,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.sharedLinks,\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.dp1,\n            children: /*#__PURE__*/_jsx(\"img\", {\n              src: obj.avatar,\n              className: styles.doggyProfilePicture\n            })\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text1,\n            style: {\n              color: colors.BLACK\n            },\n            children: obj.name\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.addedKm,\n            children: `+ ${obj.addedKms}kms`\n          })]\n        }), i !== keys.length - 1 ? /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine\n        }) : /*#__PURE__*/_jsx(_Fragment, {})]\n      }));\n    }\n\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        id: styles.ud1,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.ud1,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"Promos\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"Want free rides? Share your invite code with friends and family, and when they book their first ride, you get free kilometers!\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.iC_Cont,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.WHITE,\n                fontFamily: 'Gilroy-Semibold',\n                margin: '0px',\n                marginRight: '15px',\n                width: 'initial'\n              },\n              children: \"Invite Code\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.copyBox,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.text,\n                id: styles.iC_link,\n                children: (_this$state$userDetai3 = this.state.userDetails) === null || _this$state$userDetai3 === void 0 ? void 0 : _this$state$userDetai3.shareCode\n              }), /*#__PURE__*/_jsx(MdContentCopy, {\n                className: styles.copy,\n                color: colors.WHITE,\n                onClick: this.copyToClipboard\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"img\", {\n          src: \"/giftBox.svg\",\n          alt: \"Perch Carpool\",\n          className: styles.giftBox\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.BLACK\n          },\n          children: \"Platform links\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.GREY\n          },\n          children: \"At the moment, getting rides with Perch is only available on the mobile app for iOS and android devices.\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            display: 'flex',\n            width: '90%',\n            flexDirection: 'row',\n            justifyContent: 'flex-start'\n          },\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.downloadCont,\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/downloadAppStore.svg\",\n              alt: \"Download Perch on App store\",\n              className: styles.downloadApp\n            }), /*#__PURE__*/_jsx(\"img\", {\n              src: \"/downloadGooglePlay.svg\",\n              alt: \"Download Perch on App store\",\n              className: styles.downloadApp\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px',\n          marginBottom: '150px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.BLACK\n          },\n          children: \"Riders who signed up with your share link\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.GREY\n          },\n          children: this.state.peopleWhoUsedReferralCodes ? 'Here are a list of the users who used your invite links along with the kilometers you got credited.' : 'When you share your code with friends and they use it to book their first ride, you would see their name here along with the kilometers you got from sharing it. Right now, no one has used your code to book a ride.'\n        }), sharedLinks.length !== 0 && sharedLinks]\n      })]\n    });\n  }\n\n}\n;","map":null,"metadata":{},"sourceType":"module"}