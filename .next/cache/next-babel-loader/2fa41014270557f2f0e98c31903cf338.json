{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineClose, AiOutlineRight } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors, isNumber, deleteCard, stripe } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default class PerchWallet extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"loadCards\", () => {\n      const {\n        userID\n      } = this.state.userDetails;\n      firebase.database().ref(`cards/${userID}`).once('value', snapshot => {\n        if (!!snapshot) {\n          let arrayOfLast4 = [],\n              i = 0;\n\n          for (let key in snapshot.val()) {\n            if (key != 'selected') arrayOfLast4[i] = {\n              last4: snapshot.val()[key].card.last4,\n              brand: snapshot.val()[key].card.brand\n            };else if (key == 'selected') this.setState({\n              selected: snapshot.val()[key]\n            });\n            i++;\n          }\n\n          this.setState({\n            cards: arrayOfLast4\n          });\n        }\n      });\n    });\n\n    _defineProperty(this, \"setSelected\", value => {\n      const {\n        userID\n      } = this.state.userDetails;\n      firebase.database().ref(`cards/${userID}`).update({\n        selected: value\n      }).then(() => {\n        this.setState({\n          selected: value\n        });\n      }).catch(error => {\n        this.setState({\n          errorMessage: error.message\n        });\n      });\n    });\n\n    _defineProperty(this, \"removeCard\", index => {\n      let {\n        cards\n      } = this.state;\n      cards.splice(index, 1);\n      this.setState({\n        cards: cards\n      });\n    });\n\n    _defineProperty(this, \"createTokenWithCard\", () => {\n      loadStripe('pk_test_A7jK4iCYHL045qgjjfzAfPxu').then(stripe => {\n        this.setState({\n          loading: true\n        }, () => {\n          stripe.createTokenWithCard({\n            number: this.formatCard(this.state.cardNumber),\n            expMonth: Number(this.state.expiryDate.substring(0, 2)),\n            expYear: Number(this.state.expiryDate.substring(5, 7)),\n            cvc: this.state.ccv,\n            name: this.state.name\n          }).then(token => {\n            this.setState({\n              errorMessage: token,\n              loading: false\n            }); //storeCard.call(this, this.state.userID, token);\n          }).catch(error => {\n            this.setState({\n              loading: false,\n              errorMessage: error.message\n            });\n          });\n        });\n      }).catch(error => {\n        this.setState({\n          loading: false,\n          errorMessage: error.message\n        });\n      });\n    });\n\n    this.state = {\n      buyKilometers: false,\n      addCard: false,\n      userDetails: this.props.userDetails,\n      quantity: 0,\n      cards: [],\n      selected: null,\n      name: '',\n      cardNumber: '',\n      expiryDate: '',\n      ccv: '',\n      errorMessage: '',\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    const {\n      userID\n    } = this.state.userDetails;\n    firebase.database().ref(`perchKilometers/${userID}/quantity`).on('value', snapshot => {\n      if (!!snapshot) this.setState({\n        quantity: snapshot.val()\n      });\n    });\n    this.loadCards();\n  }\n\n  formatCard(card) {\n    const formattedCard = card.substring(0, 4) + card.substring(5, 9) + card.substring(10, 14) + card.substring(15, 19);\n    return formattedCard;\n  }\n\n  render() {\n    let cards = [];\n\n    for (let i = 0; i < this.state.cards.length; i++) cards.push( /*#__PURE__*/_jsx(PaymentCard, {\n      userID: this.state.userDetails.userID,\n      card: this.state.cards[i],\n      index: i,\n      removeCard: this.removeCard,\n      setSelected: this.setSelected,\n      selectedCard: this.state.selected,\n      selected: this.state.selected === this.state.cards[i].last4,\n      type: this.state.buyKilometers ? 'pickPayment' : 'listOfCards'\n    }, this.state.cards[i].last4));\n\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: styles.cont,\n      children: this.state.buyKilometers ?\n      /*#__PURE__*/\n      //buy kilometers\n      _jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"Enter the amount of kilometers you would like to purchase\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Enter amount of kilometers\",\n            className: styles.inputPaymentPanel\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium',\n                color: colors.GREY\n              },\n              className: styles.text,\n              children: \"Cost per kilometer\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium'\n              },\n              className: styles.text,\n              children: `$ 12.99`\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium',\n                color: colors.GREY\n              },\n              className: styles.text,\n              children: \"Total cost of kilometers\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium'\n              },\n              className: styles.text,\n              children: `$ 12.99`\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium',\n                color: colors.GREY\n              },\n              className: styles.text,\n              children: \"Taxes\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Medium'\n              },\n              className: styles.text,\n              children: `$ 1.99`\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.sharedLine,\n            style: {\n              marginTop: '20px',\n              width: '90%'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Bold',\n                fontSize: '120%'\n              },\n              className: styles.text,\n              children: \"Total\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              style: {\n                width: 'initial',\n                margin: '0px',\n                fontFamily: 'Gilroy-Bold',\n                color: colors.GREEN,\n                fontSize: '120%'\n              },\n              className: styles.text,\n              children: `$ 12.99`\n            })]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"Payment Methods\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.GREY,\n              marginBottom: '20px'\n            },\n            children: \"List of available payment methods. New payment methods can also be added.\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.paymentCont,\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.paymentItem,\n              children: [cards, /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.paymentRow,\n                id: styles.addCardPayment,\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  style: {\n                    flexDirection: 'row',\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"img\", {\n                    src: \"/PayPalLogo.svg\",\n                    alt: \"Perch Payment\",\n                    className: styles.visaIcon,\n                    style: {\n                      marginRight: '15px',\n                      marginLeft: '0px'\n                    }\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.paymentCardNumber,\n                    id: styles.paymentCardNumber_,\n                    children: \"PayPal\"\n                  })]\n                }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                  color: colors.BLACK\n                })]\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.sharedLine,\n                style: {\n                  marginTop: '0px',\n                  width: '100%'\n                }\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.paymentRow,\n                id: styles.addCardPayment,\n                onClick: () => {\n                  this.setState({\n                    addCard: true,\n                    buyKilometers: false,\n                    errorMessage: ''\n                  });\n                },\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  style: {\n                    flexDirection: 'row',\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"img\", {\n                    src: \"/addPaymentCardIcon.svg\",\n                    alt: \"Perch Payment\",\n                    className: styles.visaIcon,\n                    style: {\n                      marginRight: '15px'\n                    }\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.paymentCardNumber,\n                    id: styles.paymentCardNumber_,\n                    children: \"Add Debit / Credit Card\"\n                  })]\n                }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                  color: colors.BLACK\n                })]\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            marginTop: '20px',\n            marginBottom: '150px',\n            marginLeft: '2.5%',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.RED\n            },\n            id: styles.buttonBottom,\n            onClick: () => {\n              this.setState({\n                buyKilometers: false,\n                addCard: false,\n                errorMessage: ''\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Cancel\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.GREEN\n            },\n            id: styles.buttonBottom,\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Buy Kilometers\"\n            })\n          })]\n        })]\n      }) : this.state.addCard ?\n      /*#__PURE__*/\n      //add card\n      _jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"Add card\"\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Name on Card\",\n            className: styles.inputPaymentPanel,\n            id: styles.inputPaymentPanel_ADD,\n            style: {\n              marginTop: '10px'\n            },\n            value: this.state.name,\n            onChange: e => {\n              const value = e.target.value;\n              this.setState({\n                name: value\n              });\n            }\n          }), /*#__PURE__*/_jsx(\"input\", {\n            type: \"text\",\n            placeholder: \"Card Number\",\n            value: this.state.cardNumber,\n            onChange: e => {\n              const value = e.target.value;\n              if (!isNumber(value.replace(/\\s/g, '')) && value.length) return;\n              let cardNumber = value;\n\n              if (cardNumber[cardNumber.length - 1] !== ' ') {\n                if (cardNumber.length >= 5 && cardNumber[4] !== ' ') cardNumber = cardNumber.substring(0, 4) + ' ' + cardNumber.substring(4, cardNumber.length);\n                if (cardNumber.length >= 10 && cardNumber[9] !== ' ') cardNumber = cardNumber.substring(0, 9) + ' ' + cardNumber.substring(9, cardNumber.length);\n                if (cardNumber.length >= 15 && cardNumber[14] !== ' ') cardNumber = cardNumber.substring(0, 14) + ' ' + cardNumber.substring(14, cardNumber.length);\n              } // if (cardNumber[cardNumber.length] !== ' ') {\n\n\n              if (cardNumber.length <= 19) this.setState({\n                cardNumber: cardNumber\n              });\n            },\n            className: styles.inputPaymentPanel,\n            id: styles.inputPaymentPanel_ADD,\n            style: {\n              marginTop: '10px'\n            }\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              marginTop: '10px',\n              marginBottom: '10px'\n            },\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"Expiry Date (MM/YYYY)\",\n              className: styles.inputPaymentPanel,\n              style: {\n                width: '70%',\n                margin: '0px'\n              },\n              id: styles.inputPaymentPanel_ADD,\n              value: this.state.expiryDate,\n              onChange: e => {\n                const value = e.target.value;\n                if (!isNumber(value.replace(/\\//g, \"\")) && value.length) return;\n                let expiryDate = value;\n                if (expiryDate.length >= 3 && expiryDate[2] !== '/') expiryDate = expiryDate.substring(0, 2) + '/' + expiryDate.substring(2, expiryDate.length);\n                if (expiryDate.length <= 7) this.setState({\n                  expiryDate: expiryDate\n                });\n              }\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"CCV\",\n              className: styles.inputPaymentPanel,\n              style: {\n                width: '28%',\n                margin: '0px'\n              },\n              value: this.state.ccv,\n              onChange: e => {\n                const value = e.target.value;\n                if (!isNumber(value) && value.length) return;\n                if (value.length <= 4) this.setState({\n                  ccv: value\n                });\n              },\n              id: styles.inputPaymentPanel_ADD\n            })]\n          }), this.state.errorMessage && /*#__PURE__*/_jsx(\"p\", {\n            className: styles.em,\n            style: {\n              textAlign: 'initial'\n            },\n            children: this.state.errorMessage\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            marginTop: '20px',\n            marginBottom: '150px',\n            marginLeft: '2.5%',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.RED\n            },\n            id: styles.buttonBottom,\n            onClick: () => {\n              this.setState({\n                buyKilometers: false,\n                addCard: false,\n                errorMessage: ''\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Cancel\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.GREEN\n            },\n            id: styles.buttonBottom,\n            onClick: () => {\n              if (this.state.name.length <= 3) this.setState({\n                errorMessage: 'Please enter the full name on the card'\n              });else this.createTokenWithCard();\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Add Card\"\n            })\n          })]\n        })]\n      }) :\n      /*#__PURE__*/\n      //main page\n      _jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"Kilometers\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.GREY\n            },\n            children: \"You can make kilometer purchases from this panel. Also remeber that sharing your code with friends who book their first ride automatically gives you free kilometers.\"\n          }), /*#__PURE__*/_jsx(\"img\", {\n            src: \"/walletImage.svg\",\n            alt: \"Purchase Perch Kilometers\",\n            className: styles.walletImage\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              width: 'initial',\n              marginTop: '20px'\n            },\n            children: `${this.state.quantity.toFixed(1)} kilometers`\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button1,\n            style: {},\n            onClick: () => {\n              this.setState({\n                buyKilometers: true,\n                addCard: false,\n                errorMessage: ''\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Buy kilometers\"\n            })\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px',\n            marginBottom: '150px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"Payment Methods\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.GREY,\n              marginBottom: '20px'\n            },\n            children: \"List of available payment methods. New payment methods can also be added.\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.paymentCont,\n            children: /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.paymentItem,\n              children: [cards, /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.paymentRow,\n                id: styles.addCardPayment,\n                onClick: () => {\n                  this.setState({\n                    addCard: true,\n                    buyKilometers: false,\n                    errorMessage: ''\n                  });\n                },\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  style: {\n                    flexDirection: 'row',\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"img\", {\n                    src: \"/addPaymentCardIcon.svg\",\n                    alt: \"Perch Payment\",\n                    className: styles.visaIcon,\n                    style: {\n                      marginRight: '15px'\n                    }\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.paymentCardNumber,\n                    id: styles.paymentCardNumber_,\n                    children: \"Add Debit / Credit Card\"\n                  })]\n                }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                  color: colors.BLACK\n                })]\n              })]\n            })\n          })]\n        })]\n      })\n    });\n  }\n\n}\n;\n\nclass PaymentCard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      deleteCard: false,\n      loading: false\n    };\n  }\n\n  render() {\n    const {\n      selected,\n      setSelected,\n      card,\n      userID,\n      removeCard,\n      index,\n      selectedCard\n    } = this.props;\n    const {\n      last4,\n      brand\n    } = card;\n    if (this.props.type == 'listOfCards') return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.paymentRow,\n        id: styles.paymentRow_,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            flexDirection: 'row',\n            display: 'flex',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsx(\"img\", {\n            src: brand == 'Visa' ? \"/visaIcon.svg\" : brand == 'Mastercard' ? '/mastercardIcon.svg' : '/addPaymentCardIcon.svg',\n            alt: \"Perch Payment\",\n            className: brand == 'Visa' ? styles.visaIcon : brand == 'Mastercard' ? styles.masterCardIcon : styles.genericCard\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.paymentCardNumber,\n            id: styles.paymentCardNumber_,\n            children: [\"XXXX XXXX XXXX \", last4]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          id: styles.paymentRowButton,\n          children: this.state.deleteCard ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.RED,\n                width: '80%'\n              },\n              onClick: () => {\n                deleteCard.call(this, userID, last4, selectedCard);\n                removeCard(index);\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                id: styles.paymentCardNumber_,\n                children: \"Delete this card?\"\n              })\n            }), /*#__PURE__*/_jsx(AiOutlineClose, {\n              className: styles.closeDeletePayment,\n              onClick: () => {\n                this.setState({\n                  deleteCard: false\n                });\n              }\n            })]\n          }) : /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: selected ? styles.buttonSelected : styles.button2,\n              style: {\n                backgroundColor: colors.GREEN\n              },\n              onClick: () => {\n                setSelected(last4);\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                id: styles.paymentCardNumber_,\n                children: selected ? 'Selected' : 'Select card'\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.RED\n              },\n              onClick: () => {\n                this.setState({\n                  deleteCard: true\n                });\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                id: styles.paymentCardNumber_,\n                children: \"Delete Card\"\n              })\n            })]\n          })\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.sharedLine,\n        style: {\n          marginTop: '20px',\n          width: '100%'\n        }\n      })]\n    });else if (this.props.type == 'pickPayment') return (\n      /*#__PURE__*/\n      //TO MAKE A SELECTED ONE, THE PARENT COMPONENT SHOULD HAVE A SELECTED ITEM ID AND WE COMPARE ID HERE TO SHOW IF IT IS CONFIRMED OR NOT\n      _jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.paymentRow,\n          id: styles.addCardPayment,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              flexDirection: 'row',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/visaIcon.svg\",\n              alt: \"Perch Payment\",\n              className: styles.visaIcon\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.paymentCardNumber,\n              id: styles.paymentCardNumber_,\n              children: \"\\u2022\\u2022\\u2022\\u2022 3456\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.pickPaymentSelected,\n            style: {\n              backgroundColor: colors.GREEN,\n              opacity: 0.6\n            },\n            onClick: () => {\n              this.setState({\n                deleteCard: true\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              id: styles.paymentCardNumber_,\n              children: \"Selected\"\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine,\n          style: {\n            marginTop: '0px',\n            width: '100%'\n          }\n        })]\n      })\n    );\n  }\n\n}\n\n;","map":{"version":3,"sources":["/Users/ugo/Documents/Perch_Projects/Perch-Website/functions/panels/userPanels/perchWallet.js"],"names":["React","AiOutlineClose","AiOutlineRight","colors","isNumber","deleteCard","stripe","styles","firebase","loadStripe","PerchWallet","Component","constructor","props","userID","state","userDetails","database","ref","once","snapshot","arrayOfLast4","i","key","val","last4","card","brand","setState","selected","cards","value","update","then","catch","error","errorMessage","message","index","splice","loading","createTokenWithCard","number","formatCard","cardNumber","expMonth","Number","expiryDate","substring","expYear","cvc","ccv","name","token","buyKilometers","addCard","quantity","componentDidMount","on","loadCards","formattedCard","render","length","push","removeCard","setSelected","cont","container","backgroundColor","WHITE","marginTop","title","color","BLACK","inputPaymentPanel","enterKilometerDiv","width","margin","fontFamily","GREY","text","sharedLine","fontSize","GREEN","marginBottom","paymentCont","paymentItem","paymentRow","addCardPayment","flexDirection","display","alignItems","visaIcon","marginRight","marginLeft","paymentCardNumber","paymentCardNumber_","button2","RED","buttonBottom","buttonText1","inputPaymentPanel_ADD","e","target","replace","em","textAlign","walletImage","toFixed","button1","PaymentCard","selectedCard","type","paymentRow_","masterCardIcon","genericCard","paymentRowButton","call","closeDeletePayment","buttonSelected","pickPaymentSelected","opacity"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineClose, AiOutlineRight } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors, isNumber, deleteCard, stripe } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport { loadStripe } from '@stripe/stripe-js';\n\n\nexport default class PerchWallet extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            buyKilometers: false,\n            addCard: false,\n            userDetails: this.props.userDetails,\n            quantity: 0,\n            cards: [],\n            selected: null,\n\n            name: '',\n            cardNumber: '',\n            expiryDate: '',\n            ccv: '',\n            errorMessage: '',\n\n\n            loading: false,\n        };\n    };\n    componentDidMount() {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`perchKilometers/${userID}/quantity`).on('value', snapshot => {\n            if (!!snapshot)\n                this.setState({ quantity: snapshot.val() });\n        })\n        this.loadCards();\n    };\n    loadCards = () => {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`cards/${userID}`).once('value', snapshot => {\n            if (!!snapshot) {\n                let arrayOfLast4 = [], i = 0;\n                for (let key in snapshot.val()) {\n                    if (key != 'selected')\n                        arrayOfLast4[i] = {\n                            last4: snapshot.val()[key].card.last4,\n                            brand: snapshot.val()[key].card.brand,\n                        };\n                    else if (key == 'selected')\n                        this.setState({ selected: snapshot.val()[key] })\n                    i++;\n                }\n                this.setState({ cards: arrayOfLast4 });\n            }\n        })\n    };\n    setSelected = (value) => {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`cards/${userID}`).update({\n            selected: value\n        }).then(() => {\n            this.setState({ selected: value })\n        }).catch(error => { this.setState({ errorMessage: error.message }) })\n    }\n    removeCard = (index) => {\n        let { cards } = this.state;\n        cards.splice(index, 1);\n        this.setState({ cards: cards })\n    };\n    createTokenWithCard = () => {\n        loadStripe('pk_test_A7jK4iCYHL045qgjjfzAfPxu')\n            .then(stripe => {\n                this.setState({ loading: true }, () => {\n                    stripe.createTokenWithCard({\n                        number: this.formatCard(this.state.cardNumber),\n                        expMonth: Number(this.state.expiryDate.substring(0, 2)),\n                        expYear: Number(this.state.expiryDate.substring(5, 7)),\n                        cvc: (this.state.ccv),\n                        name: this.state.name,\n\n                    }).then(token => {\n                        this.setState({ errorMessage: token, loading: false })\n                        //storeCard.call(this, this.state.userID, token);\n                    }).catch(error => {\n                        this.setState({ loading: false, errorMessage: error.message });\n                    });\n                });\n            }).catch(error => {\n                this.setState({ loading: false, errorMessage: error.message });\n            })\n    }\n    formatCard(card) {\n        const formattedCard = card.substring(0, 4) + card.substring(5, 9) + card.substring(10, 14) + card.substring(15, 19);\n        return (formattedCard);\n    }\n    render() {\n        let cards = [];\n        for (let i = 0; i < this.state.cards.length; i++)\n            cards.push(\n                <PaymentCard\n                    userID={this.state.userDetails.userID}\n                    key={this.state.cards[i].last4}\n                    card={this.state.cards[i]}\n                    index={i}\n                    removeCard={this.removeCard}\n                    setSelected={this.setSelected}\n                    selectedCard={this.state.selected}\n                    selected={this.state.selected === this.state.cards[i].last4}\n                    type={this.state.buyKilometers ? 'pickPayment' : 'listOfCards'} />\n            );\n        return (\n            <div className={styles.cont}>\n                {\n                    this.state.buyKilometers ?//buy kilometers\n                        <>\n                            <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                <p className={styles.title} style={{ color: colors.BLACK }}>Enter the amount of kilometers you would like to purchase</p>\n                                <input type=\"text\" placeholder=\"Enter amount of kilometers\" className={styles.inputPaymentPanel} />\n                                <div className={styles.enterKilometerDiv} style={{ marginTop: '20px' }}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Cost per kilometer</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Total cost of kilometers</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Taxes</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 1.99`}</p>\n                                </div>\n                                <div className={styles.sharedLine} style={{ marginTop: '20px', width: '90%' }}></div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Bold', fontSize: '120%' }} className={styles.text}>Total</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Bold', color: colors.GREEN, fontSize: '120%' }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n\n                            </div>\n\n                            <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px', }}>\n                                <p className={styles.title} style={{ color: colors.BLACK }}>\n                                    Payment Methods\n                                </p>\n                                <p className={styles.text} style={{ color: colors.GREY, marginBottom: '20px' }}>\n                                    List of available payment methods. New payment methods can also be added.\n                                </p>\n\n                                <div className={styles.paymentCont}>\n                                    <div className={styles.paymentItem}>\n                                        {cards}\n                                        <div className={styles.paymentRow} id={styles.addCardPayment}>\n                                            <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                <img src=\"/PayPalLogo.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px', marginLeft: '0px' }} />\n                                                <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>PayPal</p>\n                                            </div>\n                                            <AiOutlineRight color={colors.BLACK} />\n                                        </div>\n                                        <div className={styles.sharedLine} style={{ marginTop: '0px', width: '100%' }}></div>\n                                        <div className={styles.paymentRow} id={styles.addCardPayment} onClick={() => { this.setState({ addCard: true, buyKilometers: false, errorMessage: '' }) }}>\n                                            <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                <img src=\"/addPaymentCardIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px' }} />\n                                                <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>Add Debit / Credit Card</p>\n                                            </div>\n                                            <AiOutlineRight color={colors.BLACK} />\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n\n                            <div className={styles.enterKilometerDiv} style={{ marginTop: '20px', marginBottom: '150px', marginLeft: '2.5%', width: '95%' }}>\n                                <div className={styles.button2} style={{ backgroundColor: colors.RED }} id={styles.buttonBottom} onClick={() => { this.setState({ buyKilometers: false, addCard: false, errorMessage: '' }) }}>\n                                    <p className={styles.buttonText1}>Cancel</p>\n                                </div>\n                                <div className={styles.button2} style={{ backgroundColor: colors.GREEN }} id={styles.buttonBottom}>\n                                    <p className={styles.buttonText1}>Buy Kilometers</p>\n                                </div>\n                            </div>\n                        </> :\n                        this.state.addCard ?//add card\n                            <>\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>Add card</p>\n                                    <input type=\"text\"\n                                        placeholder=\"Name on Card\"\n                                        className={styles.inputPaymentPanel}\n                                        id={styles.inputPaymentPanel_ADD}\n                                        style={{ marginTop: '10px' }}\n                                        value={this.state.name}\n                                        onChange={(e) => {\n                                            const value = e.target.value;\n                                            this.setState({ name: value });\n                                        }}\n                                    />\n                                    <input\n                                        type=\"text\"\n                                        placeholder=\"Card Number\"\n                                        value={this.state.cardNumber}\n                                        onChange={(e) => {\n                                            const value = e.target.value;\n                                            if (!isNumber(value.replace(/\\s/g, '')) && value.length) return;\n                                            let cardNumber = value;\n                                            if (cardNumber[cardNumber.length - 1] !== ' ') {\n\n                                                if (cardNumber.length >= 5 && cardNumber[4] !== ' ')\n                                                    cardNumber = cardNumber.substring(0, 4) + ' ' + cardNumber.substring(4, cardNumber.length);\n                                                if (cardNumber.length >= 10 && cardNumber[9] !== ' ')\n                                                    cardNumber = cardNumber.substring(0, 9) + ' ' + cardNumber.substring(9, cardNumber.length);\n                                                if (cardNumber.length >= 15 && cardNumber[14] !== ' ')\n                                                    cardNumber = cardNumber.substring(0, 14) + ' ' + cardNumber.substring(14, cardNumber.length);\n\n                                            }\n\n                                            // if (cardNumber[cardNumber.length] !== ' ') {\n\n\n                                            if (cardNumber.length <= 19)\n                                                this.setState({ cardNumber: cardNumber })\n                                        }}\n                                        className={styles.inputPaymentPanel}\n                                        id={styles.inputPaymentPanel_ADD}\n                                        style={{ marginTop: '10px' }} />\n                                    <div className={styles.enterKilometerDiv} style={{ marginTop: '10px', marginBottom: '10px' }}>\n                                        <input type=\"text\"\n                                            placeholder={\"Expiry Date (MM/YYYY)\"}\n                                            className={styles.inputPaymentPanel}\n                                            style={{ width: '70%', margin: '0px' }}\n                                            id={styles.inputPaymentPanel_ADD}\n                                            value={this.state.expiryDate}\n                                            onChange={(e) => {\n                                                const value = e.target.value;\n                                                if (!isNumber(value.replace(/\\//g, \"\")) && value.length) return;\n                                                let expiryDate = value;\n\n                                                if (expiryDate.length >= 3 && expiryDate[2] !== '/')\n                                                    expiryDate = expiryDate.substring(0, 2) + '/' + expiryDate.substring(2, expiryDate.length);\n\n                                                if (expiryDate.length <= 7)\n                                                    this.setState({ expiryDate: expiryDate })\n                                            }}\n                                        />\n                                        <input\n                                            type=\"text\"\n                                            placeholder=\"CCV\"\n                                            className={styles.inputPaymentPanel}\n                                            style={{ width: '28%', margin: '0px' }}\n                                            value={this.state.ccv}\n                                            onChange={(e) => {\n                                                const value = e.target.value;\n                                                if (!isNumber(value) && value.length) return;\n                                                if (value.length <= 4)\n                                                    this.setState({ ccv: value })\n                                            }}\n                                            id={styles.inputPaymentPanel_ADD} />\n                                    </div>\n                                    {this.state.errorMessage && <p className={styles.em} style={{ textAlign: 'initial' }}>{this.state.errorMessage}</p>}\n                                </div>\n                                <div className={styles.enterKilometerDiv} style={{ marginTop: '20px', marginBottom: '150px', marginLeft: '2.5%', width: '95%' }}>\n                                    <div className={styles.button2} style={{ backgroundColor: colors.RED }} id={styles.buttonBottom} onClick={() => { this.setState({ buyKilometers: false, addCard: false, errorMessage: '' }) }}>\n                                        <p className={styles.buttonText1}>Cancel</p>\n                                    </div>\n                                    <div\n                                        className={styles.button2}\n                                        style={{ backgroundColor: colors.GREEN }}\n                                        id={styles.buttonBottom}\n                                        onClick={() => {\n                                            if (this.state.name.length <= 3)\n                                                this.setState({ errorMessage: 'Please enter the full name on the card' })\n                                            else\n                                                this.createTokenWithCard();\n                                        }}\n\n                                    >\n                                        <p className={styles.buttonText1}>Add Card</p>\n                                    </div>\n                                </div>\n\n                            </> ://main page\n                            <>\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>Kilometers</p>\n                                    <p className={styles.text} style={{ color: colors.GREY }}>\n                                        You can make kilometer purchases from this panel. Also remeber that sharing your code with friends who book their first ride automatically gives you free kilometers.\n                                    </p>\n                                    <img src=\"/walletImage.svg\" alt=\"Purchase Perch Kilometers\" className={styles.walletImage} />\n                                    <p className={styles.title} style={{ width: 'initial', marginTop: '20px' }}>{`${this.state.quantity.toFixed(1)} kilometers`}</p>\n                                    <div className={styles.button1} style={{}} onClick={() => { this.setState({ buyKilometers: true, addCard: false, errorMessage: '' }) }}>\n                                        <p className={styles.buttonText1}>Buy kilometers</p>\n                                    </div>\n                                </div>\n\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px', marginBottom: '150px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>\n                                        Payment Methods\n                                    </p>\n                                    <p className={styles.text} style={{ color: colors.GREY, marginBottom: '20px' }}>\n                                        List of available payment methods. New payment methods can also be added.\n                                    </p>\n\n                                    <div className={styles.paymentCont}>\n                                        <div className={styles.paymentItem}>\n                                            {cards}\n                                            <div className={styles.paymentRow} id={styles.addCardPayment} onClick={() => { this.setState({ addCard: true, buyKilometers: false, errorMessage: '' }) }}>\n                                                <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                    <img src=\"/addPaymentCardIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px' }} />\n                                                    <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>Add Debit / Credit Card</p>\n                                                </div>\n                                                <AiOutlineRight color={colors.BLACK} />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </>\n                }\n            </div >\n        )\n\n    }\n};\n\nclass PaymentCard extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            deleteCard: false,\n            loading: false,\n        }\n    }\n    render() {\n        const { selected, setSelected, card, userID, removeCard, index, selectedCard } = this.props;\n        const { last4, brand } = card;\n        if (this.props.type == 'listOfCards')\n            return (\n\n                <>\n                    <div className={styles.paymentRow} id={styles.paymentRow_}>\n                        <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                            <img\n                                src={brand == 'Visa' ? \"/visaIcon.svg\" : brand == 'Mastercard' ? '/mastercardIcon.svg' : '/addPaymentCardIcon.svg'} alt=\"Perch Payment\"\n                                className={brand == 'Visa' ? styles.visaIcon : brand == 'Mastercard' ? styles.masterCardIcon : styles.genericCard} />\n                            <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>XXXX XXXX XXXX {last4}</p>\n                        </div>\n                        <div id={styles.paymentRowButton}>\n                            {\n                                this.state.deleteCard ?\n                                    <>\n                                        <div className={styles.button2} style={{ backgroundColor: colors.RED, width: '80%' }}\n                                            onClick={() => {\n                                                deleteCard.call(this, userID, last4, selectedCard);\n                                                removeCard(index);\n                                            }}\n                                        >\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Delete this card?</p>\n                                        </div>\n                                        <AiOutlineClose className={styles.closeDeletePayment} onClick={() => { this.setState({ deleteCard: false }) }} />\n                                    </> :\n                                    <>\n                                        <div\n                                            className={selected ? styles.buttonSelected : styles.button2}\n                                            style={{ backgroundColor: colors.GREEN }}\n                                            onClick={() => {\n                                                setSelected(last4)\n                                            }}>\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>{selected ? 'Selected' : 'Select card'}</p>\n                                        </div>\n                                        <div className={styles.button2} style={{ backgroundColor: colors.RED }} onClick={() => { this.setState({ deleteCard: true }) }}>\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Delete Card</p>\n                                        </div>\n                                    </>}\n                        </div>\n                    </div>\n                    <div className={styles.sharedLine} style={{ marginTop: '20px', width: '100%' }}></div>\n                </>\n\n\n\n            );\n        else if (this.props.type == 'pickPayment')\n            return (//TO MAKE A SELECTED ONE, THE PARENT COMPONENT SHOULD HAVE A SELECTED ITEM ID AND WE COMPARE ID HERE TO SHOW IF IT IS CONFIRMED OR NOT\n                <>\n                    <div className={styles.paymentRow} id={styles.addCardPayment} >\n                        <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                            <img src=\"/visaIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} />\n                            <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>•••• 3456</p>\n                        </div>\n                        <div className={styles.pickPaymentSelected} style={{ backgroundColor: colors.GREEN, opacity: 0.6 }} onClick={() => { this.setState({ deleteCard: true }) }}>\n                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Selected</p>\n                        </div>\n                    </div>\n                    <div className={styles.sharedLine} style={{ marginTop: '0px', width: '100%' }}></div>\n                </>\n            );\n    }\n};"]},"metadata":{},"sourceType":"module"}