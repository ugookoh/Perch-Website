{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiFillStar } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { adminDeleteUser, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport Loader from 'react-loader-spinner';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default class ListOfRiders extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"loadResult\", () => {\n      if (this.state.idSearch.length <= 5) alert('Enter the full user ID for search');else this.setState({\n        loading: true\n      }, () => {\n        firebase.database().ref(`users/${this.state.idSearch}`).once('value', snapshot => {\n          const user = snapshot === null || snapshot === void 0 ? void 0 : snapshot.val();\n\n          if (!!user) {\n            firebase.database().ref(`analytics/allTimeAnalytics/user/${user.userID}`).once('value', analytics => {\n              this.setState({\n                result: user,\n                loading: false,\n                analytics: analytics.val()\n              });\n            });\n          } else this.setState({\n            result: null,\n            loading: false\n          }, () => {\n            alert('User not found');\n          });\n        });\n      });\n    });\n\n    this.state = {\n      idSearch: '',\n      result: null,\n      loading: false,\n      loading1: false,\n      deleteUser: false,\n      analytics: {}\n    };\n  }\n\n  componentDidMount() {}\n\n  rendervalid(x) {\n    if (x) return x;else return 0;\n  }\n\n  render() {\n    var _result$summarizedHis, _result$summarizedHis2, _result$summarizedHis3, _result$summarizedHis4, _analytics$cancelledT, _analytics$cancelledT2;\n\n    const {\n      analytics,\n      result\n    } = this.state;\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px'\n        },\n        children: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK\n            },\n            children: \"List of Users\"\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              width: '90%',\n              display: 'flex',\n              flexDirection: 'row',\n              justifyContent: 'space-between',\n              marginBottom: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"Search by userID\",\n              className: styles.searchInput,\n              style: {\n                width: '48%'\n              },\n              value: this.state.idSearch,\n              onChange: event => {\n                this.setState({\n                  idSearch: event.target.value\n                });\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.searchButton,\n              onClick: () => {\n                this.loadResult();\n              },\n              children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n                type: \"TailSpin\",\n                color: colors.WHITE,\n                height: '20px',\n                width: '20px'\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: styles.searchButtonText,\n                children: \"Search\"\n              })\n            })]\n          })]\n        })\n      }), this.state.result && /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: /*#__PURE__*/_jsxs(_Fragment, {\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: `${this.state.result.firstName} ${this.state.result.lastName} Summary`\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.driverDashboardCont,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.driverDashboard_TE,\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  style: {\n                    alignItems: 'flex-start',\n                    marginLeft: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Total spent\"\n                  }), /*#__PURE__*/_jsxs(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      color: colors.GREEN\n                    },\n                    children: [\"$ \", this.rendervalid(analytics === null || analytics === void 0 ? void 0 : analytics.totalSpent).toFixed(2)]\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.sharedLine,\n                style: {\n                  width: '95%',\n                  backgroundColor: 'rgba(112, 112, 112, 0.19)'\n                }\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.driverDashboard_TE,\n                style: {\n                  marginBottom: '15px'\n                },\n                children: [/*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  style: {\n                    marginLeft: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Completed trips\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    children: this.rendervalid(result === null || result === void 0 ? void 0 : (_result$summarizedHis = result.summarizedHistory) === null || _result$summarizedHis === void 0 ? void 0 : (_result$summarizedHis2 = _result$summarizedHis.carpool) === null || _result$summarizedHis2 === void 0 ? void 0 : _result$summarizedHis2.displayTripNumber)\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Average rating\"\n                  }), /*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      display: 'flex',\n                      flexDirection: 'row',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"p\", {\n                      className: styles.driverDashboard_BOXTEXT,\n                      children: this.rendervalid(result === null || result === void 0 ? void 0 : (_result$summarizedHis3 = result.summarizedHistory) === null || _result$summarizedHis3 === void 0 ? void 0 : (_result$summarizedHis4 = _result$summarizedHis3.carpool) === null || _result$summarizedHis4 === void 0 ? void 0 : _result$summarizedHis4.rating)\n                    }), /*#__PURE__*/_jsx(AiFillStar, {\n                      size: '15px',\n                      style: {\n                        marginLeft: '5px'\n                      }\n                    })]\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Driver cancellations\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      color: colors.RED\n                    },\n                    children: this.rendervalid(analytics === null || analytics === void 0 ? void 0 : (_analytics$cancelledT = analytics.cancelledTrips) === null || _analytics$cancelledT === void 0 ? void 0 : _analytics$cancelledT.cancelledOn)\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Rider cancellations\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      color: colors.RED\n                    },\n                    children: this.rendervalid(analytics === null || analytics === void 0 ? void 0 : (_analytics$cancelledT2 = analytics.cancelledTrips) === null || _analytics$cancelledT2 === void 0 ? void 0 : _analytics$cancelledT2.cancelled)\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  style: {\n                    marginRight: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"No Trip\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      color: colors.RED\n                    },\n                    children: this.rendervalid(analytics === null || analytics === void 0 ? void 0 : analytics.noTrip)\n                  })]\n                })]\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.driverDashboardCont,\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.driverDashboard_TE,\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  style: {\n                    alignItems: 'flex-start',\n                    marginLeft: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Email Address\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      color: colors.GREEN,\n                      fontSize: '130%',\n                      fontFamily: 'Gilroy-Bold'\n                    },\n                    children: this.state.result.email\n                  })]\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.sharedLine,\n                style: {\n                  width: '95%',\n                  backgroundColor: 'rgba(112, 112, 112, 0.19)'\n                }\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.driverDashboard_TE,\n                style: {\n                  marginBottom: '15px'\n                },\n                children: /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.driverDashboard_BOX,\n                  style: {\n                    marginLeft: '0px'\n                  },\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTITLE,\n                    children: \"Phone number\"\n                  }), /*#__PURE__*/_jsx(\"p\", {\n                    className: styles.driverDashboard_BOXTEXT,\n                    style: {\n                      fontSize: '130%',\n                      fontFamily: 'Gilroy-Bold'\n                    },\n                    children: this.state.result.phoneNumber\n                  })]\n                })\n              })]\n            })]\n          })\n        }), this.state.deleteUser ? /*#__PURE__*/_jsxs(\"div\", {\n          style: {\n            width: '95%',\n            marginLeft: '2.5%',\n            marginRight: '2.5%',\n            marginBottom: '150px',\n            justifyContent: 'space-between',\n            flexDirection: 'row',\n            display: 'flex'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.searchButton,\n            style: {\n              width: '49%'\n            },\n            onClick: () => {\n              this.setState({\n                deleteUser: false\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.searchButtonText,\n              children: \"Cancel\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.searchButton,\n            style: {\n              width: '49%',\n              backgroundColor: colors.RED,\n              paddingRight: 5,\n              paddingLeft: 5\n            },\n            onClick: () => {\n              adminDeleteUser.call(this, result);\n            },\n            children: this.state.loading1 ? /*#__PURE__*/_jsx(Loader, {\n              type: \"TailSpin\",\n              color: colors.WHITE,\n              height: '20px',\n              width: '20px'\n            }) : /*#__PURE__*/_jsx(\"p\", {\n              className: styles.searchButtonText,\n              style: {\n                textAlign: 'center'\n              },\n              children: \"Are you sure you want to delete this user?\"\n            })\n          })]\n        }) : /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            width: '95%',\n            marginLeft: '2.5%',\n            marginRight: '2.5%',\n            backgroundColor: colors.RED,\n            height: '45px',\n            marginBottom: '150px'\n          },\n          className: styles.searchButton,\n          onClick: () => {\n            this.setState({\n              deleteUser: true\n            });\n          },\n          children: this.state.loading1 ? /*#__PURE__*/_jsx(Loader, {\n            type: \"TailSpin\",\n            color: colors.WHITE,\n            height: '20px',\n            width: '20px'\n          }) : /*#__PURE__*/_jsx(\"p\", {\n            className: styles.searchButtonText,\n            children: \"Delete User\"\n          })\n        })]\n      })]\n    });\n  }\n\n}\n;","map":null,"metadata":{},"sourceType":"module"}