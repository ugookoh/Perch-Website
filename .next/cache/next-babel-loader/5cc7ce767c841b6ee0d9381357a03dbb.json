{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BsDot } from 'react-icons/bs';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { dateformat, sendFeedback, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar ContactUs = /*#__PURE__*/function (_React$Component) {\n  _inherits(ContactUs, _React$Component);\n\n  var _super = _createSuper(ContactUs);\n\n  function ContactUs(props) {\n    var _this;\n\n    _classCallCheck(this, ContactUs);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        var ref = _this.props.type == 'Driver' ? \"driverFeedback/\".concat(_this.state.userDetails.driverID) : \"userFeedback/\".concat(_this.state.userDetails.userID);\n        firebase.database().ref(ref).once('value', function (snapshot) {\n          _this.setState({\n            result: snapshot.val() ? snapshot.val() : null\n          });\n        })[\"catch\"](function (error) {\n          console.log(error.message);\n        });\n      }\n    });\n\n    _this.state = {\n      topic: 'unselected',\n      message: '',\n      loading: false,\n      showMessage: false,\n      userDetails: _this.props.userDetails,\n      result: null,\n      messageObj: null,\n      errorMessage: ''\n    };\n    return _this;\n  }\n\n  _createClass(ContactUs, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var results = [];\n\n      if (this.state.result) {\n        (function () {\n          var keys = Object.keys(_this2.state.result).sort(function (a, b) {\n            return b - a;\n          });\n\n          var _loop = function _loop(k) {\n            results.push( /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: styles.previousMessageSum,\n                onClick: function onClick() {\n                  _this2.setState({\n                    messageObj: _this2.state.result[keys[k]],\n                    showMessage: true\n                  });\n                },\n                children: [/*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%'\n                  },\n                  children: _this2.state.result[keys[k]].subject\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.previousMessageDate,\n                  children: [/*#__PURE__*/_jsx(\"p\", {\n                    style: {\n                      fontFamily: 'Gilroy-Semibold',\n                      fontSize: '75%',\n                      marginRight: '-10px',\n                      paddingLeft: '10px'\n                    },\n                    children: dateformat(_this2.state.result[keys[k]].date)\n                  }), /*#__PURE__*/_jsx(BsDot, {\n                    size: '55px',\n                    color: _this2.state.result[keys[k]].status == 'PROCESSED' ? _this2.props.type == 'Driver' ? BLUE : colors.GREEN : RED\n                  })]\n                })]\n              }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n                className: styles.sharedLine,\n                style: {\n                  marginTop: '5px'\n                }\n              })]\n            }));\n          };\n\n          for (var k = 0; k < keys.length; k++) {\n            _loop(k);\n          }\n        })();\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles.cont,\n        children: this.state.showMessage ? /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: BLACK,\n                marginBottom: '30px'\n              },\n              children: this.state.messageObj.subject\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.previousMessageC,\n              style: {\n                alignItems: 'flex-end'\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.previousMessageCol,\n                style: {\n                  backgroundColor: this.props.type == 'Driver' ? BLUE : colors.GREEN\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%',\n                    color: colors.WHITE,\n                    lineHeight: '150%',\n                    paddingRight: '10px',\n                    paddingLeft: '10px'\n                  },\n                  children: this.state.messageObj.body\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%'\n                },\n                children: dateformat(this.state.messageObj.date)\n              })]\n            }), this.state.messageObj.status == 'PROCESSED' ? /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.previousMessageC,\n              style: {\n                alignItems: 'flex-start'\n              },\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.previousMessageCol,\n                style: {\n                  backgroundColor: 'rgba(145, 134, 134, 0.5)'\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  style: {\n                    fontSize: '95%',\n                    color: BLACK,\n                    lineHeight: '150%',\n                    paddingRight: '10px',\n                    paddingLeft: '10px'\n                  },\n                  children: this.state.messageObj.response\n                })\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%'\n                },\n                children: dateformat(this.state.messageObj.responseDate)\n              })]\n            }) : /*#__PURE__*/_jsx(_Fragment, {})]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.contactUsLC,\n            style: {\n              marginTop: '15px',\n              marginBottom: '100px'\n            },\n            children: [/*#__PURE__*/_jsx(\"a\", {\n              className: styles.button1,\n              id: styles.sendMessageContactUS,\n              style: this.props.type == 'Driver' ? {\n                backgroundColor: BLUE\n              } : {},\n              onClick: function onClick() {\n                _this2.setState({\n                  showMessage: false\n                });\n              },\n              children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n                type: \"TailSpin\",\n                color: colors.WHITE,\n                height: '20px',\n                width: '20px'\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Back\"\n              })\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.contactUsLasttext,\n              children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? \"Driver\" : '', \" app\"]\n            })]\n          })]\n        }) : /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: BLACK\n              },\n              children: \"Contact us form\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: GREY\n              },\n              children: \"Feel free to contact us about issues with your ride or about feeback on how we can better our services.\"\n            }), /*#__PURE__*/_jsxs(\"select\", {\n              value: this.state.topic,\n              className: styles.selectTopic,\n              onChange: function onChange(v) {\n                _this2.setState({\n                  topic: v.target.value\n                });\n              },\n              style: this.state.topic === 'unselected' ? {\n                color: 'rgba(112, 112, 112, 0.7)'\n              } : {},\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"unselected\",\n                children: \"(--Select a topic--)\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Give feedback about our services\",\n                children: \"Give feedback about our services\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Missing item\",\n                children: \"Missing item\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Change your name\",\n                children: \"Change your name\"\n              }), this.props.type == 'Driver' ? /*#__PURE__*/_jsx(\"option\", {\n                value: \"Report a rider\",\n                children: \"Report a rider\"\n              }) : /*#__PURE__*/_jsxs(_Fragment, {\n                children: [/*#__PURE__*/_jsx(\"option\", {\n                  value: \"Report a driver\",\n                  children: \"Report a driver\"\n                }), /*#__PURE__*/_jsx(\"option\", {\n                  value: \"Work with us\",\n                  children: \"Work with us\"\n                })]\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Report a bug\",\n                children: \"Report a rider\"\n              }), /*#__PURE__*/_jsx(\"option\", {\n                value: \"Other\",\n                children: \"Other\"\n              })]\n            }), /*#__PURE__*/_jsx(\"textarea\", {\n              type: \"text\",\n              placeholder: \"Enter your message here\",\n              className: styles.contactUsContent,\n              value: this.state.message,\n              onChange: function onChange(event) {\n                _this2.setState({\n                  message: event.target.value\n                });\n              }\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.em,\n              style: {\n                textAlign: 'initial'\n              },\n              children: this.state.errorMessage\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.contactUsLC,\n            style: {\n              marginTop: '15px',\n              marginBottom: this.state.result ? '0px' : '150px'\n            },\n            children: [/*#__PURE__*/_jsx(\"a\", {\n              className: styles.button1,\n              id: styles.sendMessageContactUS,\n              style: this.props.type == 'Driver' ? {\n                backgroundColor: BLUE\n              } : {},\n              onClick: function onClick() {\n                if (!_this2.state.loading) sendFeedback.call(_this2);\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Send Message\"\n              })\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.contactUsLasttext,\n              children: [\"We respond to your queries via the Perch \", this.props.type == 'Driver' ? \"Driver\" : '', \" app\"]\n            })]\n          }), this.state.result ? /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px',\n              marginBottom: '150px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: BLACK\n              },\n              children: \"Previous messages\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: GREY,\n                marginBottom: '10px'\n              },\n              children: \"Here are some of your previous messages. Messages would be answered within 2-4 business days\"\n            }), results]\n          }) : /*#__PURE__*/_jsx(_Fragment, {})]\n        })\n      });\n    }\n  }]);\n\n  return ContactUs;\n}(React.Component);\n\nexport { ContactUs as default };\n;","map":{"version":3,"sources":["/Users/edokoh9/Documents/PerchWebsite/perch/functions/panels/userPanels/contactUs.js"],"names":["firebase","React","BsDot","Loader","dateformat","sendFeedback","colors","styles","ContactUs","props","state","userDetails","ref","type","driverID","userID","database","once","snapshot","setState","result","val","error","console","log","message","topic","loading","showMessage","messageObj","errorMessage","loadResult","results","keys","Object","sort","a","b","k","push","previousMessageSum","fontSize","subject","previousMessageDate","fontFamily","marginRight","paddingLeft","date","status","BLUE","GREEN","RED","length","sharedLine","marginTop","cont","container","backgroundColor","WHITE","title","color","BLACK","marginBottom","previousMessageC","alignItems","previousMessageCol","lineHeight","paddingRight","body","response","responseDate","contactUsLC","button1","sendMessageContactUS","buttonText1","contactUsLasttext","text","GREY","selectTopic","v","target","value","contactUsContent","event","em","textAlign","call","Component"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BsDot } from 'react-icons/bs';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport {\n    dateformat,\n    sendFeedback,\n    colors,\n} from '../../functions';\nimport styles from '../panel_layout.module.css';\n\n\nexport default class ContactUs extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            topic: 'unselected',\n            message: '',\n            loading: false,\n            showMessage: false,\n            userDetails: this.props.userDetails,\n            result: null,\n            messageObj: null,\n            errorMessage: '',\n        };\n    }\n    componentDidMount() {\n        this.loadResult();\n    }\n    loadResult = () => {\n        if (this.state.userDetails) {\n            const ref = this.props.type == 'Driver' ? `driverFeedback/${this.state.userDetails.driverID}` : `userFeedback/${this.state.userDetails.userID}`;\n            firebase.database().ref(ref).once('value', snapshot => {\n                this.setState({ result: snapshot.val() ? snapshot.val() : null });\n            }).catch(error => { console.log(error.message) });\n        }\n    };\n    render() {\n        if (!this.state.userDetails && this.props.userDetails)\n            this.setState({ userDetails: this.props.userDetails }, () => { this.loadResult(); });\n\n        let results = [];\n        if (this.state.result) {\n            const keys = Object.keys(this.state.result).sort((a, b) => b - a);\n            for (let k = 0; k < keys.length; k++)\n                results.push(\n                    <>\n                        <div className={styles.previousMessageSum} onClick={() => { this.setState({ messageObj: this.state.result[keys[k]], showMessage: true }) }}>\n                            <p style={{ fontSize: '95%' }}>{this.state.result[keys[k]].subject}</p>\n\n                            <div className={styles.previousMessageDate}>\n                                <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', marginRight: '-10px', paddingLeft: '10px' }}>{dateformat(this.state.result[keys[k]].date)}</p>\n                                <BsDot size={'55px'} color={this.state.result[keys[k]].status == 'PROCESSED' ? this.props.type == 'Driver' ? BLUE : colors.GREEN : RED} />\n                            </div>\n                        </div>\n                        {\n                            k == keys.length - 1 ?\n                                <></> :\n                                <div className={styles.sharedLine} style={{ marginTop: '5px' }}></div>\n                        }\n                    </>\n                )\n        }\n\n\n        return (\n            <div className={styles.cont}>\n                {this.state.showMessage ?\n                    <>\n                        <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                            <p className={styles.title} style={{ color: BLACK, marginBottom: '30px' }}>{this.state.messageObj.subject}</p>\n\n                            <div className={styles.previousMessageC} style={{ alignItems: 'flex-end' }}>\n                                <div className={styles.previousMessageCol} style={{ backgroundColor: this.props.type == 'Driver' ? BLUE : colors.GREEN }}>\n                                    <p style={{ fontSize: '95%', color: colors.WHITE, lineHeight: '150%', paddingRight: '10px', paddingLeft: '10px' }}>\n                                        {this.state.messageObj.body}\n                                    </p>\n                                </div>\n                                <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', }}>{dateformat(this.state.messageObj.date)}</p>\n                            </div>\n                            {this.state.messageObj.status == 'PROCESSED' ?\n                                <div className={styles.previousMessageC} style={{ alignItems: 'flex-start' }}>\n                                    <div className={styles.previousMessageCol} style={{ backgroundColor: 'rgba(145, 134, 134, 0.5)' }}>\n                                        <p style={{ fontSize: '95%', color: BLACK, lineHeight: '150%', paddingRight: '10px', paddingLeft: '10px' }}>\n                                            {this.state.messageObj.response}\n                                        </p>\n                                    </div>\n                                    <p style={{ fontFamily: 'Gilroy-Semibold', fontSize: '75%', }}>{dateformat(this.state.messageObj.responseDate)}</p>\n                                </div> : <></>}\n                        </div>\n\n                        <div className={styles.contactUsLC} style={{ marginTop: '15px', marginBottom: '100px' }}>\n                            <a className={styles.button1} id={styles.sendMessageContactUS} style={this.props.type == 'Driver' ? { backgroundColor: BLUE } : {}}\n                                onClick={() => {\n                                    this.setState({ showMessage: false })\n                                }}>\n                                {this.state.loading ?\n                                    <Loader\n                                        type=\"TailSpin\"\n                                        color={colors.WHITE}\n                                        height={'20px'}\n                                        width={'20px'} /> :\n                                    <p className={styles.buttonText1}>Back</p>}\n                            </a>\n                            <p className={styles.contactUsLasttext}>\n                                We respond to your queries via the Perch {this.props.type == 'Driver' ? `Driver` : ''} app\n                    </p>\n                        </div>\n\n                    </> :\n                    <>\n                        <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                            <p className={styles.title} style={{ color: BLACK }}>Contact us form</p>\n                            <p className={styles.text} style={{ color: GREY }}>\n                                Feel free to contact us about issues with your ride or about feeback on how we can better our services.\n                    </p>\n                            <select\n                                value={this.state.topic}\n                                className={styles.selectTopic}\n                                onChange={(v) => { this.setState({ topic: v.target.value }) }}\n                                style={this.state.topic === 'unselected' ? { color: 'rgba(112, 112, 112, 0.7)' } : {}}\n                            >\n                                <option value=\"unselected\">(--Select a topic--)</option>\n                                <option value=\"Give feedback about our services\">Give feedback about our services</option>\n                                <option value=\"Missing item\">Missing item</option>\n                                <option value=\"Change your name\">Change your name</option>\n                                {\n                                    this.props.type == 'Driver' ?\n                                        <option value=\"Report a rider\">Report a rider</option>\n                                        : <>\n                                            <option value=\"Report a driver\">Report a driver</option>\n                                            <option value=\"Work with us\">Work with us</option>\n                                        </>\n                                }\n                                <option value=\"Report a bug\">Report a rider</option>\n                                <option value=\"Other\">Other</option>\n                            </select>\n\n                            <textarea\n                                type=\"text\"\n                                placeholder=\"Enter your message here\"\n                                className={styles.contactUsContent}\n                                value={this.state.message}\n                                onChange={(event) => { this.setState({ message: event.target.value }); }} />\n                            <p className={styles.em} style={{ textAlign: 'initial' }}>{this.state.errorMessage}</p>\n                        </div>\n\n                        <div className={styles.contactUsLC} style={{ marginTop: '15px', marginBottom: this.state.result ? '0px' : '150px' }}>\n                            <a className={styles.button1} id={styles.sendMessageContactUS} style={this.props.type == 'Driver' ? { backgroundColor: BLUE } : {}}\n                                onClick={() => {\n                                    if (!this.state.loading)\n                                        sendFeedback.call(this);\n                                }}>\n                                <p className={styles.buttonText1}>Send Message</p>\n                            </a>\n                            <p className={styles.contactUsLasttext}>\n                                We respond to your queries via the Perch {this.props.type == 'Driver' ? `Driver` : ''} app\n                    </p>\n                        </div>\n\n                        {this.state.result ?\n                            <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px', marginBottom: '150px' }}>\n                                <p className={styles.title} style={{ color: BLACK }}>Previous messages</p>\n                                <p className={styles.text} style={{ color: GREY, marginBottom: '10px' }}>\n                                    Here are some of your previous messages. Messages would be answered within 2-4 business days\n                                </p>\n\n                                {results}\n                            </div> : <></>}\n\n                    </>}\n            </div>\n        );\n    };\n};"]},"metadata":{},"sourceType":"module"}