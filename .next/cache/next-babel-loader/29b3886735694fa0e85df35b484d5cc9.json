{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BiStopCircle } from 'react-icons/bi';\nimport { HiOutlineLocationMarker } from 'react-icons/hi';\nimport { VscCalendar } from 'react-icons/vsc';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { M, polylineLenght, timeAndDate } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nvar GREEN = '#4EB848',\n    WHITE = '#FFFFFF',\n    GREY = '#959AAC',\n    BLACK = '#000000',\n    RED = '#FF0000',\n    BLUE_TEXT = '#284ED6',\n    BLUE = '#1970A7',\n    PURPLE = '#A031AF',\n    YELLOW = '#F0E23D';\n\nvar TripHistory = /*#__PURE__*/function (_React$Component) {\n  _inherits(TripHistory, _React$Component);\n\n  var _super = _createSuper(TripHistory);\n\n  function TripHistory(props) {\n    var _this;\n\n    _classCallCheck(this, TripHistory);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        _this.setState({\n          result: null\n        }, function () {\n          firebase.database().ref(\"userHistory/\".concat(_this.state.userDetails.userID, \"/carpool/\").concat(new Date(_this.state.date).getFullYear(), \"/\").concat(M[new Date(_this.state.date).getMonth()])).once('value', function (snapshot) {\n            _this.setState({\n              result: snapshot.val() ? snapshot.val() : 'NORESULTS'\n            });\n          })[\"catch\"](function (error) {\n            console.log(error.message);\n          });\n        });\n      }\n    });\n\n    _this.state = {\n      result: false,\n      date: new Date().getTime(),\n      userDetails: _this.props.userDetails\n    };\n    return _this;\n  }\n\n  _createClass(TripHistory, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"sorter\",\n    value: function sorter(a, b) {\n      function numbergetter(time) {\n        var slash1 = 0,\n            slash2 = 0,\n            slash3 = 0;\n\n        for (var k = 0; k < time.length; k++) {\n          if (time.charAt(k) == '-') slash1 == 0 ? slash1 = k : slash2 == 0 ? slash2 = k : slash3 = k;\n        }\n\n        ;\n        var DAY = Number(time.substring(0, slash1)) * 86400;\n        var HOUR = Number(time.substring(slash1 + 1, slash2)) * 3600;\n        var MINS = Number(time.substring(slash2 + 1, slash3)) * 60;\n        var SECS = Number(time.substring(slash3 + 1, time.length));\n        return DAY + HOUR + MINS + SECS;\n      }\n\n      ;\n      var a_time = numbergetter(a);\n      var b_time = numbergetter(b);\n      if (a_time > b_time) return -1;else return 1;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var trips = [];\n\n      if (this.state.result && this.state.result != 'NORESULTS') {\n        var keys = Object.keys(this.state.result).sort(this.sorter);\n\n        for (var i = 0; i < keys.length; i++) {\n          trips.push( /*#__PURE__*/_jsx(Trip, {\n            date: timeAndDate(keys[i], M[new Date(this.state.date).getMonth()], new Date(this.state.date).getFullYear()),\n            data: this.state.result[keys[i]],\n            lastItem: i == keys.length - 1,\n            type: \"Rider\"\n          }, keys[i]));\n        }\n      }\n\n      return /*#__PURE__*/_jsx(_Fragment, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.cont,\n          style: {\n            height: '100%',\n            paddingTop: '10px',\n            position: 'relative'\n          },\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelDesc,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.tripPanelCalenderCont,\n              style: {\n                marginRight: '10px'\n              },\n              children: [/*#__PURE__*/_jsx(VscCalendar, {\n                color: GREEN,\n                size: '24px',\n                style: {\n                  marginRight: '4px',\n                  marginBottom: '3px'\n                }\n              }), /*#__PURE__*/_jsx(DatePicker, {\n                className: styles.calendarDate,\n                placeholderText: \"\".concat(M[new Date(this.state.date).getMonth()].toUpperCase(), \" \").concat(new Date(this.state.date).getFullYear()),\n                onChange: function onChange(date) {\n                  _this2.setState({\n                    date: date\n                  }, function () {\n                    _this2.loadResult();\n                  });\n                },\n                dateFormat: \"MM/yyyy\",\n                showMonthYearPicker: true\n              })]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.contactUsLasttext,\n              id: styles.tripPanelAlignMiddle,\n              style: {\n                width: 'initial',\n                fontSize: '80%',\n                margin: '0px'\n              },\n              children: \"To see the details of a trip please use the mobile app\"\n            })]\n          }), this.state.result ? this.state.result == 'NORESULTS' ? /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.tripPanelLoading,\n            id: styles.tripPanelLoading_,\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/noResultsWoman.svg\",\n              className: styles.noResultsWoman,\n              alt: \"No Results\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.contactUsLasttext,\n              style: {\n                width: 'initial',\n                fontSize: '90%',\n                margin: '0px'\n              },\n              id: styles.tripPanelLoadingText,\n              children: \"Surprisingly, you haven't booked any rides during this time.\"\n            })]\n          }) : trips : /*#__PURE__*/_jsx(\"div\", {\n            className: styles.tripPanelLoading,\n            children: /*#__PURE__*/_jsx(Loader, {\n              type: \"TailSpin\",\n              color: GREEN,\n              height: '100px',\n              width: '100px'\n            })\n          })]\n        })\n      });\n    }\n  }]);\n\n  return TripHistory;\n}(React.Component);\n\nexport { TripHistory as default };\n;\n\nvar Trip = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Trip, _React$Component2);\n\n  var _super2 = _createSuper(Trip);\n\n  function Trip(props) {\n    var _this3;\n\n    _classCallCheck(this, Trip);\n\n    _this3 = _super2.call(this, props);\n    _this3.state = {};\n    return _this3;\n  }\n\n  _createClass(Trip, [{\n    key: \"render\",\n    value: function render() {\n      if (this.props.type == 'Rider') {\n        var bar = /*#__PURE__*/_jsx(_Fragment, {});\n\n        var data = JSON.parse(this.props.data.data);\n        var totalDistance = 0;\n\n        switch (this.props.data.driverDetails.steps) {\n          case 1:\n            {\n              totalDistance = data.firstDistance;\n              bar = /*#__PURE__*/_jsx(\"div\", {\n                className: styles.tripPanelNoOfTrips,\n                style: {\n                  backgroundColor: GREEN\n                }\n              });\n            }\n            break;\n\n          case 2:\n            {\n              totalDistance = data.firstDistance + data.secondDistance;\n              bar = /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.tripPanelNoOfTrips,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: styles.tripPanelNoOfTrips,\n                  style: {\n                    width: data.firstDistance / totalDistance * 100 + '%',\n                    backgroundColor: GREEN,\n                    borderTopRightRadius: '0px',\n                    borderBottomRightRadius: '0px'\n                  }\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: styles.tripPanelNoOfTrips,\n                  style: {\n                    width: data.secondDistance / totalDistance * 100 + '%',\n                    backgroundColor: BLUE,\n                    borderTopLeftRadius: '0px',\n                    borderBottomLeftRadius: '0px'\n                  }\n                })]\n              });\n            }\n            break;\n\n          case 3:\n            {\n              totalDistance = data.firstDistance + data.secondDistance + data.thirdDistance;\n              bar = /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.tripPanelNoOfTrips,\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: styles.tripPanelNoOfTrips,\n                  style: {\n                    width: data.firstDistance / totalDistance * 100 + '%',\n                    backgroundColor: GREEN,\n                    borderTopRightRadius: '0px',\n                    borderBottomRightRadius: '0px'\n                  }\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: styles.tripPanelNoOfTrips,\n                  style: {\n                    width: data.secondDistance / totalDistance * 100 + '%',\n                    backgroundColor: BLUE,\n                    borderRadius: '0px'\n                  }\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: styles.tripPanelNoOfTrips,\n                  style: {\n                    width: data.thirdDistance / totalDistance * 100 + '%',\n                    backgroundColor: PURPLE,\n                    borderTopLeftRadius: '0px',\n                    borderBottomLeftRadius: '0px'\n                  }\n                })]\n              });\n            }\n            break;\n        }\n\n        ;\n        totalDistance > 100 ? totalDistance = \"\".concat((totalDistance / 1000).toFixed(1), \" kilometers\") : totalDistance = \"\".concat(totalDistance.toFixed(totalDistance != 0 ? 1 : 0), \" meters\");\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            id: styles.tripPanelCont,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                margin: '0px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTitle,\n                children: \"\".concat(this.props.data.driverDetails.steps, \"-leg trip\")\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                children: this.props.date\n              })]\n            }), bar, /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                justifyContent: 'initial',\n                marginTop: '20px'\n              },\n              children: [/*#__PURE__*/_jsx(HiOutlineLocationMarker, {\n                color: GREEN,\n                style: {\n                  margin: '0px',\n                  marginRight: '10px'\n                },\n                className: styles.driverHistory_ICON\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                style: {\n                  margin: '0px'\n                },\n                children: this.props.data.location.description\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                justifyContent: 'initial',\n                marginTop: '10px'\n              },\n              children: [/*#__PURE__*/_jsx(BiStopCircle, {\n                color: GREEN,\n                style: {\n                  marginRight: '10px'\n                },\n                className: styles.driverHistory_ICON\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                style: {\n                  margin: '0px'\n                },\n                children: this.props.data.destination.description\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                backgroundColor: GREY,\n                height: '1px',\n                marginTop: '17px'\n              }\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                marginTop: '10px',\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTitle,\n                style: {\n                  fontFamily: 'Gilroy-Medium',\n                  margin: '0px'\n                },\n                children: totalDistance\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelCash,\n                children: \"$ 5.99\"\n              })]\n            })]\n          }), this.props.lastItem ?\n          /*#__PURE__*/\n          //just for padding at the bottom\n          _jsx(\"div\", {\n            style: {\n              height: '150px',\n              width: '100%',\n              backgroundColor: 'transparent'\n            }\n          }) : /*#__PURE__*/_jsx(_Fragment, {})]\n        });\n      } else if (this.props.type == 'Driver') {\n        var _data = this.props.data;\n        var passNo = 0,\n            distance = 0,\n            total = '$ 0.00';\n\n        if (_data.trips) {\n          for (var key in _data.trips) {\n            passNo += _data.trips[key].details.tripDetails.seatNumber;\n            distance += polylineLenght(JSON.parse(_data.trips[key].details.tripDetails.leg)) * _data.trips[key].details.tripDetails.seatNumber; //seat no * distance\n          }\n\n          ;\n        }\n\n        ; //distance = distance * passNo;\n\n        distance > 100 ? distance = \"\".concat((distance / 1000).toFixed(1), \" KM\") : distance = \"\".concat(distance.toFixed(distance != 0 ? 1 : 0), \" M\");\n        distance = distance.toLowerCase();\n        passNo = \"\".concat(passNo, \" \").concat(passNo == 1 ? 'person' : 'people');\n        total = '$ 213.00';\n        return /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            id: styles.tripPanelCont,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                margin: '0px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTitle,\n                children: passNo\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                children: this.props.date\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                backgroundColor: BLUE,\n                height: '10px'\n              }\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                justifyContent: 'initial',\n                marginTop: '20px'\n              },\n              children: [/*#__PURE__*/_jsx(HiOutlineLocationMarker, {\n                color: BLUE,\n                style: {\n                  margin: '0px',\n                  marginRight: '10px'\n                },\n                className: styles.driverHistory_ICON\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                style: {\n                  margin: '0px'\n                },\n                children: _data.locationAddress\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                justifyContent: 'initial',\n                marginTop: '10px'\n              },\n              children: [/*#__PURE__*/_jsx(BiStopCircle, {\n                color: BLUE,\n                style: {\n                  marginRight: '10px'\n                },\n                className: styles.driverHistory_ICON\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTime,\n                style: {\n                  margin: '0px'\n                },\n                children: _data.destinationAddress\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.tripPanelNoOfTrips,\n              style: {\n                backgroundColor: GREY,\n                height: '1px',\n                marginTop: '17px'\n              }\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                width: '95%',\n                marginTop: '10px',\n                marginBottom: '15px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelTitle,\n                style: {\n                  fontFamily: 'Gilroy-Medium',\n                  margin: '0px'\n                },\n                children: distance\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.tripPanelCash,\n                style: {\n                  color: BLUE\n                },\n                children: total\n              })]\n            })]\n          }), this.props.lastItem ?\n          /*#__PURE__*/\n          //just for padding at the bottom\n          _jsx(\"div\", {\n            style: {\n              height: '150px',\n              width: '100%',\n              backgroundColor: 'transparent'\n            }\n          }) : /*#__PURE__*/_jsx(_Fragment, {})]\n        });\n      }\n    }\n  }]);\n\n  return Trip;\n}(React.Component);\n\n;","map":{"version":3,"sources":["/Users/edokoh9/Documents/PerchWebsite/perch/functions/panels/userPanels/tripHistory.js"],"names":["firebase","React","DatePicker","BiStopCircle","HiOutlineLocationMarker","VscCalendar","Loader","M","polylineLenght","timeAndDate","styles","GREEN","WHITE","GREY","BLACK","RED","BLUE_TEXT","BLUE","PURPLE","YELLOW","TripHistory","props","state","userDetails","setState","result","database","ref","userID","Date","date","getFullYear","getMonth","once","snapshot","val","error","console","log","message","getTime","loadResult","a","b","numbergetter","time","slash1","slash2","slash3","k","length","charAt","DAY","Number","substring","HOUR","MINS","SECS","a_time","b_time","trips","keys","Object","sort","sorter","i","push","cont","height","paddingTop","position","tripPanelDesc","tripPanelCalenderCont","marginRight","marginBottom","calendarDate","toUpperCase","contactUsLasttext","tripPanelAlignMiddle","width","fontSize","margin","tripPanelLoading","tripPanelLoading_","noResultsWoman","tripPanelLoadingText","Component","Trip","type","bar","data","JSON","parse","totalDistance","driverDetails","steps","firstDistance","tripPanelNoOfTrips","backgroundColor","secondDistance","borderTopRightRadius","borderBottomRightRadius","borderTopLeftRadius","borderBottomLeftRadius","thirdDistance","borderRadius","toFixed","tripPanelCont","enterKilometerDiv","tripPanelTitle","tripPanelTime","justifyContent","marginTop","driverHistory_ICON","location","description","destination","fontFamily","tripPanelCash","lastItem","passNo","distance","total","key","details","tripDetails","seatNumber","leg","toLowerCase","locationAddress","destinationAddress","color"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React from 'react';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { BiStopCircle } from 'react-icons/bi';\nimport { HiOutlineLocationMarker } from 'react-icons/hi';\nimport { VscCalendar } from 'react-icons/vsc';\nimport Loader from 'react-loader-spinner';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport {\n    M, polylineLenght,\n    timeAndDate\n} from '../../functions';\nimport styles from '../panel_layout.module.css';\nconst [GREEN, WHITE, GREY, BLACK, RED, BLUE_TEXT, BLUE, PURPLE, YELLOW] = ['#4EB848', '#FFFFFF', '#959AAC', '#000000', '#FF0000', '#284ED6', '#1970A7', '#A031AF', '#F0E23D'];\n\nexport default class TripHistory extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            result: false,\n            date: new Date().getTime(),\n            userDetails: this.props.userDetails,\n        };\n    };\n\n    componentDidMount() {\n        this.loadResult();\n    }\n\n    loadResult = () => {\n        if (this.state.userDetails) {\n            this.setState({ result: null }, () => {\n                firebase.database().ref(`userHistory/${this.state.userDetails.userID}/carpool/${new Date(this.state.date).getFullYear()}/${M[new Date(this.state.date).getMonth()]}`).once('value', snapshot => {\n                    this.setState({ result: snapshot.val() ? snapshot.val() : 'NORESULTS' });\n                }).catch(error => { console.log(error.message) });\n            });\n        }\n    };\n    sorter(a, b) {\n        function numbergetter(time) {\n            let slash1 = 0, slash2 = 0, slash3 = 0;\n            for (let k = 0; k < time.length; k++) {\n                if (time.charAt(k) == '-')\n                    slash1 == 0 ? slash1 = k : slash2 == 0 ? slash2 = k : slash3 = k;\n            };\n\n            const DAY = Number(time.substring(0, slash1)) * 86400;\n            const HOUR = Number(time.substring(slash1 + 1, slash2)) * 3600;\n            const MINS = Number(time.substring(slash2 + 1, slash3)) * 60;\n            const SECS = Number(time.substring(slash3 + 1, time.length));\n\n            return (DAY + HOUR + MINS + SECS)\n        };\n\n        let a_time = numbergetter(a)\n        let b_time = numbergetter(b)\n\n        if (a_time > b_time)\n            return -1;\n        else\n            return 1\n    };\n    render() {\n        if (!this.state.userDetails && this.props.userDetails)\n            this.setState({ userDetails: this.props.userDetails }, () => { this.loadResult(); });\n\n        let trips = [];\n\n        if (this.state.result && this.state.result != 'NORESULTS') {\n            const keys = Object.keys(this.state.result).sort(this.sorter);\n            for (let i = 0; i < keys.length; i++) {\n                trips.push(\n                    <Trip\n                        key={keys[i]}\n                        date={timeAndDate(keys[i], M[new Date(this.state.date).getMonth()], new Date(this.state.date).getFullYear())}\n                        data={this.state.result[keys[i]]}\n                        lastItem={i == keys.length - 1}\n                        type='Rider'\n                    />\n                );\n            }\n        }\n        return (\n            <>\n                <div className={styles.cont} style={{ height: '100%', paddingTop: '10px', position: 'relative' }}>\n\n                    <div className={styles.tripPanelDesc} >\n                        <div className={styles.tripPanelCalenderCont} style={{ marginRight: '10px' }}>\n                            <VscCalendar color={GREEN} size={'24px'} style={{ marginRight: '4px', marginBottom: '3px' }} />\n                            <DatePicker\n                                className={styles.calendarDate}\n                                placeholderText={`${M[new Date(this.state.date).getMonth()].toUpperCase()} ${new Date(this.state.date).getFullYear()}`}\n                                onChange={date => { this.setState({ date: date }, () => { this.loadResult() }); }}\n                                dateFormat=\"MM/yyyy\"\n                                showMonthYearPicker\n                            />\n                        </div>\n                        <p className={styles.contactUsLasttext} id={styles.tripPanelAlignMiddle} style={{ width: 'initial', fontSize: '80%', margin: '0px' }}>\n                            To see the details of a trip please use the mobile app\n                        </p>\n                    </div>\n                    {this.state.result ?\n                        this.state.result == 'NORESULTS' ?\n                            <div className={styles.tripPanelLoading} id={styles.tripPanelLoading_}>\n                                <img src=\"/noResultsWoman.svg\" className={styles.noResultsWoman} alt=\"No Results\" />\n                                <p className={styles.contactUsLasttext} style={{ width: 'initial', fontSize: '90%', margin: '0px' }} id={styles.tripPanelLoadingText}>\n                                    Surprisingly, you haven't booked any rides during this time.\n                                </p>\n                            </div> :\n                            trips :\n                        <div className={styles.tripPanelLoading}>\n                            <Loader\n                                type=\"TailSpin\"\n                                color={GREEN}\n                                height={'100px'}\n                                width={'100px'}\n                            />\n                        </div>}\n                </div>\n            </>\n        );\n    }\n};\n\nclass Trip extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n        };\n\n    }\n    render() {\n        if (this.props.type == 'Rider') {\n            let bar = <></>;\n            const data = JSON.parse(this.props.data.data);\n            let totalDistance = 0;\n            switch (this.props.data.driverDetails.steps) {\n                case 1: {\n                    totalDistance = data.firstDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: GREEN }} >\n                    </div>;\n                } break;\n                case 2: {\n                    totalDistance = data.firstDistance + data.secondDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips}>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.firstDistance / totalDistance) * 100) + '%', backgroundColor: GREEN, borderTopRightRadius: '0px', borderBottomRightRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.secondDistance / totalDistance) * 100) + '%', backgroundColor: BLUE, borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }} >\n                        </div>\n                    </div>\n                } break;\n                case 3: {\n                    totalDistance = data.firstDistance + data.secondDistance + data.thirdDistance;\n                    bar = <div className={styles.tripPanelNoOfTrips}>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.firstDistance / totalDistance) * 100) + '%', backgroundColor: GREEN, borderTopRightRadius: '0px', borderBottomRightRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.secondDistance / totalDistance) * 100) + '%', backgroundColor: BLUE, borderRadius: '0px' }} >\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ width: ((data.thirdDistance / totalDistance) * 100) + '%', backgroundColor: PURPLE, borderTopLeftRadius: '0px', borderBottomLeftRadius: '0px' }} >\n                        </div>\n\n                    </div>\n                } break;\n            };\n            totalDistance > 100 ?\n                totalDistance = `${(totalDistance / 1000).toFixed(1)} kilometers` :\n                totalDistance = `${(totalDistance).toFixed(totalDistance != 0 ? 1 : 0)} meters`;\n            return (\n                <>\n                    <div id={styles.tripPanelCont} >\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', margin: '0px' }}>\n                            <p className={styles.tripPanelTitle}>{`${this.props.data.driverDetails.steps}-leg trip`}</p>\n                            <p className={styles.tripPanelTime}>{this.props.date}</p>\n                        </div>\n\n                        {bar}\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '20px' }}>\n                            <HiOutlineLocationMarker color={GREEN} style={{ margin: '0px', marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{this.props.data.location.description}</p>\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '10px' }}>\n                            <BiStopCircle color={GREEN} style={{ marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{this.props.data.destination.description}</p>\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: GREY, height: '1px', marginTop: '17px' }} >\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', marginTop: '10px', marginBottom: '15px' }}>\n                            <p className={styles.tripPanelTitle} style={{ fontFamily: 'Gilroy-Medium', margin: '0px' }}>{totalDistance}</p>\n                            <p className={styles.tripPanelCash} >{`$ 5.99`}</p>\n                        </div>\n                    </div>\n                    {\n                        this.props.lastItem ?//just for padding at the bottom\n                            <div style={{ height: '150px', width: '100%', backgroundColor: 'transparent' }}></div>\n                            : <></>\n                    }\n                </>\n            );\n        }\n        else if (this.props.type == 'Driver') {\n            const data = this.props.data;\n            let passNo = 0, distance = 0, total = '$ 0.00';\n            if (data.trips) {\n                for (let key in data.trips) {\n                    passNo += data.trips[key].details.tripDetails.seatNumber;\n                    distance += (polylineLenght(JSON.parse(data.trips[key].details.tripDetails.leg)) * data.trips[key].details.tripDetails.seatNumber);//seat no * distance\n                };\n            };\n            //distance = distance * passNo;\n            distance > 100 ?\n                distance = `${(distance / 1000).toFixed(1)} KM` :\n                distance = `${(distance).toFixed(distance != 0 ? 1 : 0)} M`;\n\n            distance = distance.toLowerCase();\n            passNo = `${passNo} ${passNo == 1 ? 'person' : 'people'}`;\n            total = '$ 213.00';\n\n\n            return (\n                <>\n                    <div id={styles.tripPanelCont} >\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', margin: '0px' }}>\n                            <p className={styles.tripPanelTitle}>{passNo}</p>\n                            <p className={styles.tripPanelTime}>{this.props.date}</p>\n                        </div>\n\n                        <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: BLUE, height: '10px', }} >\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '20px' }}>\n                            <HiOutlineLocationMarker color={BLUE} style={{ margin: '0px', marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{data.locationAddress}</p>\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', justifyContent: 'initial', marginTop: '10px' }}>\n                            <BiStopCircle color={BLUE} style={{ marginRight: '10px' }} className={styles.driverHistory_ICON} />\n                            <p className={styles.tripPanelTime} style={{ margin: '0px' }}>{data.destinationAddress}</p>\n                        </div>\n                        <div className={styles.tripPanelNoOfTrips} style={{ backgroundColor: GREY, height: '1px', marginTop: '17px' }} >\n                        </div>\n                        <div className={styles.enterKilometerDiv} style={{ width: '95%', marginTop: '10px', marginBottom: '15px' }}>\n                            <p className={styles.tripPanelTitle} style={{ fontFamily: 'Gilroy-Medium', margin: '0px' }}>{distance}</p>\n                            <p className={styles.tripPanelCash} style={{ color: BLUE }} >{total}</p>\n                        </div>\n                    </div>\n                    {\n                        this.props.lastItem ?//just for padding at the bottom\n                            <div style={{ height: '150px', width: '100%', backgroundColor: 'transparent' }}></div>\n                            : <></>\n                    }\n                </>\n            );\n        }\n    }\n};"]},"metadata":{},"sourceType":"module"}