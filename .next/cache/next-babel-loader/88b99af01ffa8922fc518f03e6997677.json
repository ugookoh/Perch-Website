{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar AdminDashBoard = /*#__PURE__*/function (_React$Component) {\n  _inherits(AdminDashBoard, _React$Component);\n\n  var _super = _createSuper(AdminDashBoard);\n\n  function AdminDashBoard(props) {\n    var _this;\n\n    _classCallCheck(this, AdminDashBoard);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      sharedLinks: true,\n      userDetails: _this.props.userDetails,\n      numberOfDriverApplications: 0,\n      unansweredMessages: 0,\n      unansweredDriverMessages: 0,\n      numberOfVehicleAdditionRequest: 0,\n      numberOfCancelledTrips: 0,\n      allTimeAnalytics: {},\n      weeklyAnalytics: {}\n    };\n    return _this;\n  }\n\n  _createClass(AdminDashBoard, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      firebase.database().ref(\"analytics/numberOfUserFeedbackMessages\").on('value', function (snapshot) {\n        _this2.setState({\n          unansweredMessages: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"analytics/numberOfCancelledTrips\").on('value', function (snapshot) {\n        _this2.setState({\n          numberOfCancelledTrips: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"analytics/numberOfDriverFeedbackMessages\").on('value', function (snapshot) {\n        _this2.setState({\n          unansweredDriverMessages: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"analytics/numberOfVehicleAdditionRequest\").on('value', function (snapshot) {\n        _this2.setState({\n          numberOfVehicleAdditionRequest: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"analytics/numberOfDriverApplications\").on('value', function (snapshot) {\n        _this2.setState({\n          numberOfDriverApplications: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"analytics/allTimeAnalytics/admin\").once('value', function (snapshot) {\n        _this2.setState({\n          allTimeAnalytics: snapshot.val()\n        });\n      });\n      firebase.database().ref(\"currentWeek/value\").once('value', function (week) {\n        firebase.database().ref(\"analytics/weeklyAnalytics/\".concat(week.val(), \"/admin\")).once('value', function (snapshot) {\n          _this2.setState({\n            weeklyAnalytics: snapshot.val()\n          });\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.cont,\n        children: [/*#__PURE__*/_jsx(AdminDashSummary, {\n          title: 'WH',\n          data: this.state.weeklyAnalytics\n        }), /*#__PURE__*/_jsx(AdminDashSummary, {\n          title: 'OH',\n          data: this.state.allTimeAnalytics\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.GREEN,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"New driver applications\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: [\"You have \", this.state.numberOfDriverApplications, \" new driver applications left\"]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.GREEN,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"New vehicle applications\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: [\"You have \", this.state.numberOfVehicleAdditionRequest, \" new vehicle applications left\"]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.GREEN,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"Unanswered messages\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: [\"You have \", this.state.unansweredMessages, \" unaswered messages\"]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.GREEN,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"Unanswered driver messages\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: [\"You have \", this.state.unansweredDriverMessages, \" unaswered driver messages\"]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.GREEN,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.WHITE\n            },\n            children: \"Cancelled trips\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.text,\n            style: {\n              color: colors.WHITE\n            },\n            children: [\"You have \", this.state.numberOfCancelledTrips, \" unresolved cancelled trips\"]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px',\n            marginBottom: '150px'\n          }\n        })]\n      });\n    }\n  }]);\n\n  return AdminDashBoard;\n}(React.Component);\n\nexport { AdminDashBoard as default };\n;\n\nvar AdminDashSummary = function AdminDashSummary(_ref) {\n  var _data$perchKilometers, _data$perchKilometers2, _data$cancelledTrips, _data$cancelledTrips2;\n\n  var title = _ref.title,\n      data = _ref.data;\n\n  var rendervalid = function rendervalid(x) {\n    if (x) return x;else return 0;\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    style: {\n      backgroundColor: colors.WHITE,\n      marginTop: '20px'\n    },\n    children: [title == 'OH' ? /*#__PURE__*/_jsx(\"div\", {\n      className: styles.enterKilometerDiv,\n      children: /*#__PURE__*/_jsx(\"p\", {\n        className: styles.title,\n        style: {\n          color: colors.BLACK,\n          width: 'initial'\n        },\n        children: \"Overall history\"\n      })\n    }) : /*#__PURE__*/_jsx(\"p\", {\n      className: styles.title,\n      style: {\n        color: colors.BLACK\n      },\n      children: \"Weekly History\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.driverDashboardCont,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboard_TE,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Total number of users\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.GREEN\n            },\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.numberOfUsers)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Perch kms (Sign Up)\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$perchKilometers = data.perchKilometersGivenOut) === null || _data$perchKilometers === void 0 ? void 0 : _data$perchKilometers.signUp)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Perch kms (Referrals)\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$perchKilometers2 = data.perchKilometersGivenOut) === null || _data$perchKilometers2 === void 0 ? void 0 : _data$perchKilometers2.referral)\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.sharedLine,\n        style: {\n          width: '95%',\n          backgroundColor: 'rgba(112, 112, 112, 0.19)'\n        }\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboard_TE,\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Completed trips\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.completedTrips)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Passengers carried\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.passengersCarried)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Driver's to be paid\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.BLUE\n            },\n            children: [\"$\", rendervalid(data === null || data === void 0 ? void 0 : data.toBePaidToDrivers).toFixed(2)]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Rider cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips = data.cancelledTrips) === null || _data$cancelledTrips === void 0 ? void 0 : _data$cancelledTrips.rider)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Driver cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.RED\n            },\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips2 = data.cancelledTrips) === null || _data$cancelledTrips2 === void 0 ? void 0 : _data$cancelledTrips2.driver)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginRight: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Number of deleted accounts\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.numberOfDeletedUsers)\n          })]\n        })]\n      })]\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}