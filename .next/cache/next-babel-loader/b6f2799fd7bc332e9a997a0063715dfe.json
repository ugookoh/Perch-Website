{"ast":null,"code":"import React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiFillStar } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default class DriverDashBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userDetails: this.props.userDetails,\n      allTimeAnalytics: {},\n      weeklyAnalytics: {}\n    };\n  }\n\n  componentDidMount() {\n    const {\n      userID\n    } = this.props.userDetails;\n    firebase.database().ref(`analytics/allTimeAnalytics/driver/${userID}`).once('value', snapshot => {\n      this.setState({\n        allTimeAnalytics: snapshot.val()\n      });\n    });\n    firebase.database().ref(`currentWeek/value`).once('value', week => {\n      firebase.database().ref(`analytics/weeklyAnalytics/${week.val()}/driver/${userID}`).once('value', snapshot => {\n        this.setState({\n          weeklyAnalytics: snapshot.val()\n        });\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [/*#__PURE__*/_jsx(DriverDashBoardSummary, {\n        title: \"WH\",\n        data: this.state.weeklyAnalytics\n      }), /*#__PURE__*/_jsx(DriverDashBoardSummary, {\n        title: \"OH\",\n        data: this.state.allTimeAnalytics,\n        driverRating: this.state.userDetails.driverSummarizedHistory.carpool.rating,\n        driverJoinedText: this.state.userDetails.driverJoinedText\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px',\n          marginBottom: \"150px\"\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.BLACK\n          },\n          children: \"Platform links\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.GREY\n          },\n          children: \"At the moment, taking rides with Perch is only available on the mobile app for iOS and android devices.\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          style: {\n            display: 'flex',\n            width: '90%',\n            flexDirection: 'row',\n            justifyContent: 'flex-start'\n          },\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.downloadCont,\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: \"/downloadAppStore.svg\",\n              alt: \"Download Perch on App store\",\n              className: styles.downloadApp\n            }), /*#__PURE__*/_jsx(\"img\", {\n              src: \"/downloadGooglePlay.svg\",\n              alt: \"Download Perch on App store\",\n              className: styles.downloadApp\n            })]\n          })\n        })]\n      })]\n    });\n  }\n\n}\n;\n\nclass DriverDashBoardSummary extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  rendervalid(x) {\n    if (x) return x;else return 0;\n  }\n\n  render() {\n    var _data$cancelledTrips, _data$cancelledTrips2;\n\n    const {\n      data,\n      driverRating,\n      driverJoinedText\n    } = this.props;\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.container,\n      style: {\n        backgroundColor: colors.WHITE,\n        marginTop: '20px'\n      },\n      children: [this.props.title == 'OH' ? /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.enterKilometerDiv,\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.BLACK,\n            width: 'initial'\n          },\n          children: \"Overall history\"\n        }), /*#__PURE__*/_jsx(\"p\", {\n          className: styles.driverDashboard_BOXTITLE,\n          style: {\n            margin: '0px',\n            textAlign: 'center',\n            marginLeft: '20px'\n          },\n          children: /*#__PURE__*/_jsx(\"span\", {\n            id: styles.driverDashboard_FULLDATE,\n            children: driverJoinedText\n          })\n        })]\n      }) : /*#__PURE__*/_jsx(\"p\", {\n        className: styles.title,\n        style: {\n          color: colors.BLACK\n        },\n        children: \"Weekly history\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboardCont,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.driverDashboard_TE,\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            style: {\n              alignItems: 'flex-start',\n              marginLeft: '0px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Total earnings\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              style: {\n                color: colors.BLUE\n              },\n              children: [\"$ \", this.rendervalid(data === null || data === void 0 ? void 0 : data.amountEarned).toFixed(2)]\n            })]\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine,\n          style: {\n            width: '95%',\n            backgroundColor: 'rgba(112, 112, 112, 0.19)'\n          }\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_TE,\n          style: {\n            marginBottom: '15px'\n          },\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            style: {\n              marginLeft: '0px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Completed trips\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              children: this.rendervalid(data === null || data === void 0 ? void 0 : data.completedTrips)\n            })]\n          }), driverRating && /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Rating\"\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              style: {\n                display: 'flex',\n                flexDirection: 'row',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                className: styles.driverDashboard_BOXTEXT,\n                children: driverRating.toFixed(1)\n              }), /*#__PURE__*/_jsx(AiFillStar, {\n                size: '15px',\n                style: {\n                  marginLeft: '5px'\n                }\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Driver cancellations\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              style: {\n                color: colors.RED\n              },\n              children: this.rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips = data.cancelledTrips) === null || _data$cancelledTrips === void 0 ? void 0 : _data$cancelledTrips.cancelled)\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Rider cancellations\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              children: this.rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips2 = data.cancelledTrips) === null || _data$cancelledTrips2 === void 0 ? void 0 : _data$cancelledTrips2.cancelledOn)\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            style: {\n              marginRight: '0px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Passengers carried\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              children: this.rendervalid(data === null || data === void 0 ? void 0 : data.passengersCarried)\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.driverDashboard_BOX,\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTITLE,\n              children: \"Driver timeouts\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.driverDashboard_BOXTEXT,\n              style: {\n                color: colors.RED\n              },\n              children: this.rendervalid(data === null || data === void 0 ? void 0 : data.driverTimeouts)\n            })]\n          })]\n        })]\n      })]\n    });\n  }\n\n}\n\n;","map":null,"metadata":{},"sourceType":"module"}