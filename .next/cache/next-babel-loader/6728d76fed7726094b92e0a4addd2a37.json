{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineClose, AiOutlineRight } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors, isNumber, deleteCard, stripe } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport { loadStripe } from '@stripe/stripe-js';\nimport Loader from 'react-loader-spinner';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\n\nvar PerchWallet = /*#__PURE__*/function (_React$Component) {\n  _inherits(PerchWallet, _React$Component);\n\n  var _super = _createSuper(PerchWallet);\n\n  function PerchWallet(props) {\n    var _this;\n\n    _classCallCheck(this, PerchWallet);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadCards\", function () {\n      var userID = _this.state.userDetails.userID;\n      firebase.database().ref(\"cards/\".concat(userID)).once('value', function (snapshot) {\n        if (!!snapshot) {\n          var arrayOfLast4 = [],\n              i = 0;\n\n          for (var key in snapshot.val()) {\n            if (key != 'selected') arrayOfLast4[i] = {\n              last4: snapshot.val()[key].card.last4,\n              brand: snapshot.val()[key].card.brand\n            };else if (key == 'selected') _this.setState({\n              selected: snapshot.val()[key]\n            });\n            i++;\n          }\n\n          _this.setState({\n            cards: arrayOfLast4\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setSelected\", function (value) {\n      var userID = _this.state.userDetails.userID;\n      firebase.database().ref(\"cards/\".concat(userID)).update({\n        selected: value\n      }).then(function () {\n        _this.setState({\n          selected: value\n        });\n      })[\"catch\"](function (error) {\n        _this.setState({\n          errorMessage: error.message\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"removeCard\", function (index) {\n      var cards = _this.state.cards;\n      cards.splice(index, 1);\n\n      _this.setState({\n        cards: cards\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createTokenWithCard\", function () {\n      _this.setState({\n        loading: true\n      }, function () {\n        loadStripe('pk_test_A7jK4iCYHL045qgjjfzAfPxu').then(function (stripe) {\n          stripe.createToken({\n            number: _this.formatCard(_this.state.cardNumber),\n            expMonth: Number(_this.state.expiryDate.substring(0, 2)),\n            expYear: Number(_this.state.expiryDate.substring(5, 7)),\n            cvc: _this.state.ccv,\n            name: _this.state.name\n          }).then(function (token) {\n            _this.setState({\n              errorMessage: token,\n              loading: false\n            }); //storeCard.call(this, this.state.userID, token);\n\n          })[\"catch\"](function (error) {\n            _this.setState({\n              loading: false,\n              errorMessage: error.message\n            });\n          });\n        })[\"catch\"](function (error) {\n          _this.setState({\n            loading: false,\n            errorMessage: error.message\n          });\n        });\n      });\n    });\n\n    _this.state = {\n      buyKilometers: false,\n      addCard: true,\n      //false,\n      userDetails: _this.props.userDetails,\n      quantity: 0,\n      cards: [],\n      selected: null,\n      name: '',\n      cardNumber: '',\n      expiryDate: '',\n      ccv: '',\n      errorMessage: '',\n      loading: false\n    };\n    return _this;\n  }\n\n  _createClass(PerchWallet, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var userID = this.state.userDetails.userID;\n      firebase.database().ref(\"perchKilometers/\".concat(userID, \"/quantity\")).on('value', function (snapshot) {\n        if (!!snapshot) _this2.setState({\n          quantity: snapshot.val()\n        });\n      });\n      this.loadCards();\n    }\n  }, {\n    key: \"formatCard\",\n    value: function formatCard(card) {\n      var formattedCard = card.substring(0, 4) + card.substring(5, 9) + card.substring(10, 14) + card.substring(15, 19);\n      return formattedCard;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var cards = [];\n\n      for (var i = 0; i < this.state.cards.length; i++) {\n        cards.push( /*#__PURE__*/_jsx(PaymentCard, {\n          userID: this.state.userDetails.userID,\n          card: this.state.cards[i],\n          index: i,\n          removeCard: this.removeCard,\n          setSelected: this.setSelected,\n          selectedCard: this.state.selected,\n          selected: this.state.selected === this.state.cards[i].last4,\n          type: this.state.buyKilometers ? 'pickPayment' : 'listOfCards'\n        }, this.state.cards[i].last4));\n      }\n\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: styles.cont,\n        children: this.state.buyKilometers ?\n        /*#__PURE__*/\n        //buy kilometers\n        _jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Enter the amount of kilometers you would like to purchase\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"Enter amount of kilometers\",\n              className: styles.inputPaymentPanel\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              style: {\n                marginTop: '20px'\n              },\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium',\n                  color: colors.GREY\n                },\n                className: styles.text,\n                children: \"Cost per kilometer\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium'\n                },\n                className: styles.text,\n                children: \"$ 12.99\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium',\n                  color: colors.GREY\n                },\n                className: styles.text,\n                children: \"Total cost of kilometers\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium'\n                },\n                className: styles.text,\n                children: \"$ 12.99\"\n              })]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium',\n                  color: colors.GREY\n                },\n                className: styles.text,\n                children: \"Taxes\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Medium'\n                },\n                className: styles.text,\n                children: \"$ 1.99\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.sharedLine,\n              style: {\n                marginTop: '20px',\n                width: '90%'\n              }\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: styles.enterKilometerDiv,\n              children: [/*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Bold',\n                  fontSize: '120%'\n                },\n                className: styles.text,\n                children: \"Total\"\n              }), /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  width: 'initial',\n                  margin: '0px',\n                  fontFamily: 'Gilroy-Bold',\n                  color: colors.GREEN,\n                  fontSize: '120%'\n                },\n                className: styles.text,\n                children: \"$ 12.99\"\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Payment Methods\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.GREY,\n                marginBottom: '20px'\n              },\n              children: \"List of available payment methods. New payment methods can also be added.\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.paymentCont,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.paymentItem,\n                children: [cards, /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.paymentRow,\n                  id: styles.addCardPayment,\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      flexDirection: 'row',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: \"/PayPalLogo.svg\",\n                      alt: \"Perch Payment\",\n                      className: styles.visaIcon,\n                      style: {\n                        marginRight: '15px',\n                        marginLeft: '0px'\n                      }\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: styles.paymentCardNumber,\n                      id: styles.paymentCardNumber_,\n                      children: \"PayPal\"\n                    })]\n                  }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                    color: colors.BLACK\n                  })]\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: styles.sharedLine,\n                  style: {\n                    marginTop: '0px',\n                    width: '100%'\n                  }\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.paymentRow,\n                  id: styles.addCardPayment,\n                  onClick: function onClick() {\n                    _this3.setState({\n                      addCard: true,\n                      buyKilometers: false,\n                      errorMessage: ''\n                    });\n                  },\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      flexDirection: 'row',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: \"/addPaymentCardIcon.svg\",\n                      alt: \"Perch Payment\",\n                      className: styles.visaIcon,\n                      style: {\n                        marginRight: '15px'\n                      }\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: styles.paymentCardNumber,\n                      id: styles.paymentCardNumber_,\n                      children: \"Add Debit / Credit Card\"\n                    })]\n                  }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                    color: colors.BLACK\n                  })]\n                })]\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              marginTop: '20px',\n              marginBottom: '150px',\n              marginLeft: '2.5%',\n              width: '95%'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.RED\n              },\n              id: styles.buttonBottom,\n              onClick: function onClick() {\n                _this3.setState({\n                  buyKilometers: false,\n                  addCard: false,\n                  errorMessage: ''\n                });\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Cancel\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.GREEN\n              },\n              id: styles.buttonBottom,\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Buy Kilometers\"\n              })\n            })]\n          })]\n        }) : this.state.addCard ?\n        /*#__PURE__*/\n        //add card\n        _jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Add card\"\n            }), /*#__PURE__*/_jsx(\"input\", {\n              type: \"text\",\n              placeholder: \"Name on Card\",\n              className: styles.inputPaymentPanel,\n              id: styles.inputPaymentPanel_ADD,\n              style: {\n                marginTop: '10px'\n              },\n              value: this.state.name,\n              onChange: function onChange(e) {\n                var value = e.target.value;\n\n                _this3.setState({\n                  name: value\n                });\n              }\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.inputPaymentPanel,\n              children: /*#__PURE__*/_jsx(CardElement, {\n                options: {\n                  style: {\n                    base: {\n                      color: '#303238',\n                      fontSize: '16px',\n                      fontFamily: '\"Gill Sans\", sans-serif',\n                      fontSmoothing: 'antialiased',\n                      '::placeholder': {\n                        color: '#757575'\n                      }\n                    },\n                    invalid: {\n                      color: '#e5424d',\n                      ':focus': {\n                        color: '#303238'\n                      }\n                    }\n                  }\n                },\n                onChange: function onChange(e) {\n                  console.log(e);\n                }\n              })\n            }), this.state.errorMessage && /*#__PURE__*/_jsx(\"p\", {\n              className: styles.em,\n              style: {\n                textAlign: 'initial'\n              },\n              children: this.state.errorMessage\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.enterKilometerDiv,\n            style: {\n              marginTop: '20px',\n              marginBottom: '150px',\n              marginLeft: '2.5%',\n              width: '95%'\n            },\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.RED\n              },\n              id: styles.buttonBottom,\n              onClick: function onClick() {\n                _this3.setState({\n                  buyKilometers: false,\n                  addCard: false,\n                  errorMessage: ''\n                });\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Cancel\"\n              })\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.button2,\n              style: {\n                backgroundColor: colors.GREEN\n              },\n              id: styles.buttonBottom,\n              onClick: function onClick() {\n                if (_this3.state.name.length <= 3) _this3.setState({\n                  errorMessage: 'Please enter the full name on the card'\n                });else if (_this3.state.cardNumber.length < 19) _this3.setState({\n                  errorMessage: 'Please enter full card number'\n                });else if (_this3.state.expiryDate.length < 7) _this3.setState({\n                  errorMessage: 'Please enter full expiry date'\n                });else _this3.createTokenWithCard();\n              },\n              children: this.state.loading ? /*#__PURE__*/_jsx(Loader, {\n                type: \"TailSpin\",\n                color: colors.WHITE,\n                height: '20px',\n                width: '20px'\n              }) : /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Add Card\"\n              })\n            })]\n          })]\n        }) :\n        /*#__PURE__*/\n        //main page\n        _jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Kilometers\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.GREY\n              },\n              children: \"You can make kilometer purchases from this panel. Also remeber that sharing your code with friends who book their first ride automatically gives you free kilometers.\"\n            }), /*#__PURE__*/_jsx(\"img\", {\n              src: \"/walletImage.svg\",\n              alt: \"Purchase Perch Kilometers\",\n              className: styles.walletImage\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                width: 'initial',\n                marginTop: '20px'\n              },\n              children: \"\".concat(this.state.quantity.toFixed(1), \" kilometers\")\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.button1,\n              style: {},\n              onClick: function onClick() {\n                _this3.setState({\n                  buyKilometers: true,\n                  addCard: false,\n                  errorMessage: ''\n                });\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                children: \"Buy kilometers\"\n              })\n            })]\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: styles.container,\n            style: {\n              backgroundColor: colors.WHITE,\n              marginTop: '20px',\n              marginBottom: '150px'\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              className: styles.title,\n              style: {\n                color: colors.BLACK\n              },\n              children: \"Payment Methods\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: colors.GREY,\n                marginBottom: '20px'\n              },\n              children: \"List of available payment methods. New payment methods can also be added.\"\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.paymentCont,\n              children: /*#__PURE__*/_jsxs(\"div\", {\n                className: styles.paymentItem,\n                children: [cards, /*#__PURE__*/_jsxs(\"div\", {\n                  className: styles.paymentRow,\n                  id: styles.addCardPayment,\n                  onClick: function onClick() {\n                    _this3.setState({\n                      addCard: true,\n                      buyKilometers: false,\n                      errorMessage: ''\n                    });\n                  },\n                  children: [/*#__PURE__*/_jsxs(\"div\", {\n                    style: {\n                      flexDirection: 'row',\n                      display: 'flex',\n                      alignItems: 'center'\n                    },\n                    children: [/*#__PURE__*/_jsx(\"img\", {\n                      src: \"/addPaymentCardIcon.svg\",\n                      alt: \"Perch Payment\",\n                      className: styles.visaIcon,\n                      style: {\n                        marginRight: '15px'\n                      }\n                    }), /*#__PURE__*/_jsx(\"p\", {\n                      className: styles.paymentCardNumber,\n                      id: styles.paymentCardNumber_,\n                      children: \"Add Debit / Credit Card\"\n                    })]\n                  }), /*#__PURE__*/_jsx(AiOutlineRight, {\n                    color: colors.BLACK\n                  })]\n                })]\n              })\n            })]\n          })]\n        })\n      });\n    }\n  }]);\n\n  return PerchWallet;\n}(React.Component);\n\nexport { PerchWallet as default };\n;\n\nvar PaymentCard = /*#__PURE__*/function (_React$Component2) {\n  _inherits(PaymentCard, _React$Component2);\n\n  var _super2 = _createSuper(PaymentCard);\n\n  function PaymentCard(props) {\n    var _this4;\n\n    _classCallCheck(this, PaymentCard);\n\n    _this4 = _super2.call(this, props);\n    _this4.state = {\n      deleteCard: false,\n      loading: false\n    };\n    return _this4;\n  }\n\n  _createClass(PaymentCard, [{\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      var _this$props = this.props,\n          selected = _this$props.selected,\n          setSelected = _this$props.setSelected,\n          card = _this$props.card,\n          userID = _this$props.userID,\n          removeCard = _this$props.removeCard,\n          index = _this$props.index,\n          selectedCard = _this$props.selectedCard;\n      var last4 = card.last4,\n          brand = card.brand;\n      if (this.props.type == 'listOfCards') return /*#__PURE__*/_jsxs(_Fragment, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.paymentRow,\n          id: styles.paymentRow_,\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            style: {\n              flexDirection: 'row',\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsx(\"img\", {\n              src: brand == 'Visa' ? \"/visaIcon.svg\" : brand == 'Mastercard' ? '/mastercardIcon.svg' : '/addPaymentCardIcon.svg',\n              alt: \"Perch Payment\",\n              className: brand == 'Visa' ? styles.visaIcon : brand == 'Mastercard' ? styles.masterCardIcon : styles.genericCard\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              className: styles.paymentCardNumber,\n              id: styles.paymentCardNumber_,\n              children: [\"XXXX XXXX XXXX \", last4]\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            id: styles.paymentRowButton,\n            children: this.state.deleteCard ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: styles.button2,\n                style: {\n                  backgroundColor: colors.RED,\n                  width: '80%'\n                },\n                onClick: function onClick() {\n                  deleteCard.call(_this5, userID, last4, selectedCard);\n                  removeCard(index);\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: styles.buttonText1,\n                  id: styles.paymentCardNumber_,\n                  children: \"Delete this card?\"\n                })\n              }), /*#__PURE__*/_jsx(AiOutlineClose, {\n                className: styles.closeDeletePayment,\n                onClick: function onClick() {\n                  _this5.setState({\n                    deleteCard: false\n                  });\n                }\n              })]\n            }) : /*#__PURE__*/_jsxs(_Fragment, {\n              children: [/*#__PURE__*/_jsx(\"div\", {\n                className: selected ? styles.buttonSelected : styles.button2,\n                style: {\n                  backgroundColor: colors.GREEN\n                },\n                onClick: function onClick() {\n                  setSelected(last4);\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: styles.buttonText1,\n                  id: styles.paymentCardNumber_,\n                  children: selected ? 'Selected' : 'Select card'\n                })\n              }), /*#__PURE__*/_jsx(\"div\", {\n                className: styles.button2,\n                style: {\n                  backgroundColor: colors.RED\n                },\n                onClick: function onClick() {\n                  _this5.setState({\n                    deleteCard: true\n                  });\n                },\n                children: /*#__PURE__*/_jsx(\"p\", {\n                  className: styles.buttonText1,\n                  id: styles.paymentCardNumber_,\n                  children: \"Delete Card\"\n                })\n              })]\n            })\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.sharedLine,\n          style: {\n            marginTop: '20px',\n            width: '100%'\n          }\n        })]\n      });else if (this.props.type == 'pickPayment') return (\n        /*#__PURE__*/\n        //TO MAKE A SELECTED ONE, THE PARENT COMPONENT SHOULD HAVE A SELECTED ITEM ID AND WE COMPARE ID HERE TO SHOW IF IT IS CONFIRMED OR NOT\n        _jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.paymentRow,\n            id: styles.addCardPayment,\n            children: [/*#__PURE__*/_jsxs(\"div\", {\n              style: {\n                flexDirection: 'row',\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsx(\"img\", {\n                src: \"/visaIcon.svg\",\n                alt: \"Perch Payment\",\n                className: styles.visaIcon\n              }), /*#__PURE__*/_jsx(\"p\", {\n                className: styles.paymentCardNumber,\n                id: styles.paymentCardNumber_,\n                children: \"\\u2022\\u2022\\u2022\\u2022 3456\"\n              })]\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.pickPaymentSelected,\n              style: {\n                backgroundColor: colors.GREEN,\n                opacity: 0.6\n              },\n              onClick: function onClick() {\n                _this5.setState({\n                  deleteCard: true\n                });\n              },\n              children: /*#__PURE__*/_jsx(\"p\", {\n                className: styles.buttonText1,\n                id: styles.paymentCardNumber_,\n                children: \"Selected\"\n              })\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.sharedLine,\n            style: {\n              marginTop: '0px',\n              width: '100%'\n            }\n          })]\n        })\n      );\n    }\n  }]);\n\n  return PaymentCard;\n}(React.Component);\n\n;","map":{"version":3,"sources":["/Users/ugo/Documents/Perch_Projects/Perch-Website/functions/panels/userPanels/perchWallet.js"],"names":["React","AiOutlineClose","AiOutlineRight","colors","isNumber","deleteCard","stripe","styles","firebase","loadStripe","Loader","CardElement","PerchWallet","props","userID","state","userDetails","database","ref","once","snapshot","arrayOfLast4","i","key","val","last4","card","brand","setState","selected","cards","value","update","then","error","errorMessage","message","index","splice","loading","createToken","number","formatCard","cardNumber","expMonth","Number","expiryDate","substring","expYear","cvc","ccv","name","token","buyKilometers","addCard","quantity","on","loadCards","formattedCard","length","push","removeCard","setSelected","cont","container","backgroundColor","WHITE","marginTop","title","color","BLACK","inputPaymentPanel","enterKilometerDiv","width","margin","fontFamily","GREY","text","sharedLine","fontSize","GREEN","marginBottom","paymentCont","paymentItem","paymentRow","addCardPayment","flexDirection","display","alignItems","visaIcon","marginRight","marginLeft","paymentCardNumber","paymentCardNumber_","button2","RED","buttonBottom","buttonText1","inputPaymentPanel_ADD","e","target","style","base","fontSmoothing","invalid","console","log","em","textAlign","createTokenWithCard","walletImage","toFixed","button1","Component","PaymentCard","selectedCard","type","paymentRow_","masterCardIcon","genericCard","paymentRowButton","call","closeDeletePayment","buttonSelected","pickPaymentSelected","opacity"],"mappings":"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","sourcesContent":["import React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineClose, AiOutlineRight } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors, isNumber, deleteCard, stripe } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport firebase from 'firebase';\nimport { loadStripe } from '@stripe/stripe-js';\nimport Loader from 'react-loader-spinner';\nimport { CardElement } from '@stripe/react-stripe-js';\n\nexport default class PerchWallet extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            buyKilometers: false,\n            addCard: true,//false,\n            userDetails: this.props.userDetails,\n            quantity: 0,\n            cards: [],\n            selected: null,\n\n            name: '',\n            cardNumber: '',\n            expiryDate: '',\n            ccv: '',\n            errorMessage: '',\n\n\n            loading: false,\n        };\n    };\n    componentDidMount() {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`perchKilometers/${userID}/quantity`).on('value', snapshot => {\n            if (!!snapshot)\n                this.setState({ quantity: snapshot.val() });\n        })\n        this.loadCards();\n    };\n    loadCards = () => {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`cards/${userID}`).once('value', snapshot => {\n            if (!!snapshot) {\n                let arrayOfLast4 = [], i = 0;\n                for (let key in snapshot.val()) {\n                    if (key != 'selected')\n                        arrayOfLast4[i] = {\n                            last4: snapshot.val()[key].card.last4,\n                            brand: snapshot.val()[key].card.brand,\n                        };\n                    else if (key == 'selected')\n                        this.setState({ selected: snapshot.val()[key] })\n                    i++;\n                }\n                this.setState({ cards: arrayOfLast4 });\n            }\n        })\n    };\n    setSelected = (value) => {\n        const { userID } = this.state.userDetails;\n        firebase.database().ref(`cards/${userID}`).update({\n            selected: value\n        }).then(() => {\n            this.setState({ selected: value })\n        }).catch(error => { this.setState({ errorMessage: error.message }) })\n    }\n    removeCard = (index) => {\n        let { cards } = this.state;\n        cards.splice(index, 1);\n        this.setState({ cards: cards })\n    };\n    createTokenWithCard = () => {\n        this.setState({ loading: true }, () => {\n            loadStripe('pk_test_A7jK4iCYHL045qgjjfzAfPxu')\n                .then(stripe => {\n                    stripe.createToken({\n                        number: this.formatCard(this.state.cardNumber),\n                        expMonth: Number(this.state.expiryDate.substring(0, 2)),\n                        expYear: Number(this.state.expiryDate.substring(5, 7)),\n                        cvc: (this.state.ccv),\n                        name: this.state.name,\n\n                    }).then(token => {\n                        this.setState({ errorMessage: token, loading: false })\n                        //storeCard.call(this, this.state.userID, token);\n                    }).catch(error => {\n                        this.setState({ loading: false, errorMessage: error.message });\n                    });\n                }).catch(error => {\n                    this.setState({ loading: false, errorMessage: error.message });\n                })\n        });\n    }\n    formatCard(card) {\n        const formattedCard = card.substring(0, 4) + card.substring(5, 9) + card.substring(10, 14) + card.substring(15, 19);\n        return (formattedCard);\n    }\n    render() {\n        let cards = [];\n        for (let i = 0; i < this.state.cards.length; i++)\n            cards.push(\n                <PaymentCard\n                    userID={this.state.userDetails.userID}\n                    key={this.state.cards[i].last4}\n                    card={this.state.cards[i]}\n                    index={i}\n                    removeCard={this.removeCard}\n                    setSelected={this.setSelected}\n                    selectedCard={this.state.selected}\n                    selected={this.state.selected === this.state.cards[i].last4}\n                    type={this.state.buyKilometers ? 'pickPayment' : 'listOfCards'} />\n            );\n        return (\n            <div className={styles.cont}>\n                {\n                    this.state.buyKilometers ?//buy kilometers\n                        <>\n                            <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                <p className={styles.title} style={{ color: colors.BLACK }}>Enter the amount of kilometers you would like to purchase</p>\n                                <input type=\"text\" placeholder=\"Enter amount of kilometers\" className={styles.inputPaymentPanel} />\n                                <div className={styles.enterKilometerDiv} style={{ marginTop: '20px' }}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Cost per kilometer</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Total cost of kilometers</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', color: colors.GREY }} className={styles.text}>Taxes</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Medium', }} className={styles.text}>{`$ 1.99`}</p>\n                                </div>\n                                <div className={styles.sharedLine} style={{ marginTop: '20px', width: '90%' }}></div>\n                                <div className={styles.enterKilometerDiv}>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Bold', fontSize: '120%' }} className={styles.text}>Total</p>\n                                    <p style={{ width: 'initial', margin: '0px', fontFamily: 'Gilroy-Bold', color: colors.GREEN, fontSize: '120%' }} className={styles.text}>{`$ 12.99`}</p>\n                                </div>\n\n                            </div>\n\n                            <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px', }}>\n                                <p className={styles.title} style={{ color: colors.BLACK }}>\n                                    Payment Methods\n                                </p>\n                                <p className={styles.text} style={{ color: colors.GREY, marginBottom: '20px' }}>\n                                    List of available payment methods. New payment methods can also be added.\n                                </p>\n\n                                <div className={styles.paymentCont}>\n                                    <div className={styles.paymentItem}>\n                                        {cards}\n                                        <div className={styles.paymentRow} id={styles.addCardPayment}>\n                                            <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                <img src=\"/PayPalLogo.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px', marginLeft: '0px' }} />\n                                                <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>PayPal</p>\n                                            </div>\n                                            <AiOutlineRight color={colors.BLACK} />\n                                        </div>\n                                        <div className={styles.sharedLine} style={{ marginTop: '0px', width: '100%' }}></div>\n                                        <div className={styles.paymentRow} id={styles.addCardPayment} onClick={() => { this.setState({ addCard: true, buyKilometers: false, errorMessage: '' }) }}>\n                                            <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                <img src=\"/addPaymentCardIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px' }} />\n                                                <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>Add Debit / Credit Card</p>\n                                            </div>\n                                            <AiOutlineRight color={colors.BLACK} />\n                                        </div>\n                                    </div>\n                                </div>\n\n                            </div>\n\n                            <div className={styles.enterKilometerDiv} style={{ marginTop: '20px', marginBottom: '150px', marginLeft: '2.5%', width: '95%' }}>\n                                <div className={styles.button2} style={{ backgroundColor: colors.RED }} id={styles.buttonBottom} onClick={() => { this.setState({ buyKilometers: false, addCard: false, errorMessage: '' }) }}>\n                                    <p className={styles.buttonText1}>Cancel</p>\n                                </div>\n                                <div className={styles.button2} style={{ backgroundColor: colors.GREEN }} id={styles.buttonBottom}>\n                                    <p className={styles.buttonText1}>Buy Kilometers</p>\n                                </div>\n                            </div>\n                        </> :\n                        this.state.addCard ?//add card\n                            <>\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>Add card</p>\n                                    <input type=\"text\"\n                                        placeholder=\"Name on Card\"\n                                        className={styles.inputPaymentPanel}\n                                        id={styles.inputPaymentPanel_ADD}\n                                        style={{ marginTop: '10px' }}\n                                        value={this.state.name}\n                                        onChange={(e) => {\n                                            const value = e.target.value;\n                                            this.setState({ name: value });\n                                        }}\n                                    />\n                                    <div className={styles.inputPaymentPanel}>\n                                        <CardElement\n                                            options={{\n                                                style: {\n                                                    base: {\n                                                        color: '#303238',\n                                                        fontSize: '16px',\n                                                        fontFamily: '\"Gill Sans\", sans-serif',\n                                                        fontSmoothing: 'antialiased',\n                                                        '::placeholder': {\n                                                            color: '#757575',\n                                                        },\n                                                    },\n                                                    invalid: {\n                                                        color: '#e5424d',\n                                                        ':focus': {\n                                                            color: '#303238',\n                                                        },\n                                                    },\n                                                }\n                                            }}\n                                            onChange={e => {\n                                                console.log(e)\n                                            }} />\n                                    </div>\n                                    \n                                    {this.state.errorMessage && <p className={styles.em} style={{ textAlign: 'initial' }}>{this.state.errorMessage}</p>}\n                                </div>\n                                <div className={styles.enterKilometerDiv} style={{ marginTop: '20px', marginBottom: '150px', marginLeft: '2.5%', width: '95%' }}>\n                                    <div className={styles.button2} style={{ backgroundColor: colors.RED }} id={styles.buttonBottom} onClick={() => { this.setState({ buyKilometers: false, addCard: false, errorMessage: '' }) }}>\n                                        <p className={styles.buttonText1}>Cancel</p>\n                                    </div>\n                                    <div\n                                        className={styles.button2}\n                                        style={{ backgroundColor: colors.GREEN }}\n                                        id={styles.buttonBottom}\n                                        onClick={() => {\n                                            if (this.state.name.length <= 3)\n                                                this.setState({ errorMessage: 'Please enter the full name on the card' });\n                                            else if (this.state.cardNumber.length < 19)\n                                                this.setState({ errorMessage: 'Please enter full card number' })\n                                            else if (this.state.expiryDate.length < 7)\n                                                this.setState({ errorMessage: 'Please enter full expiry date' })\n                                            else\n                                                this.createTokenWithCard();\n                                        }}>\n                                        {this.state.loading ?\n                                            <Loader\n                                                type=\"TailSpin\"\n                                                color={colors.WHITE}\n                                                height={'20px'}\n                                                width={'20px'}\n                                            /> :\n                                            <p className={styles.buttonText1}>Add Card</p>}\n                                    </div>\n                                </div>\n                            </>\n                            ://main page\n                            <>\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>Kilometers</p>\n                                    <p className={styles.text} style={{ color: colors.GREY }}>\n                                        You can make kilometer purchases from this panel. Also remeber that sharing your code with friends who book their first ride automatically gives you free kilometers.\n                                    </p>\n                                    <img src=\"/walletImage.svg\" alt=\"Purchase Perch Kilometers\" className={styles.walletImage} />\n                                    <p className={styles.title} style={{ width: 'initial', marginTop: '20px' }}>{`${this.state.quantity.toFixed(1)} kilometers`}</p>\n                                    <div className={styles.button1} style={{}} onClick={() => { this.setState({ buyKilometers: true, addCard: false, errorMessage: '' }) }}>\n                                        <p className={styles.buttonText1}>Buy kilometers</p>\n                                    </div>\n                                </div>\n\n                                <div className={styles.container} style={{ backgroundColor: colors.WHITE, marginTop: '20px', marginBottom: '150px' }}>\n                                    <p className={styles.title} style={{ color: colors.BLACK }}>\n                                        Payment Methods\n                                    </p>\n                                    <p className={styles.text} style={{ color: colors.GREY, marginBottom: '20px' }}>\n                                        List of available payment methods. New payment methods can also be added.\n                                    </p>\n\n                                    <div className={styles.paymentCont}>\n                                        <div className={styles.paymentItem}>\n                                            {cards}\n                                            <div className={styles.paymentRow} id={styles.addCardPayment} onClick={() => { this.setState({ addCard: true, buyKilometers: false, errorMessage: '' }) }}>\n                                                <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                                                    <img src=\"/addPaymentCardIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} style={{ marginRight: '15px' }} />\n                                                    <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>Add Debit / Credit Card</p>\n                                                </div>\n                                                <AiOutlineRight color={colors.BLACK} />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                </div>\n                            </>\n                }\n            </div >\n        )\n\n    }\n};\n\nclass PaymentCard extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            deleteCard: false,\n            loading: false,\n        }\n    }\n    render() {\n        const { selected, setSelected, card, userID, removeCard, index, selectedCard } = this.props;\n        const { last4, brand } = card;\n        if (this.props.type == 'listOfCards')\n            return (\n\n                <>\n                    <div className={styles.paymentRow} id={styles.paymentRow_}>\n                        <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                            <img\n                                src={brand == 'Visa' ? \"/visaIcon.svg\" : brand == 'Mastercard' ? '/mastercardIcon.svg' : '/addPaymentCardIcon.svg'} alt=\"Perch Payment\"\n                                className={brand == 'Visa' ? styles.visaIcon : brand == 'Mastercard' ? styles.masterCardIcon : styles.genericCard} />\n                            <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}>XXXX XXXX XXXX {last4}</p>\n                        </div>\n                        <div id={styles.paymentRowButton}>\n                            {\n                                this.state.deleteCard ?\n                                    <>\n                                        <div className={styles.button2} style={{ backgroundColor: colors.RED, width: '80%' }}\n                                            onClick={() => {\n                                                deleteCard.call(this, userID, last4, selectedCard);\n                                                removeCard(index);\n                                            }}\n                                        >\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Delete this card?</p>\n                                        </div>\n                                        <AiOutlineClose className={styles.closeDeletePayment} onClick={() => { this.setState({ deleteCard: false }) }} />\n                                    </> :\n                                    <>\n                                        <div\n                                            className={selected ? styles.buttonSelected : styles.button2}\n                                            style={{ backgroundColor: colors.GREEN }}\n                                            onClick={() => {\n                                                setSelected(last4)\n                                            }}>\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>{selected ? 'Selected' : 'Select card'}</p>\n                                        </div>\n                                        <div className={styles.button2} style={{ backgroundColor: colors.RED }} onClick={() => { this.setState({ deleteCard: true }) }}>\n                                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Delete Card</p>\n                                        </div>\n                                    </>}\n                        </div>\n                    </div>\n                    <div className={styles.sharedLine} style={{ marginTop: '20px', width: '100%' }}></div>\n                </>\n\n\n\n            );\n        else if (this.props.type == 'pickPayment')\n            return (//TO MAKE A SELECTED ONE, THE PARENT COMPONENT SHOULD HAVE A SELECTED ITEM ID AND WE COMPARE ID HERE TO SHOW IF IT IS CONFIRMED OR NOT\n                <>\n                    <div className={styles.paymentRow} id={styles.addCardPayment} >\n                        <div style={{ flexDirection: 'row', display: 'flex', alignItems: 'center', }}>\n                            <img src=\"/visaIcon.svg\" alt=\"Perch Payment\" className={styles.visaIcon} />\n                            <p className={styles.paymentCardNumber} id={styles.paymentCardNumber_}> 3456</p>\n                        </div>\n                        <div className={styles.pickPaymentSelected} style={{ backgroundColor: colors.GREEN, opacity: 0.6 }} onClick={() => { this.setState({ deleteCard: true }) }}>\n                            <p className={styles.buttonText1} id={styles.paymentCardNumber_}>Selected</p>\n                        </div>\n                    </div>\n                    <div className={styles.sharedLine} style={{ marginTop: '0px', width: '100%' }}></div>\n                </>\n            );\n    }\n};"]},"metadata":{},"sourceType":"module"}