{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { AiOutlineCheck } from 'react-icons/ai';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { validateVehicle, dateOfQuery, colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar VehicleApplications = /*#__PURE__*/function (_React$Component) {\n  _inherits(VehicleApplications, _React$Component);\n\n  var _super = _createSuper(VehicleApplications);\n\n  function VehicleApplications(props) {\n    var _this;\n\n    _classCallCheck(this, VehicleApplications);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"loadResult\", function () {\n      if (_this.state.userDetails) {\n        firebase.database().ref(\"vehicleAdditionRequest\").once('value', function (snapshot) {\n          _this.setState({\n            result: snapshot.val() ? snapshot.val() : {}\n          });\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"loadDocument\", function (userID, documentStorageID) {\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleRegistration\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docRegistrationURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleInsurance\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docInsuranceURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleInspection\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docInspectionURL: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n      firebase.storage().ref(\"driverVehicleDocs/\".concat(userID, \"/\").concat(documentStorageID, \"/vehicleImage\")).getDownloadURL().then(function (result) {\n        _this.setState({\n          docVehicleImage: result\n        });\n      })[\"catch\"](function (error) {\n        console.log(error.message);\n      });\n    });\n\n    _this.state = {\n      showDocs: false,\n      result: {},\n      docList: [\"Vehicle insurance\", \"Vehicle registration\", \"Vehicle inspection\"],\n      selected: {},\n      docRegistrationURL: '',\n      docInsuranceURL: '',\n      docInspectionURL: '',\n      docVehicleImage: '',\n      inspectionVerified: false,\n      registrationVerified: false,\n      insuranceVerified: false,\n      urlToShow: null\n    };\n    return _this;\n  }\n\n  _createClass(VehicleApplications, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadResult();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var requirements = [];\n\n      var _loop = function _loop(i) {\n        var urlToShow = '';\n        if (_this2.state.docList[i] == 'Vehicle insurance') urlToShow = _this2.state.docInsuranceURL;else if (_this2.state.docList[i] == 'Vehicle registration') urlToShow = _this2.state.docRegistrationURL;else if (_this2.state.docList[i] == 'Vehicle inspection') urlToShow = _this2.state.docInspectionURL;\n        var isVerified = false;\n        if (_this2.state.docList[i] == 'Vehicle insurance') isVerified = _this2.state.insuranceVerified;else if (_this2.state.docList[i] == 'Vehicle registration') isVerified = _this2.state.registrationVerified;else if (_this2.state.docList[i] == 'Vehicle inspection') isVerified = _this2.state.inspectionVerified;\n        requirements.push( /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverFAQ_PICDESC,\n          id: styles.driverROUNDSUPPORT,\n          children: [/*#__PURE__*/_jsx(\"a\", {\n            href: urlToShow,\n            target: '_blank',\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.text,\n              style: {\n                color: '#000000',\n                width: 'initial',\n                margin: '0px',\n                marginLeft: '10px'\n              },\n              children: _this2.state.docList[i]\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.driver_APP_RADIO,\n            style: {\n              backgroundColor: colors.GREEN,\n              opacity: isVerified ? 1 : 0.5\n            },\n            onClick: function onClick() {\n              if (_this2.state.docList[i] == 'Vehicle insurance') _this2.setState({\n                insuranceVerified: true\n              });else if (_this2.state.docList[i] == 'Vehicle registration') _this2.setState({\n                registrationVerified: true\n              });else if (_this2.state.docList[i] == 'Vehicle inspection') _this2.setState({\n                inspectionVerified: true\n              });\n            },\n            children: isVerified ? /*#__PURE__*/_jsx(AiOutlineCheck, {\n              color: colors.WHITE,\n              size: '15px'\n            }) : /*#__PURE__*/_jsx(_Fragment, {})\n          })]\n        }));\n      };\n\n      for (var i = 0; i < this.state.docList.length; i++) {\n        _loop(i);\n      }\n\n      if (!this.state.userDetails && this.props.userDetails) this.setState({\n        userDetails: this.props.userDetails\n      }, function () {\n        _this2.loadResult();\n      });\n      var results = [];\n      var keys = Object.keys(this.state.result).sort();\n\n      var _loop2 = function _loop2(k) {\n        var _this2$state$result$k = _this2.state.result[keys[k]],\n            year = _this2$state$result$k.year,\n            make = _this2$state$result$k.make,\n            model = _this2$state$result$k.model,\n            timestamp = _this2$state$result$k.timestamp,\n            userID = _this2$state$result$k.userID,\n            documentStorageID = _this2$state$result$k.documentStorageID;\n        var carName = \"\".concat(year, \" \").concat(make, \" \").concat(model);\n        results.push( /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: styles.previousMessageSum,\n            onClick: function onClick() {\n              _this2.loadDocument(userID, documentStorageID);\n\n              _this2.setState({\n                showDocs: true,\n                selected: _objectSpread({\n                  carName: carName\n                }, _this2.state.result[keys[k]])\n              });\n            },\n            children: [/*#__PURE__*/_jsx(\"p\", {\n              style: {\n                fontSize: '95%'\n              },\n              children: carName\n            }), /*#__PURE__*/_jsx(\"div\", {\n              className: styles.previousMessageDate,\n              children: /*#__PURE__*/_jsx(\"p\", {\n                style: {\n                  fontFamily: 'Gilroy-Semibold',\n                  fontSize: '75%',\n                  marginRight: '-10px',\n                  paddingLeft: '10px'\n                },\n                children: dateOfQuery(timestamp)\n              })\n            })]\n          }), k == keys.length - 1 ? /*#__PURE__*/_jsx(_Fragment, {}) : /*#__PURE__*/_jsx(\"div\", {\n            className: styles.sharedLine,\n            style: {\n              marginTop: '5px'\n            }\n          })]\n        }));\n      };\n\n      for (var k = 0; k < keys.length; k++) {\n        _loop2(k);\n      }\n\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.cont,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.container,\n          style: {\n            backgroundColor: colors.WHITE,\n            marginTop: '20px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.title,\n            style: {\n              color: colors.BLACK,\n              marginBottom: '20px'\n            },\n            children: this.state.showDocs ? /*#__PURE__*/_jsxs(_Fragment, {\n              children: [this.state.selected.carName, \" - \", /*#__PURE__*/_jsx(\"span\", {\n                style: {\n                  color: colors.GREEN\n                },\n                children: this.state.selected.plateNumber\n              })]\n            }) : 'Vehicle Applications'\n          }), this.state.showDocs ? /*#__PURE__*/_jsxs(_Fragment, {\n            children: [requirements, /*#__PURE__*/_jsx(\"img\", {\n              src: this.state.docVehicleImage,\n              className: styles.driverVehicleIMAGE\n            })]\n          }) : results]\n        }), this.state.showDocs ? /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.enterKilometerDiv,\n          style: {\n            marginTop: '20px',\n            marginBottom: '150px',\n            marginLeft: '2.5%',\n            width: '95%'\n          },\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.RED\n            },\n            id: styles.buttonBottom,\n            onClick: function onClick() {\n              _this2.setState({\n                showDocs: false\n              });\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Cancel\"\n            })\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: styles.button2,\n            style: {\n              backgroundColor: colors.GREEN\n            },\n            id: styles.buttonBottom,\n            onClick: function onClick() {\n              if (_this2.state.inspectionVerified && _this2.state.insuranceVerified && _this2.state.registrationVerified) {\n                var _this2$state$selected = _this2.state.selected,\n                    userID = _this2$state$selected.userID,\n                    timestamp = _this2$state$selected.timestamp,\n                    dateFormat = _this2$state$selected.dateFormat;\n                validateVehicle.call(_this2, userID, timestamp, dateFormat);\n\n                _this2.setState({\n                  showDocs: false\n                });\n              } else alert('Please verify all the documents by ticking the green button next to it');\n            },\n            children: /*#__PURE__*/_jsx(\"p\", {\n              className: styles.buttonText1,\n              children: \"Approve Vehicle\"\n            })\n          })]\n        }) : /*#__PURE__*/_jsx(_Fragment, {})]\n      });\n    }\n  }]);\n\n  return VehicleApplications;\n}(React.Component);\n\nexport { VehicleApplications as default };\n;","map":null,"metadata":{},"sourceType":"module"}