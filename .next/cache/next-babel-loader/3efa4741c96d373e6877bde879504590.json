{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/edokoh9/Documents/PerchWebsite/perch/pages/validation.js\";\nimport Head from 'next/head';\nimport styles from './s/articles/layout.module.css';\nimport React from 'react';\nimport Header from './components/header/header';\nimport Footer from './components/footer/footer';\nimport Loader from 'react-loader-spinner';\nimport firebase from 'firebase';\nimport { resetPassword, emailFormat } from '../functions/functions';\nimport ShareIcons from '../functions/shareIcons';\nimport Router from 'next/router';\nexport default class index extends React.Component {\n  static async getInitialProps({\n    query\n  }) {\n    const {\n      mode,\n      oobCode,\n      email\n    } = query;\n    return {\n      mode: mode,\n      oobCode: oobCode,\n      email: email\n    };\n  }\n\n  constructor() {\n    super();\n    this.state = {\n      password: '',\n      confirmPassword: '',\n      loading: false,\n      errorMessage: '',\n      validationFailed: false,\n      validationCompleted: false\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.mode == 'verifyEmail' && this.props.email) {\n      const email = this.props.email;\n      firebase.database().ref(`emailList/${emailFormat(email, 'emailToString')}`).once('value', snapshot => {\n        if (snapshot.val()) firebase.database().ref(`users/${snapshot.val()}/summarizedHistory`).update({\n          emailVerified: true\n        }).then(() => {\n          this.setState({\n            validationCompleted: true\n          });\n        }).catch(error => {\n          this.setState({\n            errorMessage: error.message,\n            validationFailed: true\n          });\n        });else this.setState({\n          errorMessage: 'This user does not exist, please contact us for further assistance',\n          validationFailed: true\n        });\n      }).catch(error => {\n        this.setState({\n          errorMessage: error.message,\n          validationFailed: true\n        });\n      });\n    }\n\n    ;\n  }\n\n  render() {\n    const {\n      mode,\n      oobCode,\n      email\n    } = this.props;\n\n    let title = '',\n        subtitle = '',\n        pageTitle = '',\n        content = /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n\n    switch (mode) {\n      case 'resetPassword':\n        {\n          pageTitle = 'Reset Password';\n          title = 'Reset your password form';\n          subtitle = 'Enter your new password and confirm it below.';\n          content = /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Enter new password\",\n              className: styles.contactUsEmail,\n              value: this.state.password,\n              onChange: event => {\n                this.setState({\n                  password: event.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Re-enter your new password\",\n              className: styles.contactUsEmail,\n              value: this.state.confirmPassword,\n              onChange: event => {\n                this.setState({\n                  confirmPassword: event.target.value\n                });\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true);\n        }\n        break;\n\n      case 'recoverEmail':\n        {\n          pageTitle = 'Recover Email';\n        }\n        break;\n\n      case 'verifyEmail':\n        {\n          pageTitle = 'Verify Email';\n          title = 'Verify your email';\n          if (this.state.validationCompleted) subtitle = `Your email, ${email} has been verified`;else if (this.state.validationFailed) subtitle = 'Email verification failed. Please contact us for further assistance';else subtitle = 'Verifying...';\n        }\n        break;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.container,\n      children: [/*#__PURE__*/_jsxDEV(Head, {\n        children: [/*#__PURE__*/_jsxDEV(\"title\", {\n          children: `${pageTitle} | Perch`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"viewport\",\n          content: \"width=device-width, initial-scale=1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"icon\",\n          type: \"image/png\",\n          sizes: \"32x32\",\n          href: \"/favicon-32x32.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"icon\",\n          type: \"image/png\",\n          sizes: \"16x16\",\n          href: \"/favicon-16x16.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"apple-touch-icon\",\n          sizes: \"180x180\",\n          href: \"/apple-touch-icon.png\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"manifest\",\n          href: \"/site.webmanifest\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n          rel: \"mask-icon\",\n          href: \"/safari-pinned-tab.svg\",\n          color: \"#5bbad5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n          name: \"theme-color\",\n          content: \"#ffffff\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"html\", {\n          lang: \"en\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"/articlesPageBack1.svg\",\n        alt: \"Perch Carpool\",\n        className: styles.mainPageBack1\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.body,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.c_,\n          style: {\n            marginTop: '15px',\n            marginBottom: '20px',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.t1,\n            style: {\n              margin: '0px'\n            },\n            children: title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ShareIcons, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.contactUsCont,\n          style: {\n            paddingBottom: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.contactUsTitle,\n            style: {\n              marginTop: '20px',\n              marginBottom: '0px'\n            },\n            children: subtitle\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this), content, /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.em,\n            style: {\n              marginTop: '20px',\n              marginBottom: '0px'\n            },\n            children: this.state.errorMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this), mode == 'resetPassword' ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.contactUsLC,\n          children: /*#__PURE__*/_jsxDEV(\"a\", {\n            className: styles.button2,\n            onClick: () => {\n              switch (mode) {\n                case 'resetPassword':\n                  {\n                    if (this.state.password == '') this.setState({\n                      errorMessage: 'Please enter a new password'\n                    });else if (this.state.confirmPassword != this.state.password) this.setState({\n                      errorMessage: 'Passwords do not match'\n                    });else resetPassword.call(this, oobCode, this.state.password, email);\n                  }\n                  break;\n\n                case 'recoverEmail':\n                  {}\n                  break;\n\n                case 'verifyEmail':\n                  {}\n                  break;\n              }\n            },\n            children: this.state.loading ? /*#__PURE__*/_jsxDEV(Loader, {\n              type: \"TailSpin\",\n              color: '#ffffff',\n              height: '20px',\n              width: '20px'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 37\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: styles.buttonText2,\n              children: \"Reset password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/edokoh9/Documents/PerchWebsite/perch/pages/validation.js"],"names":["Head","styles","React","Header","Footer","Loader","firebase","resetPassword","emailFormat","ShareIcons","Router","index","Component","getInitialProps","query","mode","oobCode","email","constructor","state","password","confirmPassword","loading","errorMessage","validationFailed","validationCompleted","componentDidMount","props","database","ref","once","snapshot","val","update","emailVerified","then","setState","catch","error","message","render","title","subtitle","pageTitle","content","contactUsEmail","event","target","value","container","mainPageBack1","body","c_","marginTop","marginBottom","justifyContent","alignItems","t1","margin","contactUsCont","paddingBottom","contactUsTitle","em","contactUsLC","button2","call","buttonText2"],"mappings":"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","sourcesContent":["import Head from 'next/head';\nimport styles from './s/articles/layout.module.css';\nimport React from 'react';\nimport Header from './components/header/header';\nimport Footer from './components/footer/footer';\nimport Loader from 'react-loader-spinner';\nimport firebase from 'firebase';\nimport { resetPassword, emailFormat } from '../functions/functions';\nimport ShareIcons from '../functions/shareIcons';\nimport Router from 'next/router';\n\nexport default class index extends React.Component {\n    static async getInitialProps({ query }) {\n        const { mode, oobCode, email } = query;\n\n        return {\n            mode: mode,\n            oobCode: oobCode,\n            email: email,\n        }\n    }\n\n    constructor() {\n        super();\n\n        this.state = {\n            password: '',\n            confirmPassword: '',\n            loading: false,\n            errorMessage: '',\n\n            validationFailed: false,\n            validationCompleted: false,\n        };\n    };\n    componentDidMount() {\n        if (this.props.mode == 'verifyEmail' && this.props.email) {\n            const email = this.props.email;\n            firebase.database().ref(`emailList/${emailFormat(email, 'emailToString')}`)\n                .once('value', snapshot => {\n                    if (snapshot.val())\n                        firebase.database().ref(`users/${snapshot.val()}/summarizedHistory`).update({\n                            emailVerified: true\n                        })\n                            .then(() => {\n                                this.setState({ validationCompleted: true, })\n                            })\n                            .catch(error => {\n                                this.setState({ errorMessage: error.message, validationFailed: true, })\n                            })\n                    else\n                        this.setState({ errorMessage: 'This user does not exist, please contact us for further assistance', validationFailed: true })\n                })\n                .catch(error => {\n                    this.setState({ errorMessage: error.message, validationFailed: true })\n                })\n        };\n    };\n    render() {\n\n        const { mode, oobCode, email } = this.props;\n        let title = '',\n            subtitle = '',\n            pageTitle = '',\n            content = <></>;\n\n        switch (mode) {\n            case 'resetPassword': {\n\n                pageTitle = 'Reset Password';\n                title = 'Reset your password form';\n                subtitle = 'Enter your new password and confirm it below.';\n                content = <>\n                    <input type=\"password\"\n                        placeholder=\"Enter new password\"\n                        className={styles.contactUsEmail}\n                        value={this.state.password}\n                        onChange={(event) => { this.setState({ password: event.target.value }) }}\n                    />\n\n                    <input type=\"password\"\n                        placeholder=\"Re-enter your new password\"\n                        className={styles.contactUsEmail}\n                        value={this.state.confirmPassword}\n                        onChange={(event) => { this.setState({ confirmPassword: event.target.value }) }}\n                    />\n                </>;\n\n            } break;\n            case 'recoverEmail': {\n                pageTitle = 'Recover Email';\n\n            } break;\n            case 'verifyEmail': {\n                pageTitle = 'Verify Email';\n                title = 'Verify your email';\n                if (this.state.validationCompleted)\n                    subtitle = `Your email, ${email} has been verified`;\n                else if (this.state.validationFailed)\n                    subtitle = 'Email verification failed. Please contact us for further assistance';\n                else\n                    subtitle = 'Verifying...';\n            } break;\n        }\n\n        return (\n            <div className={styles.container}>\n                <Head>\n                    <title>{`${pageTitle} | Perch`}</title>\n                    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"></meta>\n                    <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/favicon-32x32.png\" />\n                    <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/favicon-16x16.png\" />\n                    <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/apple-touch-icon.png\" />\n                    <link rel=\"manifest\" href=\"/site.webmanifest\" />\n                    <link rel=\"mask-icon\" href=\"/safari-pinned-tab.svg\" color=\"#5bbad5\" />\n                    <meta name=\"theme-color\" content=\"#ffffff\" />\n                    <html lang=\"en\"></html>\n                </Head>\n                <Header />\n                <img src=\"/articlesPageBack1.svg\" alt=\"Perch Carpool\" className={styles.mainPageBack1} />\n                <div className={styles.body}>\n\n                    <div className={styles.c_} style={{ marginTop: '15px', marginBottom: '20px', justifyContent: 'space-between', alignItems: 'center', }}>\n                        <p className={styles.t1} style={{ margin: '0px' }}>{title}</p>\n                        <ShareIcons />\n                    </div>\n\n                    {/* <p className={styles.subTitle} >{subtitle}</p> */}\n                    <div className={styles.contactUsCont} style={{ paddingBottom: '20px' }}>\n                        <p className={styles.contactUsTitle} style={{ marginTop: '20px', marginBottom: '0px' }}>{subtitle}</p>\n                        {content}\n                        <p className={styles.em} style={{ marginTop: '20px', marginBottom: '0px' }}>{this.state.errorMessage}</p>\n                    </div>\n                    {mode == 'resetPassword' ?\n                        <div className={styles.contactUsLC}>\n                            <a className={styles.button2}\n                                onClick={() => {\n                                    switch (mode) {\n                                        case 'resetPassword': {\n                                            if (this.state.password == '')\n                                                this.setState({ errorMessage: 'Please enter a new password' });\n                                            else if (this.state.confirmPassword != this.state.password)\n                                                this.setState({ errorMessage: 'Passwords do not match' });\n                                            else\n                                                resetPassword.call(this, oobCode, this.state.password, email);\n                                        } break;\n                                        case 'recoverEmail': {\n\n                                        } break;\n                                        case 'verifyEmail': {\n\n                                        } break;\n                                    }\n\n                                }}>\n                                {this.state.loading ?\n                                    <Loader\n                                        type=\"TailSpin\"\n                                        color={'#ffffff'}\n                                        height={'20px'}\n                                        width={'20px'} /> :\n                                    <p className={styles.buttonText2}>Reset password</p>}\n                            </a>\n\n                        </div> : <></>}\n                </div>\n                <Footer />\n            </div>\n        )\n\n    }\n}\n"]},"metadata":{},"sourceType":"module"}