{"ast":null,"code":"import firebase from 'firebase';\nimport React from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { colors } from '../../functions';\nimport styles from '../panel_layout.module.css';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default class AdminDashBoard extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      sharedLinks: true,\n      userDetails: this.props.userDetails,\n      numberOfDriverApplications: 0,\n      unansweredMessages: 0,\n      unansweredDriverMessages: 0,\n      numberOfVehicleAdditionRequest: 0,\n      numberOfCancelledTrips: 0,\n      allTimeAnalytics: {},\n      weeklyAnalytics: {}\n    };\n  }\n\n  componentDidMount() {\n    firebase.database().ref(`analytics/numberOfUserFeedbackMessages`).on('value', snapshot => {\n      this.setState({\n        unansweredMessages: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfCancelledTrips`).on('value', snapshot => {\n      this.setState({\n        numberOfCancelledTrips: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfDriverFeedbackMessages`).on('value', snapshot => {\n      this.setState({\n        unansweredDriverMessages: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfVehicleAdditionRequest`).on('value', snapshot => {\n      this.setState({\n        numberOfVehicleAdditionRequest: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/numberOfDriverApplications`).on('value', snapshot => {\n      this.setState({\n        numberOfDriverApplications: snapshot.val()\n      });\n    });\n    firebase.database().ref(`analytics/allTimeAnalytics/admin`).once('value', snapshot => {\n      this.setState({\n        allTimeAnalytics: snapshot.val()\n      });\n    });\n    firebase.database().ref(`currentWeek/value`).once('value', week => {\n      firebase.database().ref(`analytics/weeklyAnalytics/${week.val()}/admin`).once('value', snapshot => {\n        this.setState({\n          weeklyAnalytics: snapshot.val()\n        });\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.cont,\n      children: [/*#__PURE__*/_jsx(AdminDashSummary, {\n        title: 'WH',\n        data: this.state.weeklyAnalytics\n      }), /*#__PURE__*/_jsx(AdminDashSummary, {\n        title: 'OH',\n        data: this.state.allTimeAnalytics\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"New driver applications\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOfDriverApplications, \" new driver applications left\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"New vehicle applications\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOfVehicleAdditionRequest, \" new vehicle applications left\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Unanswered messages\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.unansweredMessages, \" unaswered messages\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Unanswered driver messages\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.unansweredDriverMessages, \" unaswered driver messages\"]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.container,\n        style: {\n          backgroundColor: colors.GREEN,\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.title,\n          style: {\n            color: colors.WHITE\n          },\n          children: \"Cancelled trips\"\n        }), /*#__PURE__*/_jsxs(\"p\", {\n          className: styles.text,\n          style: {\n            color: colors.WHITE\n          },\n          children: [\"You have \", this.state.numberOfCancelledTrips, \" unresolved cancelled trips\"]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          backgroundColor: colors.WHITE,\n          marginTop: '20px',\n          marginBottom: '150px'\n        }\n      })]\n    });\n  }\n\n}\n;\n\nconst AdminDashSummary = ({\n  title,\n  data\n}) => {\n  var _data$perchKilometers, _data$perchKilometers2, _data$cancelledTrips, _data$cancelledTrips2;\n\n  const rendervalid = x => {\n    if (x) return x;else return 0;\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.container,\n    style: {\n      backgroundColor: colors.WHITE,\n      marginTop: '20px'\n    },\n    children: [title == 'OH' ? /*#__PURE__*/_jsx(\"div\", {\n      className: styles.enterKilometerDiv,\n      children: /*#__PURE__*/_jsx(\"p\", {\n        className: styles.title,\n        style: {\n          color: colors.BLACK,\n          width: 'initial'\n        },\n        children: \"Overall history\"\n      })\n    }) : /*#__PURE__*/_jsx(\"p\", {\n      className: styles.title,\n      style: {\n        color: colors.BLACK\n      },\n      children: \"Weekly History\"\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.driverDashboardCont,\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboard_TE,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Total number of users\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.GREEN\n            },\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.numberOfUsers)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Perch kms (Sign Up)\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$perchKilometers = data.perchKilometersGivenOut) === null || _data$perchKilometers === void 0 ? void 0 : _data$perchKilometers.signUp)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Perch kms (Referrals)\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$perchKilometers2 = data.perchKilometersGivenOut) === null || _data$perchKilometers2 === void 0 ? void 0 : _data$perchKilometers2.referral)\n          })]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.sharedLine,\n        style: {\n          width: '95%',\n          backgroundColor: 'rgba(112, 112, 112, 0.19)'\n        }\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.driverDashboard_TE,\n        style: {\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Completed trips\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.completedTrips)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginLeft: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Passengers carried\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.passengersCarried)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Driver's to be paid\"\n          }), /*#__PURE__*/_jsxs(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.BLUE\n            },\n            children: [\"$\", rendervalid(data === null || data === void 0 ? void 0 : data.toBePaidToDrivers).toFixed(2)]\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Rider cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips = data.cancelledTrips) === null || _data$cancelledTrips === void 0 ? void 0 : _data$cancelledTrips.rider)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Driver cancellations\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {\n              color: colors.RED\n            },\n            children: rendervalid(data === null || data === void 0 ? void 0 : (_data$cancelledTrips2 = data.cancelledTrips) === null || _data$cancelledTrips2 === void 0 ? void 0 : _data$cancelledTrips2.driver)\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.driverDashboard_BOX,\n          style: {\n            marginRight: '0px'\n          },\n          children: [/*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTITLE,\n            children: \"Number of deleted accounts\"\n          }), /*#__PURE__*/_jsx(\"p\", {\n            className: styles.driverDashboard_BOXTEXT,\n            style: {},\n            children: rendervalid(data === null || data === void 0 ? void 0 : data.numberOfDeletedUsers)\n          })]\n        })]\n      })]\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}