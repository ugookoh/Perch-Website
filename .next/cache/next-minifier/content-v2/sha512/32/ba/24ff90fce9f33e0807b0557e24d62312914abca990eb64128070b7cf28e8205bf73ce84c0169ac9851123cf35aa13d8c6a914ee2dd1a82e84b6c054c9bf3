{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[57],{HkCf:function(t,e,o){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/s/db/d_app_dash\",function(){return o(\"l2Oc\")}])},l2Oc:function(t,e,o){\"use strict\";o.r(e),o.d(e,\"default\",(function(){return N}));var n=o(\"1OyB\"),a=o(\"vuIU\"),c=o(\"JX7q\"),i=o(\"Ji7U\"),s=o(\"md7G\"),l=o(\"foSv\"),r=o(\"rePB\"),_=o(\"nKUr\"),d=o(\"q1tI\"),u=o.n(d),h=o(\"mw2Z\"),p=o.n(h),j=o(\"8Kt/\"),b=o.n(j),x=o(\"+jxT\"),f=o(\"Z6QF\"),m=o(\"nOHt\"),g=o.n(m),O=o(\"8rXc\"),y=o(\"JZFu\"),v=o(\"l099\"),w=o(\"9uY5\");function S(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=Object(l.a)(t);if(e){var a=Object(l.a)(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return Object(s.a)(this,o)}}var N=function(t){Object(i.a)(o,t);var e=S(o);function o(){var t;return Object(n.a)(this,o),t=e.call(this),Object(r.a)(Object(c.a)(t),\"setImage\",(function(e){y.a.storage().ref(\"\".concat(e)).getDownloadURL().then((function(e){t.setState({url:e})})).catch((function(t){console.log(t.message)}))})),Object(r.a)(Object(c.a)(t),\"nextStage\",(function(e){t.setState({currentState:{stage:e}})})),Object(r.a)(Object(c.a)(t),\"updateWindowDimensions\",(function(){t.setState({width:window.innerWidth,height:window.innerHeight})})),t.state={width:0,height:0,loggedIn:\"NULL\",currentState:{stage:\"one\"},userID:\"\",url:null,firstName:null},t}return Object(a.a)(o,[{key:\"componentDidMount\",value:function(){var t=this;this.updateWindowDimensions(),window.addEventListener(\"resize\",this.updateWindowDimensions),y.a.auth().onAuthStateChanged((function(e){e?t.setState({userID:e.uid},(function(){y.a.database().ref(\"users/\".concat(e.uid,\"/firstName\")).once(\"value\",(function(e){t.setState({firstName:e.val()})})).catch((function(t){console.log(t.message)})),y.a.database().ref(\"users/\".concat(e.uid,\"/photoRef\")).once(\"value\",(function(e){t.setImage(e.val())})).catch((function(t){console.log(t.message)})),y.a.database().ref(\"driverApplications/\".concat(e.uid)).once(\"value\",(function(o){o.val()?t.setState({currentState:o.val(),loggedIn:\"TRUE\"}):(y.a.database().ref(\"users/\".concat(e.uid)).update({driverVerified:\"PENDING\"}).catch((function(t){console.log(t.message)})),y.a.database().ref(\"driverApplications/\".concat(e.uid)).update({stage:\"one\"}).then((function(){t.setState({loggedIn:\"TRUE\"})})).catch((function(t){console.log(t.message)})))})).catch((function(t){console.log(t.message)}))})):t.setState({loggedIn:\"FALSE\"})}))}},{key:\"componentWillUnmount\",value:function(){window.removeEventListener(\"resize\",this.updateWindowDimensions)}},{key:\"render\",value:function(){var t=this;if(\"FALSE\"==this.state.loggedIn&&g.a.push(\"/s/auth/d_si_su\").then((function(){return window.scrollTo(0,0)})),\"TRUE\"!=this.state.loggedIn)return Object(_.jsx)(v.default,{});var e=Object(_.jsx)(_.Fragment,{}),o=\"\";switch(this.state.currentState.stage){case\"one\":o=\"Vehicle Confirmation\",e=Object(_.jsx)(O.u,{userID:this.state.userID,nextStage:this.nextStage.bind(this)});break;case\"two\":o=\"Upload Documents\",e=Object(_.jsx)(O.r,{userID:this.state.userID,nextStage:this.nextStage.bind(this)});break;case\"three\":o=\"Application Status\",e=Object(_.jsx)(O.b,{userID:this.state.userID})}return Object(_.jsxs)(\"div\",{className:p.a.container,style:{height:0!=this.state.height?this.state.height:\"100vh\"},children:[Object(_.jsxs)(b.a,{children:[Object(_.jsx)(\"title\",{children:\"Driver Application | Perch\"}),Object(_.jsx)(\"meta\",{name:\"viewport\",content:\"width=device-width, initial-scale=1\"}),Object(_.jsx)(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"32x32\",href:\"/favicon-32x32.png\"}),Object(_.jsx)(\"link\",{rel:\"icon\",type:\"image/png\",sizes:\"16x16\",href:\"/favicon-16x16.png\"}),Object(_.jsx)(\"link\",{rel:\"apple-touch-icon\",sizes:\"180x180\",href:\"/apple-touch-icon.png\"}),Object(_.jsx)(\"link\",{rel:\"manifest\",href:\"/site.webmanifest\"}),Object(_.jsx)(\"link\",{rel:\"mask-icon\",href:\"/safari-pinned-tab.svg\",color:\"#5bbad5\"}),Object(_.jsx)(\"meta\",{name:\"theme-color\",content:\"#ffffff\"}),Object(_.jsx)(\"html\",{lang:\"en\"})]}),Object(_.jsxs)(\"div\",{className:p.a.header,children:[Object(_.jsx)(\"div\",{className:p.a.logoBox,children:Object(_.jsx)(\"a\",{href:\"/\",children:Object(_.jsx)(\"div\",{className:p.a.logo,children:Object(_.jsx)(f.c,{color:\"#FFFFFF\"})})})}),Object(_.jsxs)(\"div\",{className:p.a.optionShadowBox,children:[Object(_.jsx)(\"p\",{className:p.a.optionTitle,children:o}),Object(_.jsxs)(\"div\",{className:p.a.textRow1,children:[this.state.firstName?Object(_.jsxs)(_.Fragment,{children:[this.state.url?Object(_.jsx)(\"img\",{src:this.state.url,className:p.a.dp,style:{objectFit:\"cover\",borderWidth:\"0px\"}}):Object(_.jsx)(\"div\",{className:p.a.dp}),Object(_.jsx)(\"p\",{className:p.a.text_,children:\"Hello, \".concat(this.state.firstName)})]}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(\"a\",{className:p.a.link_,href:\"/s/articles/how_perch_works\",children:Object(_.jsx)(\"p\",{className:p.a.text,children:\"How it works\"})}),Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:p.a.circle,onClick:function(){w.n.call(t,!0)},children:Object(_.jsx)(x.a,{color:\"#FFFFFF\",className:p.a.logOut})})})]})]})]}),Object(_.jsxs)(\"div\",{className:p.a.body,children:[Object(_.jsxs)(\"div\",{className:p.a.couple,children:[Object(_.jsxs)(\"div\",{className:p.a.column,children:[Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"one\"==this.state.currentState.stage?p.a.optionIcon_Selected:p.a.optionIcon,id:p.a.optionIcon_,children:Object(_.jsx)(\"div\",{className:p.a.one,children:Object(_.jsx)(f.a,{icon:\"one\"})})})}),Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"two\"==this.state.currentState.stage?p.a.optionIcon_Selected:p.a.optionIcon,id:p.a.optionIcon_,children:Object(_.jsx)(\"div\",{className:p.a.two,children:Object(_.jsx)(f.a,{icon:\"two\"})})})}),Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"three\"==this.state.currentState.stage?p.a.optionIcon_Selected:p.a.optionIcon,id:p.a.optionIcon_,children:Object(_.jsx)(\"div\",{className:p.a.three,children:Object(_.jsx)(f.a,{icon:\"three\"})})})})]}),Object(_.jsxs)(\"div\",{className:p.a.optionList,children:[Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"one\"==this.state.currentState.stage?p.a.optionDescriptionCont_Selected:p.a.optionDescriptionCont,id:p.a.optionDescriptionCont_,children:Object(_.jsx)(\"p\",{className:p.a.optionDescription,children:\"Vehicle Confirmation\"})})}),Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"two\"==this.state.currentState.stage?p.a.optionDescriptionCont_Selected:p.a.optionDescriptionCont,id:p.a.optionDescriptionCont_,children:Object(_.jsx)(\"p\",{className:p.a.optionDescription,children:\"Upload Documents\"})})}),Object(_.jsx)(\"a\",{children:Object(_.jsx)(\"div\",{className:\"three\"==this.state.currentState.stage?p.a.optionDescriptionCont_Selected:p.a.optionDescriptionCont,id:p.a.optionDescriptionCont_,children:Object(_.jsx)(\"p\",{className:p.a.optionDescription,children:\"Application Status\"})})})]})]}),Object(_.jsx)(\"div\",{className:p.a.content,children:e})]})]})}}]),o}(u.a.Component)},mw2Z:function(t,e,o){t.exports={container:\"layout_container__4j1Ab\",textRow1:\"layout_textRow1__3i_4d\",dp:\"layout_dp__39qxU\",body:\"layout_body__dVbfB\",couple:\"layout_couple__1kNwy\",column:\"layout_column__2KJEV\",column_d:\"layout_column_d__1wDt7\",optionList:\"layout_optionList__2U_e6\",content:\"layout_content__1g7bu\",text:\"layout_text__2-bGs\",text_:\"layout_text___1R1WJ\",text_d:\"layout_text_d__2B94q\",link_:\"layout_link___DsGSd\",link_d:\"layout_link_d__3zdFt\",circle:\"layout_circle__J0sLg\",circle_d:\"layout_circle_d__1onJ1\",logOut:\"layout_logOut__3pMVj\",header:\"layout_header__h3g50\",logo:\"layout_logo__17pZ2\",logoBox:\"layout_logoBox__kxwp_\",logoBox_d:\"layout_logoBox_d__2xdwq\",optionTitle:\"layout_optionTitle__uyxw1\",optionShadowBox:\"layout_optionShadowBox__1Q-Ae\",optionIcon:\"layout_optionIcon__3m-31\",optionIcon_Selected:\"layout_optionIcon_Selected__scCvh\",optionIcon_d:\"layout_optionIcon_d__2-Vja\",optionIcon_Selected_d:\"layout_optionIcon_Selected_d__2xBHT\",optionDescriptionCont:\"layout_optionDescriptionCont__3A8yW\",optionDescriptionCont_Selected:\"layout_optionDescriptionCont_Selected__1i8LD\",optionDescriptionCont_:\"layout_optionDescriptionCont___CgXvL\",optionIcon_:\"layout_optionIcon___3y1uu\",optionDescription:\"layout_optionDescription__2l35V\",db:\"layout_db__2lWSG\",th:\"layout_th__39m13\",pw:\"layout_pw__1dO6s\",cu:\"layout_cu__mNpeH\",ss:\"layout_ss__3rlCI\",tt:\"layout_tt__1dwRg\",vh:\"layout_vh__tDXSS\",tx:\"layout_tx__2rZlz\",pi:\"layout_pi__iAidU\",one:\"layout_one__37Fah\",two:\"layout_two__JWVLW\",three:\"layout_three__1aTnh\"}}},[[\"HkCf\",0,1,6,5,7,9,15,14,21,22,23,17,18,24,16,2,3,4,8,13,19,20]]]);","extractedComments":[]}